import{S as ie,i as ne,s as ue,Y as z,Z as G,e as v,t as N,k as A,c as y,a as E,g as O,d as b,n as M,b as i,f as B,H as u,a7 as F,I as U,J as fe,L as ce,j as Q,l as W,m as $,o as ee,_ as te,x as se,u as re,v as ae,M as de,A as me}from"./vendor-9a64f523.js";import{s as be}from"./stores-bd9665ba.js";import{C as pe}from"./checkPlayerHasProfile-b1851115.js";import{R as _e}from"./resultFeedback-6bde5315.js";import{g as he}from"./helper-e98ae755.js";import{g as ge}from"./navigation-51f4a605.js";function le(n){let a,s,c,o,h,g,l,k,f,d,I,C,t,e,m,p,P,V,x,r,j,D,_,q;return{c(){a=v("div"),s=v("form"),c=v("div"),o=v("label"),h=N("Titel"),g=A(),l=v("input"),k=A(),f=v("div"),d=v("label"),I=N("Post"),C=A(),t=v("div"),e=v("textarea"),m=A(),p=v("div"),P=v("span"),V=N("Hou het vriendelijk en proffesioneel"),x=A(),r=v("button"),j=N("Post"),this.h()},l(w){a=y(w,"DIV",{class:!0});var T=E(a);s=y(T,"FORM",{});var H=E(s);c=y(H,"DIV",{class:!0});var L=E(c);o=y(L,"LABEL",{for:!0,class:!0});var J=E(o);h=O(J,"Titel"),J.forEach(b),g=M(L),l=y(L,"INPUT",{type:!0,"data-cy":!0,name:!0,id:!0,class:!0}),L.forEach(b),k=M(H),f=y(H,"DIV",{});var R=E(f);d=y(R,"LABEL",{for:!0,class:!0});var K=E(d);I=O(K,"Post"),K.forEach(b),C=M(R),t=y(R,"DIV",{class:!0});var X=E(t);e=y(X,"TEXTAREA",{id:!0,name:!0,rows:!0,class:!0}),E(e).forEach(b),X.forEach(b),m=M(R),p=y(R,"DIV",{class:!0});var S=E(p);P=y(S,"SPAN",{class:!0});var Y=E(P);V=O(Y,"Hou het vriendelijk en proffesioneel"),Y.forEach(b),x=M(S),r=y(S,"BUTTON",{"data-cy":!0,type:!0,class:!0});var Z=E(r);j=O(Z,"Post"),Z.forEach(b),S.forEach(b),R.forEach(b),H.forEach(b),T.forEach(b),this.h()},h(){i(o,"for","title"),i(o,"class","block text-sm font-medium text-gray-700"),i(l,"type","text"),i(l,"data-cy","post-title"),i(l,"name","title"),i(l,"id","title"),i(l,"class","mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"),i(c,"class","col-span-6 sm:col-span-4"),i(d,"for","post"),i(d,"class","block text-sm font-medium text-gray-700"),i(e,"id","post"),i(e,"name","post"),i(e,"rows","3"),i(e,"class","shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"),i(t,"class","mt-1"),i(P,"class","text-sm text-gray-500"),i(r,"data-cy","post-button"),r.disabled=D=n[4]||!n[1],i(r,"type","submit"),i(r,"class","float-right disabled:opacity-50 ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),i(p,"class","mt-4"),i(a,"class","ml-auto mr-auto max-w-xl mt-8")},m(w,T){B(w,a,T),u(a,s),u(s,c),u(c,o),u(o,h),u(c,g),u(c,l),F(l,n[2]),u(s,k),u(s,f),u(f,d),u(d,I),u(f,C),u(f,t),u(t,e),F(e,n[3]),u(f,m),u(f,p),u(p,P),u(P,V),u(p,x),u(p,r),u(r,j),_||(q=[U(l,"input",n[12]),U(e,"input",n[13]),U(s,"submit",fe(n[6]))],_=!0)},p(w,T){T&4&&l.value!==w[2]&&F(l,w[2]),T&8&&F(e,w[3]),T&18&&D!==(D=w[4]||!w[1])&&(r.disabled=D)},d(w){w&&b(a),_=!1,ce(q)}}}function ke(n){let a,s,c,o,h,g,l,k;function f(e){n[10](e)}let d={};n[5]!==void 0&&(d.alert=n[5]),a=new _e({props:d}),z.push(()=>G(a,"alert",f));function I(e){n[11](e)}let C={};n[1]!==void 0&&(C.hasCurriculumProfile=n[1]),o=new pe({props:C}),z.push(()=>G(o,"hasCurriculumProfile",I));let t=n[0]&&le(n);return{c(){Q(a.$$.fragment),c=A(),Q(o.$$.fragment),g=A(),t&&t.c(),l=W()},l(e){$(a.$$.fragment,e),c=M(e),$(o.$$.fragment,e),g=M(e),t&&t.l(e),l=W()},m(e,m){ee(a,e,m),B(e,c,m),ee(o,e,m),B(e,g,m),t&&t.m(e,m),B(e,l,m),k=!0},p(e,[m]){const p={};!s&&m&32&&(s=!0,p.alert=e[5],te(()=>s=!1)),a.$set(p);const P={};!h&&m&2&&(h=!0,P.hasCurriculumProfile=e[1],te(()=>h=!1)),o.$set(P),e[0]?t?t.p(e,m):(t=le(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i(e){k||(se(a.$$.fragment,e),se(o.$$.fragment,e),k=!0)},o(e){re(a.$$.fragment,e),re(o.$$.fragment,e),k=!1},d(e){ae(a,e),e&&b(c),ae(o,e),e&&b(g),t&&t.d(e),e&&b(l)}}}function oe(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function ve(n,a,s){let c;de(n,be,r=>s(15,c=r));let{firebase:o}=a,{talk:h}=a,{goalId:g}=a,{revision:l}=a,k,f="",d="",I=!1,C;l&&(f="Overleg revisie "+he(l.createdAt),d=""),me(async()=>{C=await o.firestore()});let t=oe();async function e(){if(c.user){let r=C.collection("curriculumProfile").doc(c.player.curriculumProfileId),j={title:f,text:d,numberOfReplies:0},D=await r.get();if(D.exists){let _=D.data();j.curriculumProfile={fullname:_.fullname,institution:_.institution},j.authorId=r.id}s(5,t=oe());try{let _=await C.collection("talk").doc(h.id).collection("posts").add(j);s(5,t.success=!0,t),s(5,t.successTitle="Post gemaakt",t),s(5,t.successMessage="id: "+_.id,t),await ge("/overleg/"+g+"/"+h.id+"/"+_.id)}catch(_){console.error("Kan post niet maken: ",_),s(5,t.error=!0,t),s(5,t.errorCode=_.code,t),s(5,t.errorMessage=_.message,t)}}}async function m(r){s(4,I=!0),await e(),s(2,f=""),s(3,d=""),setTimeout(()=>{s(4,I=!1)},5e3)}function p(r){t=r,s(5,t)}function P(r){k=r,s(1,k)}function V(){f=this.value,s(2,f)}function x(){d=this.value,s(3,d)}return n.$$set=r=>{"firebase"in r&&s(7,o=r.firebase),"talk"in r&&s(0,h=r.talk),"goalId"in r&&s(8,g=r.goalId),"revision"in r&&s(9,l=r.revision)},[h,k,f,d,I,t,m,o,g,l,p,P,V,x]}class Te extends ie{constructor(a){super();ne(this,a,ve,ke,ue,{firebase:7,talk:0,goalId:8,revision:9})}}export{Te as C};
