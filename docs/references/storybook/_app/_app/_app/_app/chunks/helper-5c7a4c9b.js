function d(t){return!!(t&&t.uid&&(t.idTokenResult.claims.canDebugDevelopment||t.idTokenResult.claims.canModerate))}async function s(t,l){let e,a=await t.firestore(),i=await a.collection("players").doc(l.uid).get();if(i.exists)e=i.data();else{const o={};try{let u=await a.collection("players").doc(l.uid).set(o);e=o}catch(c){console.log(c)}}return e!==null&&(e.id=l.uid),e}async function r(t,l){let e,a;return l?(e=l,e.idTokenResult=await e.getIdTokenResult(),a=await s(t,e)):(t.auth().signInAnonymously().then(()=>{}).catch(n=>{n.code,n.message}),e=null,a=null),{user:e,player:a}}export{d as h,r as l};
