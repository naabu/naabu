var y=Object.defineProperty;var h=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var d=(t,e,i)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,f=(t,e)=>{for(var i in e||(e={}))g.call(e,i)&&d(t,i,e[i]);if(h)for(var i of h(e))A.call(e,i)&&d(t,i,e[i]);return t};import{g as R,a as w,b}from"./helper-13ceec00.js";function k(t,e){return t.createdAt<e.createdAt?1:t.createdAt>e.createdAt?-1:0}function I(t){t.sort(k)}function m(t,e){return t.lastReplyAt<e.lastReplyAt?1:t.lastReplyAt>e.lastReplyAt?-1:0}function V(t){t.sort(m)}async function K(t,e,i){let n=await t.collection("revisions").where("revisionSourceId","==",i).where("revisionType","==",e).orderBy("revisionCreatedAt","desc").get(),s=[];return n.forEach(l=>{let o=l.data();o.revisionId=l.id,s.push(o)}),s}function S(){return["status","type","goalTitle","title","descriptionRaw","difficulty","video","quizzes"]}function x(t,e,i=[]){let r=[];r=a(r,t,e);let n=["revisionId","previousRevisionId","revisionCreatedAt","description","revisionAuthorId","revisionSourceId","revisionType","goalId","id","authorId","status","latestRevisionId","latestRevisionCreatedAt","svg","connectionStatus","connectionId"];for(let o=0;o<r.length;o++){let u=!1;for(let c=0;c<n.length;c++)if(r[o].keys.includes(n[c])){u=!0;break}u&&(r.splice(o,1),o--)}if(i.length===0)return r;let s=[],l=[];for(let o=0;o<i.length;o++){let u=i[o];for(let c=0;c<r.length;c++){let p=r[c];p.keys[0]===u&&(s.push(p),l.push(c))}}for(let o=0;o<r.length;o++)l.includes(o)||s.push(r[o]);return s}function z(t,e){return e===""?e:t.keys[t.keys.length-1]==="type"?R(e):t.keys[t.keys.length-1]==="difficulty"?w(e):t.keys[t.keys.length-1]==="status"?b(e):e===!1?"Nee":e===!0?"Ja":e||""}function q(t){let e=[];for(let i=0;i<t.length;i++)switch(t[i]){case"descriptionRaw":e.push("Beschrijving");break;case"title":e.push("Titel");break;case"quizzes":e.push("Quiz");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t[i-1]==="quizzes"&&e.push("vraag "+(parseInt(t[i])+1)),t[i-1]==="answers"&&e.push("antwoord "+(parseInt(t[i])+1));break;case"question":e.push("vraag");break;case"video":e.push("Video");break;case"vimeoId":e.push("vimeo id");break;case"type":e.push("Type");break;case"difficulty":e.push("Moeilijkheid");break;case"answers":case"answer":break;default:e.push(t[i]);break;case"timeInVideo":e.push("tijd in video");break;case"status":e.push("Status");break;case"correct":e.push("goed antwoord");break;case"goalTitle":e.push("Leerdoel");break}return e.join(" - ")+":"}function a(t,e,i,r=[]){if(typeof e=="object"&&e!==null&&typeof i=="object"&&i!==null){let n=[];for(let s in e)n.includes(s)||n.push(s);for(let s in i)n.includes(s)||n.push(s);for(let s in n){let l=n[s],o=[...r,l];l in e&&l in i?a(t,e[l],i[l],o):l in e?a(t,e[l],null,o):a(t,null,i[l],o)}}else if(typeof e=="object"&&e!==null)for(let n in e){let s=[...r,n];a(t,e[n],null,s)}else if(typeof i=="object"&&i!==null)for(let n in i){let s=[...r,n];a(t,null,i[n],s)}else if(Array.isArray(e)&&Array.isArray(i))if(e.length===i.length)for(let n=0;n<e.length;n++){let s=[...r,n];a(t,e[n],i[n],s)}else t.push({keys:r,type:"array",oldValue:e,newValue:i});else if(Array.isArray(e))for(let n=0;n<e.length;n++){let s=[...r,n];a(t,e[n],null,s)}else if(Array.isArray(i))for(let n=0;n<i.length;n++){let s=[...r,n];a(t,null,i[n],s)}else e!==null&&i===null?t.push({keys:r,type:"string",oldValue:e,newValue:""}):e===null&&i!==null?t.push({keys:r,type:"string",oldValue:"",newValue:i}):e===null&&i===null||e!==i&&t.push({keys:r,type:"string",oldValue:e,newValue:i});return t}function C(t,e){I(t);let i=null,r=null,n=null;for(let s=0;s<t.length;s++)t[s].id===e&&(s>0&&(i=t[s-1]),s<t.length-1&&(r=t[s+1]),s<t.length-2&&(n=t[s+2]));return{nextRevision:i,previousRevision:r,previousPreviousRevision:n}}async function D(t,e,i,r){let n=await t.firestore(),s={revisionType:"activity",revisionCreatedAt:t.firestore.Timestamp.now().seconds,revisionSourceId:e.id,revisionAuthorId:r};return e.latestRevisionId&&(s.previousRevisionId=e.latestRevisionId),s=f(f({},s),i),await n.collection("revisions").add(s)}export{S as a,z as b,D as c,V as d,C as e,q as f,x as g,K as q,I as s};
