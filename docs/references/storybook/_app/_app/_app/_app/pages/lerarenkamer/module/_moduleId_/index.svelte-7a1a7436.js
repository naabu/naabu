import{S as ae,i as ne,s as ie,a3 as ge,Y as z,Z as V,j as B,k as U,e as j,t as Z,m as C,n as W,c as k,a as M,g as K,d as _,b as y,o as G,f as F,H as v,I as le,J as be,_ as A,x as O,u as R,v as J,L as he,M as Q,A as we,a6 as je,aa as ue,ab as ke,r as Me,w as ye}from"../../../../chunks/vendor-9a64f523.js";import{F as ve}from"../../../../chunks/form-484efb7b.js";import{R as Ee}from"../../../../chunks/resultFeedback-6bde5315.js";import{a as fe}from"../../../../chunks/helper-e98ae755.js";import{f as Ie}from"../../../../chunks/helper-36963086.js";import{s as Te,p as De}from"../../../../chunks/stores-bd9665ba.js";import{f as Se}from"../../../../chunks/store-b78dac0d.js";import{S as ze,g as Ve}from"../../../../chunks/helper-4844646d.js";import{G as Ae}from"../../../../chunks/getModuleData-570c713f.js";/* empty css                                   */import"../../../../chunks/algolia-177da4a5.js";import"../../../../chunks/dialog-c021e43e.js";import"../../../../chunks/helper-69e97bf9.js";const{setTimeout:de}=je;function Oe(r){let s=!1,e=()=>{s=!1},t,a,n,p,f,u,l,d,h,E,o,m,g,D,c,w,I,S,T,Y,P,H,$;ge(r[7]);function ce(i){r[8](i)}let x={};r[3]!==void 0&&(x.alert=r[3]),a=new Ee({props:x}),z.push(()=>V(a,"alert",ce));function pe(i){r[9](i)}function _e(i){r[10](i)}let X={};return r[0]!==void 0&&(X.module=r[0]),r[4]!==void 0&&(X.allMaps=r[4]),g=new ve({props:X}),z.push(()=>V(g,"module",pe)),z.push(()=>V(g,"allMaps",_e)),{c(){B(a.$$.fragment),p=U(),f=j("div"),u=j("div"),l=j("div"),d=j("div"),h=j("p"),E=Z("Wijzig je module"),o=U(),m=j("form"),B(g.$$.fragment),w=U(),I=j("div"),S=j("div"),T=j("button"),Y=Z("Module wijzigen"),this.h()},l(i){C(a.$$.fragment,i),p=W(i),f=k(i,"DIV",{});var b=M(f);u=k(b,"DIV",{class:!0});var q=M(u);l=k(q,"DIV",{class:!0});var N=M(l);d=k(N,"DIV",{});var ee=M(d);h=k(ee,"P",{class:!0});var se=M(h);E=K(se,"Wijzig je module"),se.forEach(_),ee.forEach(_),N.forEach(_),q.forEach(_),b.forEach(_),o=W(i),m=k(i,"FORM",{class:!0});var L=M(m);C(g.$$.fragment,L),w=W(L),I=k(L,"DIV",{class:!0});var te=M(I);S=k(te,"DIV",{class:!0});var oe=M(S);T=k(oe,"BUTTON",{"data-cy":!0,type:!0,class:!0});var re=M(T);Y=K(re,"Module wijzigen"),re.forEach(_),oe.forEach(_),te.forEach(_),L.forEach(_),this.h()},h(){y(h,"class","mt-1 max-w-2xl text-sm text-gray-500"),y(l,"class","flex-1 min-w-0"),y(u,"class","mt-2 md:flex md:items-center md:justify-between"),y(T,"data-cy","edit-module-button"),T.disabled=r[2],y(T,"type","submit"),y(T,"class","float-right disabled:opacity-50 ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),y(S,"class","flex justify-end"),y(I,"class","pt-5"),y(m,"class","space-y-8 divide-y divide-gray-200")},m(i,b){G(a,i,b),F(i,p,b),F(i,f,b),v(f,u),v(u,l),v(l,d),v(d,h),v(h,E),F(i,o,b),F(i,m,b),G(g,m,null),v(m,w),v(m,I),v(I,S),v(S,T),v(T,Y),P=!0,H||($=[le(window,"scroll",()=>{s=!0,clearTimeout(t),t=de(e,100),r[7]()}),le(m,"submit",be(r[5]))],H=!0)},p(i,[b]){b&2&&!s&&(s=!0,clearTimeout(t),scrollTo(window.pageXOffset,i[1]),t=de(e,100));const q={};!n&&b&8&&(n=!0,q.alert=i[3],A(()=>n=!1)),a.$set(q);const N={};!D&&b&1&&(D=!0,N.module=i[0],A(()=>D=!1)),!c&&b&16&&(c=!0,N.allMaps=i[4],A(()=>c=!1)),g.$set(N),(!P||b&4)&&(T.disabled=i[2])},i(i){P||(O(a.$$.fragment,i),O(g.$$.fragment,i),P=!0)},o(i){R(a.$$.fragment,i),R(g.$$.fragment,i),P=!1},d(i){J(a,i),i&&_(p),i&&_(f),i&&_(o),i&&_(m),J(g),H=!1,he($)}}}function Fe(r,s,e){let t;Q(r,Te,c=>e(12,t=c));let{firebase:a}=s,{module:n}=s,p,f,u=!1,l=fe(),d=[];we(async()=>{f=await a.firestore();let c=await f.collection("maps").get();e(4,d=[]),c.forEach(w=>{let I=w.data();I.paths.forEach(S=>{S.points=JSON.parse(S.points)}),I.mapId=w.id,d.push(I)}),n.mapId&&e(0,n.map=d.find(w=>w.mapId===n.mapId),n)});async function h(){let c=Ie(n,!1,!0,!1);e(3,l=fe()),c.authorId=t.user.uid,c.modifiedAt=a.firestore.Timestamp.now().seconds;try{await f.collection("modules").doc(n.id).set(c),e(3,l.success=!0,l),e(3,l.successTitle="Module gewijzigd",l),e(3,l.successMessage="id: "+n.id,l)}catch(w){e(3,l.error=!0,l),e(3,l.errorCode=w.code,l),e(3,l.errorMessage=w.message,l)}e(1,p=0)}async function E(){e(2,u=!0),await h(),setTimeout(()=>{e(2,u=!1)},5e3)}function o(){e(1,p=window.pageYOffset)}function m(c){l=c,e(3,l)}function g(c){n=c,e(0,n)}function D(c){d=c,e(4,d)}return r.$$set=c=>{"firebase"in c&&e(6,a=c.firebase),"module"in c&&e(0,n=c.module)},[n,p,u,l,d,E,a,o,m,g,D]}class Re extends ae{constructor(s){super();ne(this,s,Fe,Oe,ie,{firebase:6,module:0})}}function Ne(r){let s,e;return{c(){s=j("span"),e=Z("Module wijzigen"),this.h()},l(t){s=k(t,"SPAN",{slot:!0});var a=M(s);e=K(a,"Module wijzigen"),a.forEach(_),this.h()},h(){y(s,"slot","title")},m(t,a){F(t,s,a),v(s,e)},d(t){t&&_(s)}}}function me(r){let s,e,t,a;function n(u){r[7](u)}function p(u){r[8](u)}let f={};return r[2]!==void 0&&(f.firebase=r[2]),r[0]!==void 0&&(f.module=r[0]),s=new Re({props:f}),z.push(()=>V(s,"firebase",n)),z.push(()=>V(s,"module",p)),{c(){B(s.$$.fragment)},l(u){C(s.$$.fragment,u)},m(u,l){G(s,u,l),a=!0},p(u,l){const d={};!e&&l&4&&(e=!0,d.firebase=u[2],A(()=>e=!1)),!t&&l&1&&(t=!0,d.module=u[0],A(()=>t=!1)),s.$set(d)},i(u){a||(O(s.$$.fragment,u),a=!0)},o(u){R(s.$$.fragment,u),a=!1},d(u){J(s,u)}}}function Pe(r){let s,e,t=r[2]&&r[0]&&me(r);return{c(){s=j("span"),t&&t.c(),this.h()},l(a){s=k(a,"SPAN",{slot:!0});var n=M(s);t&&t.l(n),n.forEach(_),this.h()},h(){y(s,"slot","content")},m(a,n){F(a,s,n),t&&t.m(s,null),e=!0},p(a,n){a[2]&&a[0]?t?(t.p(a,n),n&5&&O(t,1)):(t=me(a),t.c(),O(t,1),t.m(s,null)):t&&(Me(),R(t,1,1,()=>{t=null}),ye())},i(a){e||(O(t),e=!0)},o(a){R(t),e=!1},d(a){a&&_(s),t&&t.d()}}}function qe(r){let s,e,t,a,n,p,f;function u(o){r[5](o)}function l(o){r[6](o)}let d={};r[2]!==void 0&&(d.firebase=r[2]),r[0]!==void 0&&(d.module=r[0]),s=new Ae({props:d}),z.push(()=>V(s,"firebase",u)),z.push(()=>V(s,"module",l));function h(o){r[9](o)}let E={$$slots:{content:[Pe],title:[Ne]},$$scope:{ctx:r}};return r[1]!==void 0&&(E.menuitems=r[1]),n=new ze({props:E}),z.push(()=>V(n,"menuitems",h)),{c(){B(s.$$.fragment),a=U(),B(n.$$.fragment)},l(o){C(s.$$.fragment,o),a=W(o),C(n.$$.fragment,o)},m(o,m){G(s,o,m),F(o,a,m),G(n,o,m),f=!0},p(o,[m]){const g={};!e&&m&4&&(e=!0,g.firebase=o[2],A(()=>e=!1)),!t&&m&1&&(t=!0,g.module=o[0],A(()=>t=!1)),s.$set(g);const D={};m&2053&&(D.$$scope={dirty:m,ctx:o}),!p&&m&2&&(p=!0,D.menuitems=o[1],A(()=>p=!1)),n.$set(D)},i(o){f||(O(s.$$.fragment,o),O(n.$$.fragment,o),f=!0)},o(o){R(s.$$.fragment,o),R(n.$$.fragment,o),f=!1},d(o){J(s,o),o&&_(a),J(n,o)}}}function Be(r,s,e){let t,a;Q(r,Se,o=>e(3,t=o)),Q(r,De,o=>e(4,a=o));let n,p,f;ue.addLocale(ke),new ue("nl");function u(o){p=o,e(2,p),e(3,t)}function l(o){f=o,e(0,f)}function d(o){p=o,e(2,p),e(3,t)}function h(o){f=o,e(0,f)}function E(o){n=o,e(1,n),e(0,f),e(4,a)}return r.$$.update=()=>{r.$$.dirty&17&&f&&e(1,n=Ve(a.path)),r.$$.dirty&8&&(async()=>{t&&e(2,p=t)})()},[f,n,p,t,a,u,l,d,h,E]}class xe extends ae{constructor(s){super();ne(this,s,Be,qe,ie,{})}}export{xe as default};
