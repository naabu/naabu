import{S as oe,i as ne,s as le,a3 as _e,Y as C,Z as P,j as J,k as Z,e as g,t as z,m as Y,n as G,c as k,a as w,g as K,d as c,b as M,o as B,f as V,H as v,I as ie,J as be,_ as $,x as T,u as A,v as H,L as he,M as Q,A as ge,a6 as ke,r as we,w as Me}from"../../../chunks/vendor-9a64f523.js";import{F as ve}from"../../../chunks/form-484efb7b.js";import{R as je}from"../../../chunks/resultFeedback-6bde5315.js";import{a as ue}from"../../../chunks/helper-e98ae755.js";import{f as ye}from"../../../chunks/helper-36963086.js";import{s as Ee,p as Se}from"../../../chunks/stores-bd9665ba.js";import{f as Te}from"../../../chunks/store-b78dac0d.js";import{S as De,g as Ie}from"../../../chunks/helper-4844646d.js";/* empty css                                */import"../../../chunks/algolia-177da4a5.js";import"../../../chunks/dialog-c021e43e.js";import"../../../chunks/helper-69e97bf9.js";const{setTimeout:fe}=ke;function Ve(o){let t=!1,s=()=>{t=!1},e,r,i,a,u,l,m,h,S,O,D,p,_,F,f,j,b,E,y,L,N,U,W;_e(o[7]);function ce(n){o[8](n)}let x={};o[2]!==void 0&&(x.alert=o[2]),r=new je({props:x}),C.push(()=>P(r,"alert",ce));function de(n){o[9](n)}function pe(n){o[10](n)}let X={};return o[3]!==void 0&&(X.module=o[3]),o[4]!==void 0&&(X.allMaps=o[4]),_=new ve({props:X}),C.push(()=>P(_,"module",de)),C.push(()=>P(_,"allMaps",pe)),{c(){J(r.$$.fragment),a=Z(),u=g("div"),l=g("div"),m=g("div"),h=g("div"),S=g("p"),O=z("Maak een nieuwe module aan met een kaart"),D=Z(),p=g("form"),J(_.$$.fragment),j=Z(),b=g("div"),E=g("div"),y=g("button"),L=z("Module aanmaken"),this.h()},l(n){Y(r.$$.fragment,n),a=G(n),u=k(n,"DIV",{});var d=w(u);l=k(d,"DIV",{class:!0});var R=w(l);m=k(R,"DIV",{class:!0});var I=w(m);h=k(I,"DIV",{});var ee=w(h);S=k(ee,"P",{class:!0});var te=w(S);O=K(te,"Maak een nieuwe module aan met een kaart"),te.forEach(c),ee.forEach(c),I.forEach(c),R.forEach(c),d.forEach(c),D=G(n),p=k(n,"FORM",{class:!0});var q=w(p);Y(_.$$.fragment,q),j=G(q),b=k(q,"DIV",{class:!0});var se=w(b);E=k(se,"DIV",{class:!0});var ae=w(E);y=k(ae,"BUTTON",{"data-cy":!0,type:!0,class:!0});var re=w(y);L=K(re,"Module aanmaken"),re.forEach(c),ae.forEach(c),se.forEach(c),q.forEach(c),this.h()},h(){M(S,"class","mt-1 max-w-2xl text-sm text-gray-500"),M(m,"class","flex-1 min-w-0"),M(l,"class","mt-2 md:flex md:items-center md:justify-between"),M(y,"data-cy","create-module-submit-button"),y.disabled=o[1],M(y,"type","submit"),M(y,"class","float-right disabled:opacity-50 ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),M(E,"class","flex justify-end"),M(b,"class","pt-5"),M(p,"class","space-y-8 divide-y divide-gray-200")},m(n,d){B(r,n,d),V(n,a,d),V(n,u,d),v(u,l),v(l,m),v(m,h),v(h,S),v(S,O),V(n,D,d),V(n,p,d),B(_,p,null),v(p,j),v(p,b),v(b,E),v(E,y),v(y,L),N=!0,U||(W=[ie(window,"scroll",()=>{t=!0,clearTimeout(e),e=fe(s,100),o[7]()}),ie(p,"submit",be(o[5]))],U=!0)},p(n,[d]){d&1&&!t&&(t=!0,clearTimeout(e),scrollTo(window.pageXOffset,n[0]),e=fe(s,100));const R={};!i&&d&4&&(i=!0,R.alert=n[2],$(()=>i=!1)),r.$set(R);const I={};!F&&d&8&&(F=!0,I.module=n[3],$(()=>F=!1)),!f&&d&16&&(f=!0,I.allMaps=n[4],$(()=>f=!1)),_.$set(I),(!N||d&2)&&(y.disabled=n[1])},i(n){N||(T(r.$$.fragment,n),T(_.$$.fragment,n),N=!0)},o(n){A(r.$$.fragment,n),A(_.$$.fragment,n),N=!1},d(n){H(r,n),n&&c(a),n&&c(u),n&&c(D),n&&c(p),H(_),U=!1,he(W)}}}function Ae(o,t,s){let e;Q(o,Ee,f=>s(12,e=f));let{firebase:r}=t,i,a,u=!1,l=ue(),m={moduleName:"",moduleDescription:"",moduleSvg:""},h=[];ge(async()=>{a=await r.firestore();let f=await a.collection("maps").get();s(4,h=[]),f.forEach(j=>{let b=j.data();b.paths.forEach(E=>{E.points=JSON.parse(E.points)}),b.mapId=j.id,h.push(b)})});async function S(){let f=ye(m,!1,!0,!1);s(2,l=ue()),f.authorId=e.user.uid,f.createdAt=r.firestore.Timestamp.now().seconds,f.modifiedAt=r.firestore.Timestamp.now().seconds;try{let b=await a.collection("modules").add(f);s(2,l.success=!0,l),s(2,l.successTitle="Module succesvol aangemaakt",l),s(2,l.successMessage="id: "+b.id,l)}catch(j){s(2,l.error=!0,l),s(2,l.errorCode=j.code,l),s(2,l.errorMessage=j.message,l)}s(0,i=0)}async function O(){s(1,u=!0),await S(),setTimeout(()=>{s(1,u=!1)},5e3)}function D(){s(0,i=window.pageYOffset)}function p(f){l=f,s(2,l)}function _(f){m=f,s(3,m)}function F(f){h=f,s(4,h)}return o.$$set=f=>{"firebase"in f&&s(6,r=f.firebase)},[i,u,l,m,h,O,r,D,p,_,F]}class Oe extends oe{constructor(t){super();ne(this,t,Ae,Ve,le,{firebase:6})}}function Fe(o){let t,s;return{c(){t=g("span"),s=z("Module maken"),this.h()},l(e){t=k(e,"SPAN",{slot:!0});var r=w(t);s=K(r,"Module maken"),r.forEach(c),this.h()},h(){M(t,"slot","title")},m(e,r){V(e,t,r),v(t,s)},d(e){e&&c(t)}}}function me(o){let t,s,e;function r(a){o[3](a)}let i={};return o[1]!==void 0&&(i.firebase=o[1]),t=new Oe({props:i}),C.push(()=>P(t,"firebase",r)),{c(){J(t.$$.fragment)},l(a){Y(t.$$.fragment,a)},m(a,u){B(t,a,u),e=!0},p(a,u){const l={};!s&&u&2&&(s=!0,l.firebase=a[1],$(()=>s=!1)),t.$set(l)},i(a){e||(T(t.$$.fragment,a),e=!0)},o(a){A(t.$$.fragment,a),e=!1},d(a){H(t,a)}}}function Ne(o){let t,s,e=o[1]&&me(o);return{c(){t=g("span"),e&&e.c(),this.h()},l(r){t=k(r,"SPAN",{slot:!0});var i=w(t);e&&e.l(i),i.forEach(c),this.h()},h(){M(t,"slot","content")},m(r,i){V(r,t,i),e&&e.m(t,null),s=!0},p(r,i){r[1]?e?(e.p(r,i),i&2&&T(e,1)):(e=me(r),e.c(),T(e,1),e.m(t,null)):e&&(we(),A(e,1,1,()=>{e=null}),Me())},i(r){s||(T(e),s=!0)},o(r){A(e),s=!1},d(r){r&&c(t),e&&e.d()}}}function Re(o){let t,s,e;function r(a){o[4](a)}let i={$$slots:{content:[Ne],title:[Fe]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.menuitems=o[0]),t=new De({props:i}),C.push(()=>P(t,"menuitems",r)),{c(){J(t.$$.fragment)},l(a){Y(t.$$.fragment,a)},m(a,u){B(t,a,u),e=!0},p(a,[u]){const l={};u&66&&(l.$$scope={dirty:u,ctx:a}),!s&&u&1&&(s=!0,l.menuitems=a[0],$(()=>s=!1)),t.$set(l)},i(a){e||(T(t.$$.fragment,a),e=!0)},o(a){A(t.$$.fragment,a),e=!1},d(a){H(t,a)}}}function Ce(o,t,s){let e,r;Q(o,Te,m=>s(2,e=m)),Q(o,Se,m=>s(5,r=m));let i=Ie(r.path),a;function u(m){a=m,s(1,a),s(2,e)}function l(m){i=m,s(0,i)}return o.$$.update=()=>{o.$$.dirty&4&&(async()=>{e&&s(1,a=e)})()},[i,a,e,u,l]}class Ge extends oe{constructor(t){super();ne(this,t,Ce,Re,le,{})}}export{Ge as default};
