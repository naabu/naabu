import{S as Ne,i as We,s as Ye,a3 as at,e as w,j as x,k as S,D as Je,t as ne,c as k,a as h,m as $,n as T,E as Ue,d as g,g as ue,b,f as ge,o as ee,H as f,I as Xe,J as ot,_ as B,x as V,u as L,v as te,l as pe,r as Ze,w as Ke,M as _e,A as lt,Y as A,Z as O}from"../../../chunks/vendor-9a64f523.js";import{s as nt,p as Qe}from"../../../chunks/stores-bd9665ba.js";import{F as ut}from"../../../chunks/form-272bebbb.js";import{S as ft}from"../../../chunks/show-4b835def.js";import{R as ct}from"../../../chunks/revision-4f4fadae.js";import{R as dt}from"../../../chunks/resultFeedback-6bde5315.js";import{g as mt,c as bt}from"../../../chunks/helper-d6a45b8d.js";import{f as gt}from"../../../chunks/store-b78dac0d.js";import{B as pt}from"../../../chunks/breadcrumbPageTitle-3eadeeda.js";import"../../../chunks/quizzesForm-adbab4ef.js";import"../../../chunks/dialog-c021e43e.js";import"../../../chunks/helper-e98ae755.js";import"../../../chunks/tabs-ee43e290.js";import"../../../chunks/navigation-51f4a605.js";import"../../../chunks/singletons-12a22614.js";/* empty css                                                         */function xe(r){let o,e,i,a,u,p,j,l,n,_,s,d,M,I,t,E,R,z,H,m,C,y,D,G,N,fe,F,he,ve,se,U,X,W,Z,we,ke,re,je,P,q,Ee,ze,K,Q,Y,Ie,ie,ye,Re;function tt(c){r[9](c)}let De={subSelected:"edit"};r[2]!==void 0&&(De.revision=r[2]),e=new ct({props:De}),A.push(()=>O(e,"revision",tt));function st(c){r[10](c)}let Ve={};r[1]!==void 0&&(Ve.breadcrumbs=r[1]),u=new ft({props:Ve}),A.push(()=>O(u,"breadcrumbs",st));function rt(c){r[11](c)}let Ce={};r[3]!==void 0&&(Ce.alert=r[3]),F=new dt({props:Ce}),A.push(()=>O(F,"alert",rt));function it(c){r[12](c)}let Se={};return r[2]!==void 0&&(Se.goal=r[2]),q=new ut({props:Se}),A.push(()=>O(q,"goal",it)),{c(){o=w("div"),x(e.$$.fragment),a=S(),x(u.$$.fragment),j=S(),l=w("div"),n=w("div"),_=w("div"),s=Je("svg"),d=Je("path"),M=S(),I=w("div"),t=w("h3"),E=ne("Waarschuwing: u bewerkt een oude versie van deze pagina."),R=S(),z=w("div"),H=w("p"),m=ne(`Als u uw bewerking opslaat, gaan alle wijzigingen verloren die na
              deze versie zijn gemaakt.`),C=S(),y=w("p"),D=w("a"),G=ne("bewerk huidige versie"),fe=S(),x(F.$$.fragment),ve=S(),se=w("div"),U=w("div"),X=w("div"),W=w("div"),Z=w("h3"),we=ne("Leerdoel wijzigen"),ke=S(),re=w("p"),je=S(),P=w("form"),x(q.$$.fragment),ze=S(),K=w("div"),Q=w("div"),Y=w("button"),Ie=ne("Leerdoel publiseren"),this.h()},l(c){o=k(c,"DIV",{});var v=h(o);$(e.$$.fragment,v),a=T(v),$(u.$$.fragment,v),j=T(v),l=k(v,"DIV",{class:!0});var ae=h(l);n=k(ae,"DIV",{class:!0});var J=h(n);_=k(J,"DIV",{class:!0});var oe=h(_);s=Ue(oe,"svg",{class:!0,xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0});var le=h(s);d=Ue(le,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),h(d).forEach(g),le.forEach(g),oe.forEach(g),M=T(J),I=k(J,"DIV",{class:!0});var ce=h(I);t=k(ce,"H3",{class:!0,"data-test":!0});var Te=h(t);E=ue(Te,"Waarschuwing: u bewerkt een oude versie van deze pagina."),Te.forEach(g),R=T(ce),z=k(ce,"DIV",{class:!0});var de=h(z);H=k(de,"P",{});var Le=h(H);m=ue(Le,`Als u uw bewerking opslaat, gaan alle wijzigingen verloren die na
              deze versie zijn gemaakt.`),Le.forEach(g),C=T(de),y=k(de,"P",{});var Me=h(y);D=k(Me,"A",{class:!0,href:!0});var Fe=h(D);G=ue(Fe,"bewerk huidige versie"),Fe.forEach(g),Me.forEach(g),de.forEach(g),ce.forEach(g),J.forEach(g),ae.forEach(g),fe=T(v),$(F.$$.fragment,v),ve=T(v),se=k(v,"DIV",{});var Pe=h(se);U=k(Pe,"DIV",{class:!0});var qe=h(U);X=k(qe,"DIV",{class:!0});var Be=h(X);W=k(Be,"DIV",{});var me=h(W);Z=k(me,"H3",{class:!0});var Ae=h(Z);we=ue(Ae,"Leerdoel wijzigen"),Ae.forEach(g),ke=T(me),re=k(me,"P",{class:!0}),h(re).forEach(g),me.forEach(g),Be.forEach(g),qe.forEach(g),Pe.forEach(g),je=T(v),P=k(v,"FORM",{class:!0});var be=h(P);$(q.$$.fragment,be),ze=T(be),K=k(be,"DIV",{class:!0});var Oe=h(K);Q=k(Oe,"DIV",{class:!0});var He=h(Q);Y=k(He,"BUTTON",{type:!0,class:!0});var Ge=h(Y);Ie=ue(Ge,"Leerdoel publiseren"),Ge.forEach(g),He.forEach(g),Oe.forEach(g),be.forEach(g),v.forEach(g),this.h()},h(){b(d,"fill-rule","evenodd"),b(d,"d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"),b(d,"clip-rule","evenodd"),b(s,"class","h-5 w-5 text-yellow-400"),b(s,"xmlns","http://www.w3.org/2000/svg"),b(s,"viewBox","0 0 20 20"),b(s,"fill","currentColor"),b(s,"aria-hidden","true"),b(_,"class","flex-shrink-0"),b(t,"class","text-sm font-medium text-yellow-800"),b(t,"data-test","alert-old-version"),b(D,"class","underline"),b(D,"href",N="/beheer/leerdoel/"+r[2].goalId+"/wijzigen"),b(z,"class","mt-2 text-sm text-yellow-700"),b(I,"class","ml-3"),b(n,"class","flex"),b(l,"class","rounded-md bg-yellow-50 p-4"),b(Z,"class","text-lg leading-6 font-medium text-gray-900"),b(re,"class","mt-1 max-w-2xl text-sm text-gray-500"),b(X,"class","flex-1 min-w-0"),b(U,"class","mt-2 md:flex md:items-center md:justify-between"),b(Y,"type","submit"),b(Y,"class","float-right ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),b(Q,"class","flex justify-end"),b(K,"class","pt-5"),b(P,"class","space-y-8 divide-y divide-gray-200")},m(c,v){ge(c,o,v),ee(e,o,null),f(o,a),ee(u,o,null),f(o,j),f(o,l),f(l,n),f(n,_),f(_,s),f(s,d),f(n,M),f(n,I),f(I,t),f(t,E),f(I,R),f(I,z),f(z,H),f(H,m),f(z,C),f(z,y),f(y,D),f(D,G),f(o,fe),ee(F,o,null),f(o,ve),f(o,se),f(se,U),f(U,X),f(X,W),f(W,Z),f(Z,we),f(W,ke),f(W,re),f(o,je),f(o,P),ee(q,P,null),f(P,ze),f(P,K),f(K,Q),f(Q,Y),f(Y,Ie),ie=!0,ye||(Re=Xe(P,"submit",ot(r[4])),ye=!0)},p(c,v){const ae={};!i&&v&4&&(i=!0,ae.revision=c[2],B(()=>i=!1)),e.$set(ae);const J={};!p&&v&2&&(p=!0,J.breadcrumbs=c[1],B(()=>p=!1)),u.$set(J),(!ie||v&4&&N!==(N="/beheer/leerdoel/"+c[2].goalId+"/wijzigen"))&&b(D,"href",N);const oe={};!he&&v&8&&(he=!0,oe.alert=c[3],B(()=>he=!1)),F.$set(oe);const le={};!Ee&&v&4&&(Ee=!0,le.goal=c[2],B(()=>Ee=!1)),q.$set(le)},i(c){ie||(V(e.$$.fragment,c),V(u.$$.fragment,c),V(F.$$.fragment,c),V(q.$$.fragment,c),ie=!0)},o(c){L(e.$$.fragment,c),L(u.$$.fragment,c),L(F.$$.fragment,c),L(q.$$.fragment,c),ie=!1},d(c){c&&g(o),te(e),te(u),te(F),te(q),ye=!1,Re()}}}function _t(r){let o=!1,e=()=>{o=!1},i,a,u,p,j;at(r[8]);let l=r[2]&&xe(r);return{c(){l&&l.c(),a=pe()},l(n){l&&l.l(n),a=pe()},m(n,_){l&&l.m(n,_),ge(n,a,_),u=!0,p||(j=Xe(window,"scroll",()=>{o=!0,clearTimeout(i),i=setTimeout(e,100),r[8]()}),p=!0)},p(n,[_]){_&1&&!o&&(o=!0,clearTimeout(i),scrollTo(window.pageXOffset,n[0]),i=setTimeout(e,100)),n[2]?l?(l.p(n,_),_&4&&V(l,1)):(l=xe(n),l.c(),V(l,1),l.m(a.parentNode,a)):l&&(Ze(),L(l,1,1,()=>{l=null}),Ke())},i(n){u||(V(l),u=!0)},o(n){L(l),u=!1},d(n){l&&l.d(n),n&&g(a),p=!1,j()}}}function $e(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function ht(r,o,e){let i,a;_e(r,nt,m=>e(14,i=m)),_e(r,Qe,m=>e(15,a=m));let{battleCol:u}=o,{firebase:p}=o,j,l=[{url:"/beheer",value:"Beheer"},{url:"/beheer/leerdoel",value:"Leerdoel"},{url:"/beheer/leerdoel/"+a.params.id+"/wijzigen",value:"Leerdoel wijzigen"}],{revisionRef:n}=o,_,s,d=$e();lt(async()=>{_=await n.get(),_.exists&&(e(2,s=_.data()),e(2,s.revisionId=n.id,s),s.goalLinks||e(2,s.goalLinks=[],s),s.unitopic||e(2,s.unitopic="",s),s.multitopics||e(2,s.multitopics=[],s),s.context||e(2,s.context="",s),s.selectedVerbs||e(2,s.selectedVerbs=[],s),s.fromText||e(2,s.fromText="",s),s.battles||e(2,s.battles=[],s)),(await u.get()).forEach(C=>{let y=C.data();y.name=C.id,e(2,s.battles=[...s.battles,y],s)})});async function M(){const m=await p.firestore();let C=mt(s,i.serverFirestoreTimeStamp);e(3,d=$e());try{if(i.user&&i.player.curriculumProfileId){let y=m.collection("goals").doc(s.goalId);await y.update(C);for(let D=0;D<s.battles.length;D++){let G=m.doc("/goals/"+y.id+"/battles/"+s.battles[D].name),N={quizzes:s.battles[D].quizzes};(await G.get()).exists?await G.update(N):await G.set(N)}C.authorId=i.player.curriculumProfileId,C.goalId=y.id,await bt(m,s,C,i.user.uid,p)}e(3,d.success=!0,d),e(3,d.successTitle="Leerdoel gewijzigd",d),e(3,d.successMessage="id: "+goalRef.id,d)}catch(y){console.error("Error adding document: ",y),e(3,d.error=!0,d),e(3,d.errorCode=y.code,d),e(3,d.errorMessage=y.message,d)}e(0,j=0)}async function I(m){await M()}function t(){e(0,j=window.pageYOffset)}function E(m){s=m,e(2,s)}function R(m){l=m,e(1,l)}function z(m){d=m,e(3,d)}function H(m){s=m,e(2,s)}return r.$$set=m=>{"battleCol"in m&&e(5,u=m.battleCol),"firebase"in m&&e(6,p=m.firebase),"revisionRef"in m&&e(7,n=m.revisionRef)},[j,l,s,d,I,u,p,n,t,E,R,z,H]}class vt extends Ne{constructor(o){super();We(this,o,ht,_t,Ye,{battleCol:5,firebase:6,revisionRef:7})}}function et(r){let o,e,i,a,u,p,j,l;function n(t){r[8](t)}let _={title:r[3].title};r[4]!==void 0&&(_.breadcrumbs=r[4]),o=new pt({props:_}),A.push(()=>O(o,"breadcrumbs",n));function s(t){r[9](t)}function d(t){r[10](t)}function M(t){r[11](t)}let I={};return r[1]!==void 0&&(I.revisionRef=r[1]),r[2]!==void 0&&(I.battleCol=r[2]),r[0]!==void 0&&(I.firebase=r[0]),a=new vt({props:I}),A.push(()=>O(a,"revisionRef",s)),A.push(()=>O(a,"battleCol",d)),A.push(()=>O(a,"firebase",M)),{c(){x(o.$$.fragment),i=S(),x(a.$$.fragment)},l(t){$(o.$$.fragment,t),i=T(t),$(a.$$.fragment,t)},m(t,E){ee(o,t,E),ge(t,i,E),ee(a,t,E),l=!0},p(t,E){const R={};E&8&&(R.title=t[3].title),!e&&E&16&&(e=!0,R.breadcrumbs=t[4],B(()=>e=!1)),o.$set(R);const z={};!u&&E&2&&(u=!0,z.revisionRef=t[1],B(()=>u=!1)),!p&&E&4&&(p=!0,z.battleCol=t[2],B(()=>p=!1)),!j&&E&1&&(j=!0,z.firebase=t[0],B(()=>j=!1)),a.$set(z)},i(t){l||(V(o.$$.fragment,t),V(a.$$.fragment,t),l=!0)},o(t){L(o.$$.fragment,t),L(a.$$.fragment,t),l=!1},d(t){te(o,t),t&&g(i),te(a,t)}}}function wt(r){let o,e,i=r[0]&&r[1]&&r[3]&&et(r);return{c(){i&&i.c(),o=pe()},l(a){i&&i.l(a),o=pe()},m(a,u){i&&i.m(a,u),ge(a,o,u),e=!0},p(a,[u]){a[0]&&a[1]&&a[3]?i?(i.p(a,u),u&11&&V(i,1)):(i=et(a),i.c(),V(i,1),i.m(o.parentNode,o)):i&&(Ze(),L(i,1,1,()=>{i=null}),Ke())},i(a){e||(V(i),e=!0)},o(a){L(i),e=!1},d(a){i&&i.d(a),a&&g(o)}}}function kt(r,o,e){let i,a;_e(r,Qe,t=>e(6,i=t)),_e(r,gt,t=>e(7,a=t));let u,p,j,l,n=!1,_;function s(t){_=t,e(4,_)}function d(t){p=t,e(1,p),e(7,a),e(5,n),e(0,u),e(6,i)}function M(t){j=t,e(2,j),e(7,a),e(5,n),e(0,u),e(6,i),e(1,p)}function I(t){u=t,e(0,u),e(7,a),e(5,n),e(6,i),e(1,p)}return r.$$.update=()=>{r.$$.dirty&227&&(async()=>{if(a&&!n){e(5,n=!0),e(0,u=a);let t=await u.firestore();e(1,p=t.collection("revisions").doc(i.params.id)),e(2,j=t.collection("revisions/"+i.params.id+"/battles"));let E=await p.get();if(E.exists){let R=E.data();R.revisionId=p.id;let z=await t.collection("goals").doc(R.goalId).get();z.exists&&(e(3,l=z.data()),e(3,l.id=R.goalId,l))}}})()},[u,p,j,l,_,n,i,a,s,d,M,I]}class Bt extends Ne{constructor(o){super();We(this,o,kt,wt,Ye,{})}}export{Bt as default};
