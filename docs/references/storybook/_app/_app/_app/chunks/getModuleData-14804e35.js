import{S as I,i as S,s as U,M as c}from"./vendor-ef0a5b69.js";import{s as j,p as w}from"./stores-2d9a71bb.js";import{f as x}from"./store-6c10047c.js";import{g as _}from"./helper-36963086.js";function D(s,u,o){let l,d,b;c(s,j,e=>o(6,l=e)),c(s,x,e=>o(7,d=e)),c(s,w,e=>o(8,b=e));let{firebase:r}=u,{module:t}=u,{mounted:a=!1}=u,{moduleId:n=b.params.moduleId}=u,{userModule:i}=u,{loadUserModule:m=!0}=u;async function h(){let M=(await r.firestore()).collection("modules").doc(n),g=await M.get();if(g.exists){o(1,t=g.data()),o(1,t.id=M.id,t);for(let f=0;f<t.paths.length;f++){let y=t.paths[f];y.points=JSON.parse(y.points)}}}return s.$$set=e=>{"firebase"in e&&o(0,r=e.firebase),"module"in e&&o(1,t=e.module),"mounted"in e&&o(2,a=e.mounted),"moduleId"in e&&o(5,n=e.moduleId),"userModule"in e&&o(3,i=e.userModule),"loadUserModule"in e&&o(4,m=e.loadUserModule)},s.$$.update=()=>{s.$$.dirty&128&&(async()=>{d&&(o(0,r=d),await h(),o(2,a=!0))})(),s.$$.dirty&95&&(async()=>{m&&a&&t&&l.player&&l.player.id&&(console.log("loading user module"),o(3,i=await _(r,t.id,t,l.player)),console.log(i),o(4,m=!1))})()},[r,t,a,i,m,n,l,d]}class J extends I{constructor(u){super();S(this,u,D,null,U,{firebase:0,module:1,mounted:2,moduleId:5,userModule:3,loadUserModule:4})}}export{J as G};
