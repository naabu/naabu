import{S as pe,i as be,s as ge,a3 as Ie,e as h,j as q,k as R,t as re,c as w,a as k,m as U,n as W,g as se,d as g,b as j,f as te,o as X,H as m,I as _e,J as Se,_ as A,x as v,u as z,v as Z,l as G,r as he,w as we,M as L,A as Ve,Y as B,Z as H}from"../../../../chunks/vendor-ef0a5b69.js";import{s as Me,p as ke}from"../../../../chunks/stores-2d9a71bb.js";import{F as Te}from"../../../../chunks/form-5a1c739a.js";import{S as Ke}from"../../../../chunks/show-4db925d1.js";import{R as Fe}from"../../../../chunks/resultFeedback-cc00a4e5.js";import{g as Oe}from"../../../../chunks/helper-69e97bf9.js";import{f as Ne}from"../../../../chunks/store-6c10047c.js";/* empty css                                   */import"../../../../chunks/dialog-12cfde9a.js";function je(o){let t,e,a,n,f,d,b,r,s,c,l,y,M,T,E,K,F,i,p,Q,x,I,S,V,D,$,J,ee,ae;function Ee(u){o[8](u)}let ne={};o[2]!==void 0&&(ne.breadcrumbs=o[2]),e=new Ke({props:ne}),B.push(()=>H(e,"breadcrumbs",Ee));function ze(u){o[9](u)}let oe={};o[3]!==void 0&&(oe.alert=o[3]),f=new Fe({props:oe}),B.push(()=>H(f,"alert",ze));function De(u){o[10](u)}let ie={};return o[1]!==void 0&&(ie.map=o[1]),p=new Te({props:ie}),B.push(()=>H(p,"map",De)),{c(){t=h("div"),q(e.$$.fragment),n=R(),q(f.$$.fragment),b=R(),r=h("div"),s=h("div"),c=h("div"),l=h("div"),y=h("h3"),M=re("Kaart wijzigen"),T=R(),E=h("p"),K=re("Wijzig hier je kaart"),F=R(),i=h("form"),q(p.$$.fragment),x=R(),I=h("div"),S=h("div"),V=h("div"),D=h("button"),$=re("Kaart wijzigen"),this.h()},l(u){t=w(u,"DIV",{});var _=k(t);U(e.$$.fragment,_),n=W(_),U(f.$$.fragment,_),b=W(_),r=w(_,"DIV",{});var O=k(r);s=w(O,"DIV",{class:!0});var N=k(s);c=w(N,"DIV",{class:!0});var C=k(c);l=w(C,"DIV",{});var P=k(l);y=w(P,"H3",{class:!0});var fe=k(y);M=se(fe,"Kaart wijzigen"),fe.forEach(g),T=W(P),E=w(P,"P",{class:!0});var le=k(E);K=se(le,"Wijzig hier je kaart"),le.forEach(g),P.forEach(g),C.forEach(g),N.forEach(g),O.forEach(g),F=W(_),i=w(_,"FORM",{class:!0});var Y=k(i);U(p.$$.fragment,Y),x=W(Y),I=w(Y,"DIV",{class:!0});var ue=k(I);S=w(ue,"DIV",{class:!0});var ce=k(S);V=w(ce,"DIV",{class:!0});var de=k(V);D=w(de,"BUTTON",{type:!0,class:!0});var me=k(D);$=se(me,"Kaart wijzigen"),me.forEach(g),de.forEach(g),ce.forEach(g),ue.forEach(g),Y.forEach(g),_.forEach(g),this.h()},h(){j(y,"class","text-lg leading-6 font-medium text-gray-900"),j(E,"class","mt-1 max-w-2xl text-sm text-gray-500"),j(c,"class","flex-1 min-w-0"),j(s,"class","mt-2 md:flex md:items-center md:justify-between"),j(D,"type","submit"),j(D,"class","float-right ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),j(V,"class","flex justify-end"),j(S,"class","pt-5"),j(I,"class",""),j(i,"class","space-y-8 divide-y divide-gray-200")},m(u,_){te(u,t,_),X(e,t,null),m(t,n),X(f,t,null),m(t,b),m(t,r),m(r,s),m(s,c),m(c,l),m(l,y),m(y,M),m(l,T),m(l,E),m(E,K),m(t,F),m(t,i),X(p,i,null),m(i,x),m(i,I),m(I,S),m(S,V),m(V,D),m(D,$),J=!0,ee||(ae=_e(i,"submit",Se(o[4])),ee=!0)},p(u,_){const O={};!a&&_&4&&(a=!0,O.breadcrumbs=u[2],A(()=>a=!1)),e.$set(O);const N={};!d&&_&8&&(d=!0,N.alert=u[3],A(()=>d=!1)),f.$set(N);const C={};!Q&&_&2&&(Q=!0,C.map=u[1],A(()=>Q=!1)),p.$set(C)},i(u){J||(v(e.$$.fragment,u),v(f.$$.fragment,u),v(p.$$.fragment,u),J=!0)},o(u){z(e.$$.fragment,u),z(f.$$.fragment,u),z(p.$$.fragment,u),J=!1},d(u){u&&g(t),Z(e),Z(f),Z(p),ee=!1,ae()}}}function Ce(o){let t=!1,e=()=>{t=!1},a,n,f,d,b;Ie(o[7]);let r=o[1]&&je(o);return{c(){r&&r.c(),n=G()},l(s){r&&r.l(s),n=G()},m(s,c){r&&r.m(s,c),te(s,n,c),f=!0,d||(b=_e(window,"scroll",()=>{t=!0,clearTimeout(a),a=setTimeout(e,100),o[7]()}),d=!0)},p(s,[c]){c&1&&!t&&(t=!0,clearTimeout(a),scrollTo(window.pageXOffset,s[0]),a=setTimeout(e,100)),s[1]?r?(r.p(s,c),c&2&&v(r,1)):(r=je(s),r.c(),v(r,1),r.m(n.parentNode,n)):r&&(he(),z(r,1,1,()=>{r=null}),we())},i(s){f||(v(r),f=!0)},o(s){z(r),f=!1},d(s){r&&r.d(s),s&&g(n),d=!1,b()}}}function ve(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function Re(o,t,e){let a,n;L(o,Me,i=>e(12,a=i)),L(o,ke,i=>e(13,n=i));let f,{ref:d}=t,{firebase:b}=t,r,s,c=[{url:"/beheer",value:"Beheer"},{url:"/beheer/kaart",value:"Kaarten"},{url:"/beheer/kaart/"+n.params.id+"/wijzigen",value:"Kaart wijzigen"}],l=ve();Ve(async()=>{if(r=await d.get(),r.exists){e(1,s=r.data()),e(1,s.id=r.id,s);for(let i=0;i<s.locations.length;i++)s.locations[i].goals||e(1,s.locations[i].goals=[],s);for(let i=0;i<s.paths.length;i++){let p=s.paths[i];p.points=JSON.parse(p.points)}}});async function y(){let i=Oe(s);i.authorId=a.user.uid,e(3,l=ve());try{await d.update(i),e(3,l.success=!0,l),e(3,l.successTitle="Kaart gewijzigd",l),e(3,l.successMessage="id: "+d.id,l)}catch(p){console.error("Error adding documfent: ",p),e(3,l.error=!0,l),e(3,l.errorCode=p.code,l),e(3,l.errorMessage=p.message,l)}e(0,f=0)}async function M(i){await y()}function T(){e(0,f=window.pageYOffset)}function E(i){c=i,e(2,c)}function K(i){l=i,e(3,l)}function F(i){s=i,e(1,s)}return o.$$set=i=>{"ref"in i&&e(5,d=i.ref),"firebase"in i&&e(6,b=i.firebase)},[f,s,c,l,M,d,b,T,E,K,F]}class We extends pe{constructor(t){super();be(this,t,Re,Ce,ge,{ref:5,firebase:6})}}function ye(o){let t,e,a,n;function f(r){o[4](r)}function d(r){o[5](r)}let b={};return o[1]!==void 0&&(b.ref=o[1]),o[0]!==void 0&&(b.firebase=o[0]),t=new We({props:b}),B.push(()=>H(t,"ref",f)),B.push(()=>H(t,"firebase",d)),{c(){q(t.$$.fragment)},l(r){U(t.$$.fragment,r)},m(r,s){X(t,r,s),n=!0},p(r,s){const c={};!e&&s&2&&(e=!0,c.ref=r[1],A(()=>e=!1)),!a&&s&1&&(a=!0,c.firebase=r[0],A(()=>a=!1)),t.$set(c)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){z(t.$$.fragment,r),n=!1},d(r){Z(t,r)}}}function Ae(o){let t,e,a=o[0]&&o[1]&&ye(o);return{c(){a&&a.c(),t=G()},l(n){a&&a.l(n),t=G()},m(n,f){a&&a.m(n,f),te(n,t,f),e=!0},p(n,[f]){n[0]&&n[1]?a?(a.p(n,f),f&3&&v(a,1)):(a=ye(n),a.c(),v(a,1),a.m(t.parentNode,t)):a&&(he(),z(a,1,1,()=>{a=null}),we())},i(n){e||(v(a),e=!0)},o(n){z(a),e=!1},d(n){a&&a.d(n),n&&g(t)}}}function Be(o,t,e){let a,n;L(o,ke,s=>e(2,a=s)),L(o,Ne,s=>e(3,n=s));let f,d;function b(s){d=s,e(1,d),e(3,n),e(0,f),e(2,a)}function r(s){f=s,e(0,f),e(3,n),e(2,a)}return o.$$.update=()=>{o.$$.dirty&13&&(async()=>{if(n){e(0,f=n);const s=await f.firestore();e(1,d=s.collection("maps").doc(a.params.id))}})()},[f,d,a,n,b,r]}class Le extends pe{constructor(t){super();be(this,t,Be,Ae,ge,{})}}export{Le as default};
