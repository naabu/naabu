import{S as w,i as C,s as N,t as d,$ as I,k as R,l as c,g as _,a0 as S,n as j,f as u,e as H,c as A,a as D,d as a,b as g,H as q,O as y,M as b,N as E}from"../../../chunks/vendor-ef0a5b69.js";import{s as h}from"../../../chunks/stores-2d9a71bb.js";import{f as M}from"../../../chunks/store-6c10047c.js";function v(o){let s,e,r,t,l=o[0]&&k();return{c(){s=d(`Now setting up the curriculumProfile
  `),e=new I,r=R(),l&&l.c(),t=c(),this.h()},l(i){s=_(i,`Now setting up the curriculumProfile
  `),e=S(i),r=j(i),l&&l.l(i),t=c(),this.h()},h(){e.a=r},m(i,n){u(i,s,n),e.m(o[2],i,n),u(i,r,n),l&&l.m(i,n),u(i,t,n)},p(i,n){n&4&&e.p(i[2]),i[0]?l||(l=k(),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(i){i&&a(s),i&&e.d(),i&&a(r),l&&l.d(i),i&&a(t)}}}function k(o){let s,e;return{c(){s=H("div"),e=d("CurriciulumProfile ready for testing"),this.h()},l(r){s=A(r,"DIV",{"data-test":!0});var t=D(s);e=_(t,"CurriciulumProfile ready for testing"),t.forEach(a),this.h()},h(){g(s,"data-test","complete")},m(r,t){u(r,s,t),q(s,e)},d(r){r&&a(s)}}}function O(o){let s,e=(o[1].environment==="cypress"||o[1].environment==="test"||o[1].environment==="development")&&v(o);return{c(){e&&e.c(),s=c()},l(r){e&&e.l(r),s=c()},m(r,t){e&&e.m(r,t),u(r,s,t)},p(r,[t]){r[1].environment==="cypress"||r[1].environment==="test"||r[1].environment==="development"?e?e.p(r,t):(e=v(r),e.c(),e.m(s.parentNode,s)):e&&(e.d(1),e=null)},i:y,o:y,d(r){e&&e.d(r),r&&a(s)}}}function T(o,s,e){let r,t;b(o,M,f=>e(5,r=f)),b(o,h,f=>e(1,t=f));let l,i,n="<br> feedback: <br>",m=!1;async function P(){if(!t.player.curriculumProfileId){e(2,n+="creating a profile <br>");let f={fullname:"Cypress test user",uid:t.user.uid},p=await i.collection("curriculumProfile").add(f);E(h,t.player.curriculumProfileId=p.id,t),await i.collection("players").doc(t.user.uid).update({curriculumProfileId:p.id}),e(2,n+="profile created "+p.id+"<br>")}}return o.$$.update=()=>{o.$$.dirty&40&&(async()=>{r&&(e(3,l=r),e(4,i=await l.firestore()))})(),o.$$.dirty&19&&(async()=>{(t.environment==="cypress"||t.environment==="test"||t.environment==="development")&&i&&t.player&&t.user&&!t.user.isAnonymous&&!m&&(await P(),e(0,m=!0))})()},[m,t,n,l,i,r]}class J extends w{constructor(s){super();C(this,s,T,O,N,{})}}export{J as default};
