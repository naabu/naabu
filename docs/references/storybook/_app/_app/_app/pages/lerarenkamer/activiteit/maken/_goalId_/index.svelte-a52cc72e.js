import{S as de,i as me,s as ge,a3 as we,Y as C,Z as M,e as I,k as U,j as Y,t as X,X as Ie,c as j,d as p,n as B,a as D,m as H,g as W,b as _,H as h,f as O,o as J,I as pe,J as je,_ as V,x as q,u as F,v as Z,L as De,M as x,A as Ee,a6 as Se,r as Re,w as Ae}from"../../../../../chunks/vendor-ef0a5b69.js";import{s as Te,p as _e}from"../../../../../chunks/stores-2d9a71bb.js";import{F as ze}from"../../../../../chunks/form-dd2ab86f.js";import{R as Ce}from"../../../../../chunks/resultFeedback-cc00a4e5.js";import{c as Me,d as Ve}from"../../../../../chunks/helper-9858c370.js";import{g as ee}from"../../../../../chunks/navigation-51f4a605.js";import{c as qe}from"../../../../../chunks/helper-83b9a453.js";import{f as Ne}from"../../../../../chunks/store-6c10047c.js";import{S as Fe,g as Ge}from"../../../../../chunks/helper-23cf4c68.js";import{G as Oe}from"../../../../../chunks/getGoalData-a921e076.js";/* empty css                                      */import"../../../../../chunks/helper-821c0d77.js";import"../../../../../chunks/quizzesForm-6a31a65a.js";import"../../../../../chunks/dialog-12cfde9a.js";import"../../../../../chunks/singletons-12a22614.js";const{setTimeout:he}=Se;function Pe(i){let e=!1,s=()=>{e=!1},t,a,l,o,d,u,v,n,E,b,f,c,r,k,y,w,m,T,S,N,G,R,Q,P,$,te;we(i[8]);function ke(g){i[9](g)}let se={};i[3]!==void 0&&(se.alert=i[3]),d=new Ce({props:se}),C.push(()=>M(d,"alert",ke));function ye(g){i[10](g)}let ae={};return i[1]!==void 0&&(ae.activity=i[1]),w=new ze({props:ae}),C.push(()=>M(w,"activity",ye)),w.$on("toLearningGoals",i[4]),{c(){a=I("link"),l=U(),o=I("div"),Y(d.$$.fragment),v=U(),n=I("div"),E=I("div"),b=I("div"),f=I("div"),c=I("p"),r=X(`Maak hier elke soort activiteit, bijvoorbeeld een uitleg video of
            quiz.`),k=U(),y=I("form"),Y(w.$$.fragment),T=U(),S=I("div"),N=I("div"),G=I("div"),R=I("button"),Q=X("Concept opslaan en bekijken"),this.h()},l(g){const A=Ie('[data-svelte="svelte-wfrnnw"]',document.head);a=j(A,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),A.forEach(p),l=B(g),o=j(g,"DIV",{});var z=D(o);H(d.$$.fragment,z),v=B(z),n=j(z,"DIV",{});var L=D(n);E=j(L,"DIV",{class:!0});var ie=D(E);b=j(ie,"DIV",{class:!0});var re=D(b);f=j(re,"DIV",{});var ne=D(f);c=j(ne,"P",{class:!0});var oe=D(c);r=W(oe,`Maak hier elke soort activiteit, bijvoorbeeld een uitleg video of
            quiz.`),oe.forEach(p),ne.forEach(p),re.forEach(p),ie.forEach(p),L.forEach(p),k=B(z),y=j(z,"FORM",{class:!0});var K=D(y);H(w.$$.fragment,K),T=B(K),S=j(K,"DIV",{class:!0});var le=D(S);N=j(le,"DIV",{class:!0});var ue=D(N);G=j(ue,"DIV",{class:!0});var ce=D(G);R=j(ce,"BUTTON",{"data-cy":!0,type:!0,class:!0});var fe=D(R);Q=W(fe,"Concept opslaan en bekijken"),fe.forEach(p),ce.forEach(p),ue.forEach(p),le.forEach(p),K.forEach(p),z.forEach(p),this.h()},h(){_(a,"rel","stylesheet"),_(a,"href","https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"),_(a,"integrity","sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs"),_(a,"crossorigin","anonymous"),_(c,"class","max-w-2xl text-sm text-gray-500"),_(b,"class","flex-1 min-w-0"),_(E,"class","md:flex md:items-center md:justify-between"),R.disabled=i[2],_(R,"data-cy","submit-activity-create-button"),_(R,"type","submit"),_(R,"class","float-right disabled:opacity-50 ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),_(G,"class","flex justify-end"),_(N,"class","pt-5"),_(S,"class",""),_(y,"class","space-y-8 divide-y divide-gray-200")},m(g,A){h(document.head,a),O(g,l,A),O(g,o,A),J(d,o,null),h(o,v),h(o,n),h(n,E),h(E,b),h(b,f),h(f,c),h(c,r),h(o,k),h(o,y),J(w,y,null),h(y,T),h(y,S),h(S,N),h(N,G),h(G,R),h(R,Q),P=!0,$||(te=[pe(window,"scroll",()=>{e=!0,clearTimeout(t),t=he(s,100),i[8]()}),pe(y,"submit",je(i[5]))],$=!0)},p(g,[A]){A&1&&!e&&(e=!0,clearTimeout(t),scrollTo(window.pageXOffset,g[0]),t=he(s,100));const z={};!u&&A&8&&(u=!0,z.alert=g[3],V(()=>u=!1)),d.$set(z);const L={};!m&&A&2&&(m=!0,L.activity=g[1],V(()=>m=!1)),w.$set(L),(!P||A&4)&&(R.disabled=g[2])},i(g){P||(q(d.$$.fragment,g),q(w.$$.fragment,g),P=!0)},o(g){F(d.$$.fragment,g),F(w.$$.fragment,g),P=!1},d(g){p(a),g&&p(l),g&&p(o),Z(d),Z(w),$=!1,De(te)}}}function be(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function Le(i,e,s){let t;x(i,Te,m=>s(13,t=m));let{firebase:a}=e,{goal:l}=e,o;async function d(){let m=u();m&&await c(),m&&o?ee("/lerarenkamer/activiteit/maken-leerdoel-zoeken?activityId="+o):ee("/lerarenkamer/activiteit/maken-leerdoel-zoeken")}function u(){return n.title!==""||n.descriptionRaw!==""||n.description!==""||n.type!==""||n.difficulty!==1||n.svg!==""||n.video.vimeoId!==null||n.quizzes.length!==0}let v,n=Me(),E,b=!1,f=be();Ee(async()=>{E=await a.firestore()});async function c(){if(t.user){let m=Ve(n);m.authorId=t.user.uid,s(3,f=be());try{let T=E.collection("activities"),S=await T.add(m);s(1,n.id=S.id,n),m={latestRevisionId:(await qe(a,n,m,t.user.uid)).id,latestRevisionCreatedAt:a.firestore.Timestamp.now().seconds},await T.doc(n.id).update(m),ee("/lerarenkamer/activiteit/"+n.id+"/preview"),s(3,f.success=!0,f),s(3,f.successTitle="Activiteit gemaakt",f),s(3,f.successMessage="id: "+S.id,f),o=S.id}catch(T){s(3,f.error=!0,f),s(3,f.errorCode=T.code,f),s(3,f.errorMessage=T.message,f)}s(0,v=0)}}async function r(m){s(2,b=!0),await c(),setTimeout(()=>{s(2,b=!1)},5e3)}function k(){s(0,v=window.pageYOffset)}function y(m){f=m,s(3,f)}function w(m){n=m,s(1,n),s(7,l)}return i.$$set=m=>{"firebase"in m&&s(6,a=m.firebase),"goal"in m&&s(7,l=m.goal)},i.$$.update=()=>{i.$$.dirty&128&&l&&(s(1,n.goalId=l.id,n),s(1,n.goalTitle=l.title,n))},[v,n,b,f,d,r,a,l,k,y,w]}class Ue extends de{constructor(e){super();me(this,e,Le,Pe,ge,{firebase:6,goal:7})}}function Ye(i){let e,s;return{c(){e=I("span"),s=X("Activiteit maken"),this.h()},l(t){e=j(t,"SPAN",{slot:!0});var a=D(e);s=W(a,"Activiteit maken"),a.forEach(p),this.h()},h(){_(e,"slot","title")},m(t,a){O(t,e,a),h(e,s)},d(t){t&&p(e)}}}function Be(i){let e,s;return{c(){e=I("span"),s=X("Concept"),this.h()},l(t){e=j(t,"SPAN",{"data-cy":!0,slot:!0,class:!0});var a=D(e);s=W(a,"Concept"),a.forEach(p),this.h()},h(){_(e,"data-cy","concept-status"),_(e,"slot","status"),_(e,"class","inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800")},m(t,a){O(t,e,a),h(e,s)},d(t){t&&p(e)}}}function ve(i){let e,s,t,a;function l(u){i[8](u)}function o(u){i[9](u)}let d={};return i[1]!==void 0&&(d.firebase=i[1]),i[2]!==void 0&&(d.goal=i[2]),e=new Ue({props:d}),C.push(()=>M(e,"firebase",l)),C.push(()=>M(e,"goal",o)),{c(){Y(e.$$.fragment)},l(u){H(e.$$.fragment,u)},m(u,v){J(e,u,v),a=!0},p(u,v){const n={};!s&&v&2&&(s=!0,n.firebase=u[1],V(()=>s=!1)),!t&&v&4&&(t=!0,n.goal=u[2],V(()=>t=!1)),e.$set(n)},i(u){a||(q(e.$$.fragment,u),a=!0)},o(u){F(e.$$.fragment,u),a=!1},d(u){Z(e,u)}}}function He(i){let e,s,t=i[1]&&i[2]&&ve(i);return{c(){e=I("span"),t&&t.c(),this.h()},l(a){e=j(a,"SPAN",{slot:!0});var l=D(e);t&&t.l(l),l.forEach(p),this.h()},h(){_(e,"slot","content")},m(a,l){O(a,e,l),t&&t.m(e,null),s=!0},p(a,l){a[1]&&a[2]?t?(t.p(a,l),l&6&&q(t,1)):(t=ve(a),t.c(),q(t,1),t.m(e,null)):t&&(Re(),F(t,1,1,()=>{t=null}),Ae())},i(a){s||(q(t),s=!0)},o(a){F(t),s=!1},d(a){a&&p(e),t&&t.d()}}}function Je(i){let e,s,t,a,l,o,d,u;function v(r){i[5](r)}function n(r){i[6](r)}function E(r){i[7](r)}let b={};i[1]!==void 0&&(b.firebase=i[1]),i[2]!==void 0&&(b.goal=i[2]),i[3].params.goalId!==void 0&&(b.goalId=i[3].params.goalId),e=new Oe({props:b}),C.push(()=>M(e,"firebase",v)),C.push(()=>M(e,"goal",n)),C.push(()=>M(e,"goalId",E));function f(r){i[10](r)}let c={$$slots:{content:[He],status:[Be],title:[Ye]},$$scope:{ctx:i}};return i[0]!==void 0&&(c.menuitems=i[0]),o=new Fe({props:c}),C.push(()=>M(o,"menuitems",f)),{c(){Y(e.$$.fragment),l=U(),Y(o.$$.fragment)},l(r){H(e.$$.fragment,r),l=B(r),H(o.$$.fragment,r)},m(r,k){J(e,r,k),O(r,l,k),J(o,r,k),u=!0},p(r,[k]){const y={};!s&&k&2&&(s=!0,y.firebase=r[1],V(()=>s=!1)),!t&&k&4&&(t=!0,y.goal=r[2],V(()=>t=!1)),!a&&k&8&&(a=!0,y.goalId=r[3].params.goalId,V(()=>a=!1)),e.$set(y);const w={};k&2054&&(w.$$scope={dirty:k,ctx:r}),!d&&k&1&&(d=!0,w.menuitems=r[0],V(()=>d=!1)),o.$set(w)},i(r){u||(q(e.$$.fragment,r),q(o.$$.fragment,r),u=!0)},o(r){F(e.$$.fragment,r),F(o.$$.fragment,r),u=!1},d(r){Z(e,r),r&&p(l),Z(o,r)}}}function Ze(i,e,s){let t,a;x(i,Ne,c=>s(4,t=c)),x(i,_e,c=>s(3,a=c));let l=Ge(a.path,"draft"),o,d;function u(c){o=c,s(1,o),s(4,t)}function v(c){d=c,s(2,d)}function n(c){i.$$.not_equal(a.params.goalId,c)&&(a.params.goalId=c,_e.set(a))}function E(c){o=c,s(1,o),s(4,t)}function b(c){d=c,s(2,d)}function f(c){l=c,s(0,l)}return i.$$.update=()=>{i.$$.dirty&16&&(async()=>{t&&s(1,o=t)})()},[l,o,d,a,t,u,v,n,E,b,f]}class ut extends de{constructor(e){super();me(this,e,Ze,Je,ge,{})}}export{ut as default};
