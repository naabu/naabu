import{S as E,i as J,s as K,j as P,k as R,m as S,n as A,o as G,f as B,_ as h,x as m,u as _,v as C,w as H,d as q,l as M,M as O,Y as I,Z as j,r as V}from"../../../../../../chunks/vendor-ef0a5b69.js";import{C as L}from"../../../../../../chunks/createPost-7aba39e9.js";import{p as Y}from"../../../../../../chunks/stores-2d9a71bb.js";import{f as Q}from"../../../../../../chunks/store-6c10047c.js";import{T as U}from"../../../../../../chunks/talk-390c6dda.js";import{B as W}from"../../../../../../chunks/breadcrumbPageTitle-ab7a74b1.js";import{a as X}from"../../../../../../chunks/helper-d6a45b8d.js";import"../../../../../../chunks/checkPlayerHasProfile-5552aa6e.js";import"../../../../../../chunks/resultFeedback-cc00a4e5.js";import"../../../../../../chunks/helper-821c0d77.js";import"../../../../../../chunks/navigation-51f4a605.js";import"../../../../../../chunks/singletons-12a22614.js";import"../../../../../../chunks/tabs-86d92abc.js";/* empty css                                                                  */import"../../../../../../chunks/show-4db925d1.js";function Z(s){let t,r,a,i,o,n,p,l,d;function c(e){s[8](e)}let v={title:s[0].title};s[1]!==void 0&&(v.breadcrumbs=s[1]),t=new W({props:v}),I.push(()=>j(t,"breadcrumbs",c));let f=s[5].type==="goal"&&z(s);function w(e){s[10](e)}function T(e){s[11](e)}function y(e){s[12](e)}let g={goalId:s[2].params.goalId};return s[5]!==void 0&&(g.talk=s[5]),s[4]!==void 0&&(g.revision=s[4]),s[3]!==void 0&&(g.firebase=s[3]),o=new L({props:g}),I.push(()=>j(o,"talk",w)),I.push(()=>j(o,"revision",T)),I.push(()=>j(o,"firebase",y)),{c(){P(t.$$.fragment),a=R(),f&&f.c(),i=R(),P(o.$$.fragment)},l(e){S(t.$$.fragment,e),a=A(e),f&&f.l(e),i=A(e),S(o.$$.fragment,e)},m(e,u){G(t,e,u),B(e,a,u),f&&f.m(e,u),B(e,i,u),G(o,e,u),d=!0},p(e,u){const k={};u&1&&(k.title=e[0].title),!r&&u&2&&(r=!0,k.breadcrumbs=e[1],h(()=>r=!1)),t.$set(k),e[5].type==="goal"?f?(f.p(e,u),u&32&&m(f,1)):(f=z(e),f.c(),m(f,1),f.m(i.parentNode,i)):f&&(V(),_(f,1,1,()=>{f=null}),H());const b={};u&4&&(b.goalId=e[2].params.goalId),!n&&u&32&&(n=!0,b.talk=e[5],h(()=>n=!1)),!p&&u&16&&(p=!0,b.revision=e[4],h(()=>p=!1)),!l&&u&8&&(l=!0,b.firebase=e[3],h(()=>l=!1)),o.$set(b)},i(e){d||(m(t.$$.fragment,e),m(f),m(o.$$.fragment,e),d=!0)},o(e){_(t.$$.fragment,e),_(f),_(o.$$.fragment,e),d=!1},d(e){C(t,e),e&&q(a),f&&f.d(e),e&&q(i),C(o,e)}}}function z(s){let t,r,a;function i(n){s[9](n)}let o={talkType:s[5].type,talkId:s[5].id};return s[2].params.goalId!==void 0&&(o.objectId=s[2].params.goalId),t=new U({props:o}),I.push(()=>j(t,"objectId",i)),{c(){P(t.$$.fragment)},l(n){S(t.$$.fragment,n)},m(n,p){G(t,n,p),a=!0},p(n,p){const l={};p&32&&(l.talkType=n[5].type),p&32&&(l.talkId=n[5].id),!r&&p&4&&(r=!0,l.objectId=n[2].params.goalId,h(()=>r=!1)),t.$set(l)},i(n){a||(m(t.$$.fragment,n),a=!0)},o(n){_(t.$$.fragment,n),a=!1},d(n){C(t,n)}}}function $(s){let t,r,a=s[6]&&s[0]&&Z(s);return{c(){a&&a.c(),t=M()},l(i){a&&a.l(i),t=M()},m(i,o){a&&a.m(i,o),B(i,t,o),r=!0},p(i,[o]){i[6]&&i[0]?a?(a.p(i,o),o&65&&m(a,1)):(a=Z(i),a.c(),m(a,1),a.m(t.parentNode,t)):a&&(V(),_(a,1,1,()=>{a=null}),H())},i(i){r||(m(a),r=!0)},o(i){_(a),r=!1},d(i){a&&a.d(i),i&&q(t)}}}function x(s,t,r){let a,i;O(s,Y,e=>r(2,a=e)),O(s,Q,e=>r(7,i=e));let o,n,p,l,d=!1,c;async function v(){let e=await o.firestore(),k=await e.collection("goals").doc(a.params.goalId).get();if(k.exists&&(r(0,l=k.data()),r(0,l.id=a.params.goalId,l),l.talkId)){let F=e.collection("talk").doc(l.talkId),N=await F.get();N.exists&&(r(5,p=N.data()),r(5,p.id=F.id,p))}let b=e.collection("revisions").doc(a.params.revisionId),D=await b.get();D.exists&&(r(4,n=D.data()),r(4,n.revisionId=b.id,n))}function f(e){c=e,r(1,c),r(0,l),r(2,a)}function w(e){s.$$.not_equal(a.params.goalId,e)&&(a.params.goalId=e,Y.set(a))}function T(e){p=e,r(5,p)}function y(e){n=e,r(4,n)}function g(e){o=e,r(3,o),r(7,i)}return s.$$.update=()=>{s.$$.dirty&7&&l&&(r(1,c=X(l)),r(1,c=[...c,{url:"/revisie/"+a.params.revisionId+"/diff/"+a.params.oldRevId,value:"Verschil versies"},{url:a.path,value:"Overleg verschillen revisies"}])),s.$$.dirty&128&&(async()=>{i&&(r(3,o=i),await v(),r(6,d=!0))})()},[l,c,a,o,n,p,d,i,f,w,T,y,g]}class de extends E{constructor(t){super();J(this,t,x,$,K,{})}}export{de as default};
