import{S as wi,i as yi,s as Ri,l as W,f as E,u as N,w as J,x as S,d as B,M as ri,r as K,Y as y,Z as R,j as H,k as U,m as O,n as Y,o as z,_ as I,v as C,e as L,t as ii,c as M,a as V,g as ei,b as F,H as A,I as Ii}from"../../../../chunks/vendor-ef0a5b69.js";import{G as ji,A as Si,S as Ni}from"../../../../chunks/saveActivityRevision-3b3abdf5.js";import{p as Bi}from"../../../../chunks/stores-2d9a71bb.js";import{f as Ti}from"../../../../chunks/store-6c10047c.js";import{e as Fi}from"../../../../chunks/helper-83b9a453.js";import{B as Ai}from"../../../../chunks/breadcrumbPageTitle-ab7a74b1.js";import{a as Di}from"../../../../chunks/helper-d6a45b8d.js";import{G as Ei,H as Pi}from"../../../../chunks/getListData-bc5f8110.js";import{S as Gi,g as qi}from"../../../../chunks/helper-23cf4c68.js";import"../../../../chunks/helper-821c0d77.js";import"../../../../chunks/navigation-51f4a605.js";import"../../../../chunks/singletons-12a22614.js";import"../../../../chunks/revision-573df816.js";import"../../../../chunks/tabs-86d92abc.js";/* empty css                                                            */import"../../../../chunks/helper-9858c370.js";import"../../../../chunks/show-4db925d1.js";function ai(e){let s,i,n,o;const c=[Oi,Hi],g=[];function v(t,_){return!t[3].revisionType||t[3].revisionType==="goal"?0:1}return s=v(e),i=g[s]=c[s](e),{c(){i.c(),n=W()},l(t){i.l(t),n=W()},m(t,_){g[s].m(t,_),E(t,n,_),o=!0},p(t,_){let d=s;s=v(t),s===d?g[s].p(t,_):(K(),N(g[d],1,1,()=>{g[d]=null}),J(),i=g[s],i?i.p(t,_):(i=g[s]=c[s](t),i.c()),S(i,1),i.m(n.parentNode,n))},i(t){o||(S(i),o=!0)},o(t){N(i),o=!1},d(t){g[s].d(t),t&&B(n)}}}function Hi(e){let s,i,n,o,c,g,v,t;function _(l){e[20](l)}function d(l){e[21](l)}function m(l){e[22](l)}let p={revisionType:"activity"};e[6]!==void 0&&(p.firebase=e[6]),e[2]!==void 0&&(p.revisions=e[2]),e[3].revisionSourceId!==void 0&&(p.sourceId=e[3].revisionSourceId),s=new Ei({props:p}),y.push(()=>R(s,"firebase",_)),y.push(()=>R(s,"revisions",d)),y.push(()=>R(s,"sourceId",m));function a(l){e[35](l)}let h={$$slots:{content:[Li],"cta-button":[Ci],title:[zi]},$$scope:{ctx:e}};return e[5]!==void 0&&(h.menuitems=e[5]),g=new Gi({props:h}),y.push(()=>R(g,"menuitems",a)),{c(){H(s.$$.fragment),c=U(),H(g.$$.fragment)},l(l){O(s.$$.fragment,l),c=Y(l),O(g.$$.fragment,l)},m(l,b){z(s,l,b),E(l,c,b),z(g,l,b),t=!0},p(l,b){const r={};!i&&b[0]&64&&(i=!0,r.firebase=l[6],I(()=>i=!1)),!n&&b[0]&4&&(n=!0,r.revisions=l[2],I(()=>n=!1)),!o&&b[0]&8&&(o=!0,r.sourceId=l[3].revisionSourceId,I(()=>o=!1)),s.$set(r);const j={};b[0]&4044|b[1]&128&&(j.$$scope={dirty:b,ctx:l}),!v&&b[0]&32&&(v=!0,j.menuitems=l[5],I(()=>v=!1)),g.$set(j)},i(l){t||(S(s.$$.fragment,l),S(g.$$.fragment,l),t=!0)},o(l){N(s.$$.fragment,l),N(g.$$.fragment,l),t=!1},d(l){C(s,l),l&&B(c),C(g,l)}}}function Oi(e){let s,i,n=e[0]&&li(e);return{c(){n&&n.c(),s=W()},l(o){n&&n.l(o),s=W()},m(o,c){n&&n.m(o,c),E(o,s,c),i=!0},p(o,c){o[0]?n?(n.p(o,c),c[0]&1&&S(n,1)):(n=li(o),n.c(),S(n,1),n.m(s.parentNode,s)):n&&(K(),N(n,1,1,()=>{n=null}),J())},i(o){i||(S(n),i=!0)},o(o){N(n),i=!1},d(o){n&&n.d(o),o&&B(s)}}}function zi(e){let s,i;return{c(){s=L("span"),i=ii("Wijzigingen activiteit"),this.h()},l(n){s=M(n,"SPAN",{slot:!0});var o=V(s);i=ei(o,"Wijzigingen activiteit"),o.forEach(B),this.h()},h(){F(s,"slot","title")},m(n,o){E(n,s,o),A(s,i)},d(n){n&&B(s)}}}function Ci(e){let s,i,n,o,c,g,v,t,_,d,m;return{c(){s=L("span"),i=L("div"),n=L("p"),o=L("a"),c=ii("Terug naar activiteit"),v=U(),t=L("button"),_=ii("Bekijk hele geschiedenis"),this.h()},l(p){s=M(p,"SPAN",{slot:!0});var a=V(s);i=M(a,"DIV",{class:!0});var h=V(i);n=M(h,"P",{class:!0});var l=V(n);o=M(l,"A",{href:!0,class:!0});var b=V(o);c=ei(b,"Terug naar activiteit"),b.forEach(B),l.forEach(B),v=Y(h),t=M(h,"BUTTON",{"data-cy":!0,class:!0});var r=V(t);_=ei(r,"Bekijk hele geschiedenis"),r.forEach(B),h.forEach(B),a.forEach(B),this.h()},h(){F(o,"href",g="/lerarenkamer/activiteit/"+e[3].revisionSourceId),F(o,"class","hover:underline"),F(n,"class","pt-2 text-sm text-gray-500"),F(t,"data-cy","show-all-activity-revisions-button"),F(t,"class","z-10 ml-auto mr-4 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),F(i,"class","ml-4 mr-auto w-full flex"),F(s,"slot","cta-button")},m(p,a){E(p,s,a),A(s,i),A(i,n),A(n,o),A(o,c),A(i,v),A(i,t),A(t,_),d||(m=Ii(t,"click",e[34]),d=!0)},p(p,a){a[0]&8&&g!==(g="/lerarenkamer/activiteit/"+p[3].revisionSourceId)&&F(o,"href",g)},d(p){p&&B(s),d=!1,m()}}}function fi(e){let s,i,n,o,c;function g(d){e[31](d)}function v(d){e[32](d)}function t(d){e[33](d)}let _={};return e[6]!==void 0&&(_.firebase=e[6]),e[8]!==void 0&&(_.latestRevisionId=e[8]),e[3]!==void 0&&(_.revision=e[3]),s=new Ni({props:_}),y.push(()=>R(s,"firebase",g)),y.push(()=>R(s,"latestRevisionId",v)),y.push(()=>R(s,"revision",t)),{c(){H(s.$$.fragment)},l(d){O(s.$$.fragment,d)},m(d,m){z(s,d,m),c=!0},p(d,m){const p={};!i&&m[0]&64&&(i=!0,p.firebase=d[6],I(()=>i=!1)),!n&&m[0]&256&&(n=!0,p.latestRevisionId=d[8],I(()=>n=!1)),!o&&m[0]&8&&(o=!0,p.revision=d[3],I(()=>o=!1)),s.$set(p)},i(d){c||(S(s.$$.fragment,d),c=!0)},o(d){N(s.$$.fragment,d),c=!1},d(d){C(s,d)}}}function Li(e){let s,i,n,o,c,g,v,t,_,d,m,p,a,h;function l(u){e[23](u)}function b(u){e[24](u)}function r(u){e[25](u)}function j(u){e[26](u)}let T={revisionOld:{}};e[3]!==void 0&&(T.revisionNew=e[3]),e[10]!==void 0&&(T.goForwardRevision=e[10]),e[9]!==void 0&&(T.goBackRevision=e[9]),e[11]!==void 0&&(T.loading=e[11]),i=new Si({props:T}),y.push(()=>R(i,"revisionNew",l)),y.push(()=>R(i,"goForwardRevision",b)),y.push(()=>R(i,"goBackRevision",r)),y.push(()=>R(i,"loading",j));function D(u){e[27](u)}function Q(u){e[28](u)}function X(u){e[29](u)}function $(u){e[30](u)}let P={};e[6]!==void 0&&(P.firebase=e[6]),e[2]!==void 0&&(P.revisions=e[2]),e[7]!==void 0&&(P.toggle=e[7]),e[3].revisionId!==void 0&&(P.activeRevisionId=e[3].revisionId),t=new Pi({props:P}),y.push(()=>R(t,"firebase",D)),y.push(()=>R(t,"revisions",Q)),y.push(()=>R(t,"toggle",X)),y.push(()=>R(t,"activeRevisionId",$));let k=e[8]&&e[3].revisionId!==e[8]&&fi(e);return{c(){s=L("span"),H(i.$$.fragment),v=U(),H(t.$$.fragment),a=U(),k&&k.c(),this.h()},l(u){s=M(u,"SPAN",{slot:!0});var w=V(s);O(i.$$.fragment,w),v=Y(w),O(t.$$.fragment,w),a=Y(w),k&&k.l(w),w.forEach(B),this.h()},h(){F(s,"slot","content")},m(u,w){E(u,s,w),z(i,s,null),A(s,v),z(t,s,null),A(s,a),k&&k.m(s,null),h=!0},p(u,w){const G={};!n&&w[0]&8&&(n=!0,G.revisionNew=u[3],I(()=>n=!1)),!o&&w[0]&1024&&(o=!0,G.goForwardRevision=u[10],I(()=>o=!1)),!c&&w[0]&512&&(c=!0,G.goBackRevision=u[9],I(()=>c=!1)),!g&&w[0]&2048&&(g=!0,G.loading=u[11],I(()=>g=!1)),i.$set(G);const q={};!_&&w[0]&64&&(_=!0,q.firebase=u[6],I(()=>_=!1)),!d&&w[0]&4&&(d=!0,q.revisions=u[2],I(()=>d=!1)),!m&&w[0]&128&&(m=!0,q.toggle=u[7],I(()=>m=!1)),!p&&w[0]&8&&(p=!0,q.activeRevisionId=u[3].revisionId,I(()=>p=!1)),t.$set(q),u[8]&&u[3].revisionId!==u[8]?k?(k.p(u,w),w[0]&264&&S(k,1)):(k=fi(u),k.c(),S(k,1),k.m(s,null)):k&&(K(),N(k,1,1,()=>{k=null}),J())},i(u){h||(S(i.$$.fragment,u),S(t.$$.fragment,u),S(k),h=!0)},o(u){N(i.$$.fragment,u),N(t.$$.fragment,u),N(k),h=!1},d(u){u&&B(s),C(i),C(t),k&&k.d()}}}function li(e){let s,i,n,o,c,g,v,t,_;function d(r){e[15](r)}let m={title:e[0].title};e[1]!==void 0&&(m.breadcrumbs=e[1]),s=new Ai({props:m}),y.push(()=>R(s,"breadcrumbs",d));function p(r){e[16](r)}function a(r){e[17](r)}function h(r){e[18](r)}function l(r){e[19](r)}let b={revisionOld:{}};return e[3]!==void 0&&(b.revisionNew=e[3]),e[10]!==void 0&&(b.goForwardRevision=e[10]),e[9]!==void 0&&(b.goBackRevision=e[9]),e[11]!==void 0&&(b.loading=e[11]),o=new ji({props:b}),y.push(()=>R(o,"revisionNew",p)),y.push(()=>R(o,"goForwardRevision",a)),y.push(()=>R(o,"goBackRevision",h)),y.push(()=>R(o,"loading",l)),{c(){H(s.$$.fragment),n=U(),H(o.$$.fragment)},l(r){O(s.$$.fragment,r),n=Y(r),O(o.$$.fragment,r)},m(r,j){z(s,r,j),E(r,n,j),z(o,r,j),_=!0},p(r,j){const T={};j[0]&1&&(T.title=r[0].title),!i&&j[0]&2&&(i=!0,T.breadcrumbs=r[1],I(()=>i=!1)),s.$set(T);const D={};!c&&j[0]&8&&(c=!0,D.revisionNew=r[3],I(()=>c=!1)),!g&&j[0]&1024&&(g=!0,D.goForwardRevision=r[10],I(()=>g=!1)),!v&&j[0]&512&&(v=!0,D.goBackRevision=r[9],I(()=>v=!1)),!t&&j[0]&2048&&(t=!0,D.loading=r[11],I(()=>t=!1)),o.$set(D)},i(r){_||(S(s.$$.fragment,r),S(o.$$.fragment,r),_=!0)},o(r){N(s.$$.fragment,r),N(o.$$.fragment,r),_=!1},d(r){C(s,r),r&&B(n),C(o,r)}}}function Mi(e){let s,i,n=e[4]&&e[3]&&ai(e);return{c(){n&&n.c(),s=W()},l(o){n&&n.l(o),s=W()},m(o,c){n&&n.m(o,c),E(o,s,c),i=!0},p(o,c){o[4]&&o[3]?n?(n.p(o,c),c[0]&24&&S(n,1)):(n=ai(o),n.c(),S(n,1),n.m(s.parentNode,s)):n&&(K(),N(n,1,1,()=>{n=null}),J())},i(o){i||(S(n),i=!0)},o(o){N(n),i=!1},d(o){n&&n.d(o),o&&B(s)}}}function Vi(e,s,i){let n,o;ri(e,Bi,f=>i(13,n=f)),ri(e,Ti,f=>i(14,o=f));let c,g,v,t,_,d=!1,m,p,a,h,l,b=!1,r=!1;const j=async()=>{i(11,r=!0),i(9,h=null),i(10,l=null),await T(),i(11,r=!1)};async function T(){let f=await v.firestore(),si=f.collection("revisions").doc(n.params.id),ni=await si.get();if(ni.exists&&(i(3,a=ni.data()),i(3,a.revisionId=si.id,a),!a.revisionType||a.revisionType==="goal")){const Z=await f.collection("revisions").doc(a.id).collection("battles").get();i(3,a.battles=[],a),Z.forEach(oi=>{let ti=oi.data();ti.name=oi.id,i(3,a.battles=[...a.battles,ti],a)})}if(a&&(!a.revisionType||a.revisionType==="goal")){let x=await f.collection("goals").doc(a.goalId).get();if(x.exists){i(0,g=x.data()),i(0,g.id=a.goalId,g);let Z=Fi(g.revisionList,a.id);i(10,l=Z.nextRevision),i(9,h=Z.previousPreviousRevision)}}a&&a.revisionType==="activity"}function D(f){t=f,i(1,t),i(0,g),i(13,n)}function Q(f){a=f,i(3,a)}function X(f){l=f,i(10,l)}function $(f){h=f,i(9,h)}function P(f){r=f,i(11,r)}function k(f){v=f,i(6,v),i(14,o)}function u(f){_=f,i(2,_)}function w(f){e.$$.not_equal(a.revisionSourceId,f)&&(a.revisionSourceId=f,i(3,a))}function G(f){a=f,i(3,a)}function q(f){l=f,i(10,l)}function ui(f){h=f,i(9,h)}function gi(f){r=f,i(11,r)}function ci(f){v=f,i(6,v),i(14,o)}function di(f){_=f,i(2,_)}function _i(f){d=f,i(7,d)}function vi(f){e.$$.not_equal(a.revisionId,f)&&(a.revisionId=f,i(3,a))}function pi(f){v=f,i(6,v),i(14,o)}function bi(f){m=f,i(8,m),i(2,_)}function mi(f){a=f,i(3,a)}const hi=()=>i(7,d=!d);function ki(f){c=f,i(5,c),i(3,a),i(13,n),i(12,p),i(2,_)}return e.$$.update=()=>{e.$$.dirty[0]&4&&_&&_.length>0&&(i(8,m=_[0].revisionId),i(12,p=_[0].status)),e.$$.dirty[0]&8195&&g&&(i(1,t=Di(g)),i(1,t=[...t,{url:n.path,value:"Verschil versies"}])),e.$$.dirty[0]&16384&&(async()=>{o&&(i(6,v=o),await T(),i(4,b=!0))})(),e.$$.dirty[0]&8208&&n.params.id&&n.params.oldId&&b&&j(),e.$$.dirty[0]&12296&&a&&a.revisionType==="activity"&&i(5,c=qi(n.path,p))},[g,t,_,a,b,c,v,d,m,h,l,r,p,n,o,D,Q,X,$,P,k,u,w,G,q,ui,gi,ci,di,_i,vi,pi,bi,mi,hi,ki]}class ae extends wi{constructor(s){super();yi(this,s,Vi,Mi,Ri,{},null,[-1,-1])}}export{ae as default};
