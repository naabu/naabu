import{S as le,i as oe,s as ie,Y as $,Z as ee,e as y,t as K,k as A,j as q,c as w,a as E,g as G,d as _,n as R,m as J,b as u,f as O,F as f,a7 as x,o as U,G as X,H as ne,x as V,u as F,v as Y,J as ue,l as te,_ as se,r as fe,w as ce,K as me,A as de}from"./vendor-05d04a9e.js";import{s as pe}from"./stores-e07732fe.js";import{C as _e}from"./checkPlayerHasProfile-2454222b.js";import{R as be}from"./resultFeedback-d6392221.js";import{g as he}from"./helper-a37f5850.js";import{g as ge}from"./navigation-51f4a605.js";import{B as ke}from"./Button-e99ba711.js";function re(i){let a,s,c,o,h,g,l,k,n,m,I,C,t,e,d,b,P,B,H,r,j,M,v;return r=new ke({props:{dataTest:"post-button",isDisabled:i[4]||!i[1],isSubmit:!0,color:"primary",content:"Post"}}),{c(){a=y("div"),s=y("form"),c=y("div"),o=y("label"),h=K("Titel"),g=A(),l=y("input"),k=A(),n=y("div"),m=y("label"),I=K("Post"),C=A(),t=y("div"),e=y("textarea"),d=A(),b=y("div"),P=y("span"),B=K("Hou het vriendelijk en proffesioneel"),H=A(),q(r.$$.fragment),this.h()},l(p){a=w(p,"DIV",{class:!0});var D=E(a);s=w(D,"FORM",{});var T=E(s);c=w(T,"DIV",{class:!0});var L=E(c);o=w(L,"LABEL",{for:!0,class:!0});var Z=E(o);h=G(Z,"Titel"),Z.forEach(_),g=R(L),l=w(L,"INPUT",{type:!0,"data-test":!0,name:!0,id:!0,class:!0}),L.forEach(_),k=R(T),n=w(T,"DIV",{});var S=E(n);m=w(S,"LABEL",{for:!0,class:!0});var z=E(m);I=G(z,"Post"),z.forEach(_),C=R(S),t=w(S,"DIV",{class:!0});var Q=E(t);e=w(Q,"TEXTAREA",{id:!0,name:!0,rows:!0,class:!0}),E(e).forEach(_),Q.forEach(_),d=R(S),b=w(S,"DIV",{class:!0});var N=E(b);P=w(N,"SPAN",{class:!0});var W=E(P);B=G(W,"Hou het vriendelijk en proffesioneel"),W.forEach(_),H=R(N),J(r.$$.fragment,N),N.forEach(_),S.forEach(_),T.forEach(_),D.forEach(_),this.h()},h(){u(o,"for","title"),u(o,"class","block text-sm font-medium text-gray-700"),u(l,"type","text"),u(l,"data-test","post-title"),u(l,"name","title"),u(l,"id","title"),u(l,"class","mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"),u(c,"class","col-span-6 sm:col-span-4"),u(m,"for","post"),u(m,"class","block text-sm font-medium text-gray-700"),u(e,"id","post"),u(e,"name","post"),u(e,"rows","3"),u(e,"class","shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"),u(t,"class","mt-1"),u(P,"class","text-sm text-gray-500"),u(b,"class","mt-4 flex justify-between"),u(a,"class","ml-auto mr-auto max-w-xl mt-8")},m(p,D){O(p,a,D),f(a,s),f(s,c),f(c,o),f(o,h),f(c,g),f(c,l),x(l,i[2]),f(s,k),f(s,n),f(n,m),f(m,I),f(n,C),f(n,t),f(t,e),x(e,i[3]),f(n,d),f(n,b),f(b,P),f(P,B),f(b,H),U(r,b,null),j=!0,M||(v=[X(l,"input",i[12]),X(e,"input",i[13]),X(s,"submit",ne(i[6]))],M=!0)},p(p,D){D&4&&l.value!==p[2]&&x(l,p[2]),D&8&&x(e,p[3]);const T={};D&18&&(T.isDisabled=p[4]||!p[1]),r.$set(T)},i(p){j||(V(r.$$.fragment,p),j=!0)},o(p){F(r.$$.fragment,p),j=!1},d(p){p&&_(a),Y(r),M=!1,ue(v)}}}function ve(i){let a,s,c,o,h,g,l,k;function n(e){i[10](e)}let m={};i[5]!==void 0&&(m.alert=i[5]),a=new be({props:m}),$.push(()=>ee(a,"alert",n));function I(e){i[11](e)}let C={};i[1]!==void 0&&(C.hasCurriculumProfile=i[1]),o=new _e({props:C}),$.push(()=>ee(o,"hasCurriculumProfile",I));let t=i[0]&&re(i);return{c(){q(a.$$.fragment),c=A(),q(o.$$.fragment),g=A(),t&&t.c(),l=te()},l(e){J(a.$$.fragment,e),c=R(e),J(o.$$.fragment,e),g=R(e),t&&t.l(e),l=te()},m(e,d){U(a,e,d),O(e,c,d),U(o,e,d),O(e,g,d),t&&t.m(e,d),O(e,l,d),k=!0},p(e,[d]){const b={};!s&&d&32&&(s=!0,b.alert=e[5],se(()=>s=!1)),a.$set(b);const P={};!h&&d&2&&(h=!0,P.hasCurriculumProfile=e[1],se(()=>h=!1)),o.$set(P),e[0]?t?(t.p(e,d),d&1&&V(t,1)):(t=re(e),t.c(),V(t,1),t.m(l.parentNode,l)):t&&(fe(),F(t,1,1,()=>{t=null}),ce())},i(e){k||(V(a.$$.fragment,e),V(o.$$.fragment,e),V(t),k=!0)},o(e){F(a.$$.fragment,e),F(o.$$.fragment,e),F(t),k=!1},d(e){Y(a,e),e&&_(c),Y(o,e),e&&_(g),t&&t.d(e),e&&_(l)}}}function ae(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function Pe(i,a,s){let c;me(i,pe,r=>s(15,c=r));let{firebase:o}=a,{talk:h}=a,{goalId:g}=a,{revision:l}=a,k,n="",m="",I=!1,C;l&&(n="Overleg revisie "+he(l.createdAt),m=""),de(async()=>{C=await o.firestore()});let t=ae();async function e(){if(c.user){let r=C.collection("curriculumProfile").doc(c.player.curriculumProfileId),j={title:n,text:m,numberOfReplies:0},M=await r.get();if(M.exists){let v=M.data();j.curriculumProfile={fullname:v.fullname,institution:v.institution},j.authorId=r.id}s(5,t=ae());try{let v=await C.collection("talk").doc(h.id).collection("posts").add(j);s(5,t.success=!0,t),s(5,t.successTitle="Post gemaakt",t),s(5,t.successMessage="id: "+v.id,t),await ge("/overleg/"+g+"/"+h.id+"/"+v.id)}catch(v){console.error("Kan post niet maken: ",v),s(5,t.error=!0,t),s(5,t.errorCode=v.code,t),s(5,t.errorMessage=v.message,t)}}}async function d(r){s(4,I=!0),await e(),s(2,n=""),s(3,m=""),setTimeout(()=>{s(4,I=!1)},5e3)}function b(r){t=r,s(5,t)}function P(r){k=r,s(1,k)}function B(){n=this.value,s(2,n)}function H(){m=this.value,s(3,m)}return i.$$set=r=>{"firebase"in r&&s(7,o=r.firebase),"talk"in r&&s(0,h=r.talk),"goalId"in r&&s(8,g=r.goalId),"revision"in r&&s(9,l=r.revision)},[h,k,n,m,I,t,d,o,g,l,b,P,B,H]}class Te extends le{constructor(a){super();oe(this,a,Pe,ve,ie,{firebase:7,talk:0,goalId:8,revision:9})}}export{Te as C};
