import{S as ue,i as ce,s as me,a3 as De,e as h,j as N,k as R,t as de,c as w,a as k,m as W,n as A,g as pe,d as g,b as D,f as ee,o as H,F as d,G as _e,H as Se,_ as P,x as j,u as v,v as Y,l as L,r as be,w as ge,K as Q,A as ze,Y as q,Z as G}from"../../../../chunks/vendor-05d04a9e.js";import{s as Ie,p as he}from"../../../../chunks/stores-e07732fe.js";import{F as Ve}from"../../../../chunks/form-8101f5ac.js";import{S as Ke}from"../../../../chunks/show-2c607e3f.js";import{R as Me}from"../../../../chunks/resultFeedback-d6392221.js";import{g as Fe}from"../../../../chunks/helper-69e97bf9.js";import{B as Te}from"../../../../chunks/Button-e99ba711.js";import{f as Be}from"../../../../chunks/store-fa4e989c.js";/* empty css                                   */import"../../../../chunks/dialog-24821939.js";/* empty css                                                              */function we(o){let t,e,a,n,f,m,_,r,s,c,u,y,K,M,E,F,T,i,p,U,x,z,I,V,S,J,$,re;function ve(l){o[8](l)}let se={};o[2]!==void 0&&(se.breadcrumbs=o[2]),e=new Ke({props:se}),q.push(()=>G(e,"breadcrumbs",ve));function ye(l){o[9](l)}let te={};o[3]!==void 0&&(te.alert=o[3]),f=new Me({props:te}),q.push(()=>G(f,"alert",ye));function Ee(l){o[10](l)}let ae={};return o[1]!==void 0&&(ae.map=o[1]),p=new Ve({props:ae}),q.push(()=>G(p,"map",Ee)),S=new Te({props:{isSubmit:!0,color:"primary",content:"Kaart wijzigen"}}),{c(){t=h("div"),N(e.$$.fragment),n=R(),N(f.$$.fragment),_=R(),r=h("div"),s=h("div"),c=h("div"),u=h("div"),y=h("h3"),K=de("Kaart wijzigen"),M=R(),E=h("p"),F=de("Wijzig hier je kaart"),T=R(),i=h("form"),N(p.$$.fragment),x=R(),z=h("div"),I=h("div"),V=h("div"),N(S.$$.fragment),this.h()},l(l){t=w(l,"DIV",{});var b=k(t);W(e.$$.fragment,b),n=A(b),W(f.$$.fragment,b),_=A(b),r=w(b,"DIV",{});var B=k(r);s=w(B,"DIV",{class:!0});var O=k(s);c=w(O,"DIV",{class:!0});var C=k(c);u=w(C,"DIV",{});var X=k(u);y=w(X,"H3",{class:!0});var ne=k(y);K=pe(ne,"Kaart wijzigen"),ne.forEach(g),M=A(X),E=w(X,"P",{class:!0});var oe=k(E);F=pe(oe,"Wijzig hier je kaart"),oe.forEach(g),X.forEach(g),C.forEach(g),O.forEach(g),B.forEach(g),T=A(b),i=w(b,"FORM",{class:!0});var Z=k(i);W(p.$$.fragment,Z),x=A(Z),z=w(Z,"DIV",{class:!0});var ie=k(z);I=w(ie,"DIV",{class:!0});var fe=k(I);V=w(fe,"DIV",{class:!0});var le=k(V);W(S.$$.fragment,le),le.forEach(g),fe.forEach(g),ie.forEach(g),Z.forEach(g),b.forEach(g),this.h()},h(){D(y,"class","text-lg leading-6 font-medium text-gray-900"),D(E,"class","mt-1 max-w-2xl text-sm text-gray-500"),D(c,"class","flex-1 min-w-0"),D(s,"class","mt-2 md:flex md:items-center md:justify-between"),D(V,"class","flex justify-end"),D(I,"class","pt-5"),D(z,"class",""),D(i,"class","space-y-8 divide-y divide-gray-200")},m(l,b){ee(l,t,b),H(e,t,null),d(t,n),H(f,t,null),d(t,_),d(t,r),d(r,s),d(s,c),d(c,u),d(u,y),d(y,K),d(u,M),d(u,E),d(E,F),d(t,T),d(t,i),H(p,i,null),d(i,x),d(i,z),d(z,I),d(I,V),H(S,V,null),J=!0,$||(re=_e(i,"submit",Se(o[4])),$=!0)},p(l,b){const B={};!a&&b&4&&(a=!0,B.breadcrumbs=l[2],P(()=>a=!1)),e.$set(B);const O={};!m&&b&8&&(m=!0,O.alert=l[3],P(()=>m=!1)),f.$set(O);const C={};!U&&b&2&&(U=!0,C.map=l[1],P(()=>U=!1)),p.$set(C)},i(l){J||(j(e.$$.fragment,l),j(f.$$.fragment,l),j(p.$$.fragment,l),j(S.$$.fragment,l),J=!0)},o(l){v(e.$$.fragment,l),v(f.$$.fragment,l),v(p.$$.fragment,l),v(S.$$.fragment,l),J=!1},d(l){l&&g(t),Y(e),Y(f),Y(p),Y(S),$=!1,re()}}}function Oe(o){let t=!1,e=()=>{t=!1},a,n,f,m,_;De(o[7]);let r=o[1]&&we(o);return{c(){r&&r.c(),n=L()},l(s){r&&r.l(s),n=L()},m(s,c){r&&r.m(s,c),ee(s,n,c),f=!0,m||(_=_e(window,"scroll",()=>{t=!0,clearTimeout(a),a=setTimeout(e,100),o[7]()}),m=!0)},p(s,[c]){c&1&&!t&&(t=!0,clearTimeout(a),scrollTo(window.pageXOffset,s[0]),a=setTimeout(e,100)),s[1]?r?(r.p(s,c),c&2&&j(r,1)):(r=we(s),r.c(),j(r,1),r.m(n.parentNode,n)):r&&(be(),v(r,1,1,()=>{r=null}),ge())},i(s){f||(j(r),f=!0)},o(s){v(r),f=!1},d(s){r&&r.d(s),s&&g(n),m=!1,_()}}}function ke(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function Ce(o,t,e){let a,n;Q(o,Ie,i=>e(12,a=i)),Q(o,he,i=>e(13,n=i));let f,{ref:m}=t,{firebase:_}=t,r,s,c=[{url:"/beheer",value:"Beheer"},{url:"/beheer/kaart",value:"Kaarten"},{url:"/beheer/kaart/"+n.params.id+"/wijzigen",value:"Kaart wijzigen"}],u=ke();ze(async()=>{if(r=await m.get(),r.exists){e(1,s=r.data()),e(1,s.id=r.id,s);for(let i=0;i<s.locations.length;i++)s.locations[i].goals||e(1,s.locations[i].goals=[],s);for(let i=0;i<s.paths.length;i++){let p=s.paths[i];p.points=JSON.parse(p.points)}}});async function y(){let i=Fe(s);i.authorId=a.user.uid,e(3,u=ke());try{await m.update(i),e(3,u.success=!0,u),e(3,u.successTitle="Kaart gewijzigd",u),e(3,u.successMessage="id: "+m.id,u)}catch(p){console.error("Error adding documfent: ",p),e(3,u.error=!0,u),e(3,u.errorCode=p.code,u),e(3,u.errorMessage=p.message,u)}e(0,f=0)}async function K(i){await y()}function M(){e(0,f=window.pageYOffset)}function E(i){c=i,e(2,c)}function F(i){u=i,e(3,u)}function T(i){s=i,e(1,s)}return o.$$set=i=>{"ref"in i&&e(5,m=i.ref),"firebase"in i&&e(6,_=i.firebase)},[f,s,c,u,K,m,_,M,E,F,T]}class Ne extends ue{constructor(t){super();ce(this,t,Ce,Oe,me,{ref:5,firebase:6})}}function je(o){let t,e,a,n;function f(r){o[4](r)}function m(r){o[5](r)}let _={};return o[1]!==void 0&&(_.ref=o[1]),o[0]!==void 0&&(_.firebase=o[0]),t=new Ne({props:_}),q.push(()=>G(t,"ref",f)),q.push(()=>G(t,"firebase",m)),{c(){N(t.$$.fragment)},l(r){W(t.$$.fragment,r)},m(r,s){H(t,r,s),n=!0},p(r,s){const c={};!e&&s&2&&(e=!0,c.ref=r[1],P(()=>e=!1)),!a&&s&1&&(a=!0,c.firebase=r[0],P(()=>a=!1)),t.$set(c)},i(r){n||(j(t.$$.fragment,r),n=!0)},o(r){v(t.$$.fragment,r),n=!1},d(r){Y(t,r)}}}function Re(o){let t,e,a=o[0]&&o[1]&&je(o);return{c(){a&&a.c(),t=L()},l(n){a&&a.l(n),t=L()},m(n,f){a&&a.m(n,f),ee(n,t,f),e=!0},p(n,[f]){n[0]&&n[1]?a?(a.p(n,f),f&3&&j(a,1)):(a=je(n),a.c(),j(a,1),a.m(t.parentNode,t)):a&&(be(),v(a,1,1,()=>{a=null}),ge())},i(n){e||(j(a),e=!0)},o(n){v(a),e=!1},d(n){a&&a.d(n),n&&g(t)}}}function We(o,t,e){let a,n;Q(o,he,s=>e(2,a=s)),Q(o,Be,s=>e(3,n=s));let f,m;function _(s){m=s,e(1,m),e(3,n),e(0,f),e(2,a)}function r(s){f=s,e(0,f),e(3,n),e(2,a)}return o.$$.update=()=>{o.$$.dirty&13&&(async()=>{if(n){e(0,f=n);const s=await f.firestore();e(1,m=s.collection("maps").doc(a.params.id))}})()},[f,m,a,n,_,r]}class Ue extends ue{constructor(t){super();ce(this,t,We,Re,me,{})}}export{Ue as default};
