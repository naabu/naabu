import{S as ue,i as le,s as ie,a3 as he,Y as L,Z as U,j as B,k as N,e as R,t as ae,m as S,n as Y,c as v,a as E,g as oe,d as g,b as H,o as V,f as I,F,G as ne,H as we,_ as X,r as ce,u as j,w as fe,x as P,v as A,J as ye,K as Z,A as Pe,a6 as je,N as Q,h as Te,O as $,l as me}from"../../chunks/vendor-05d04a9e.js";import{F as Ce}from"../../chunks/form-a50103f8.js";import{s as J,p as Ie}from"../../chunks/stores-e07732fe.js";import{g as K}from"../../chunks/navigation-51f4a605.js";import{R as De}from"../../chunks/resultFeedback-d6392221.js";import{l as Re}from"../../chunks/helper-405801da.js";import{B as pe}from"../../chunks/Button-e99ba711.js";import{f as ve}from"../../chunks/store-fa4e989c.js";import{B as Ee}from"../../chunks/breadcrumbPageTitle-29d2ecc5.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/helper-5c7a4c9b.js";/* empty css                                                        */import"../../chunks/show-2c607e3f.js";const{setTimeout:de}=je;function Fe(u){let r,e=u[0].user.email+"",t;return{c(){r=R("p"),t=ae(e)},l(s){r=v(s,"P",{});var n=E(r);t=oe(n,e),n.forEach(g)},m(s,n){I(s,r,n),F(r,t)},p(s,n){n&1&&e!==(e=s[0].user.email+"")&&Te(t,e)},i:$,o:$,d(s){s&&g(r)}}}function Me(u){let r,e,t;return e=new pe({props:{isLinkToGoogle:!0}}),e.$on("click",u[6]),{c(){r=R("div"),B(e.$$.fragment)},l(s){r=v(s,"DIV",{});var n=E(r);S(e.$$.fragment,n),n.forEach(g)},m(s,n){I(s,r,n),V(e,r,null),t=!0},p:$,i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){s&&g(r),A(e)}}}function Be(u){let r=!1,e=()=>{r=!1},t,s,n,c,f,a,i,o,d,m,b,T,h,w,O,p,y,k,G,z,x;he(u[8]);function ge(l){u[9](l)}let ee={};u[4]!==void 0&&(ee.alert=u[4]),s=new De({props:ee}),L.push(()=>U(s,"alert",ge));const re=[Me,Fe],C=[];function te(l,_){return!l[0].user||l[0].user.isAnonymous?0:1}m=te(u),b=C[m]=re[m](u);function ke(l){u[10](l)}let se={};return u[1]!==void 0&&(se.curriculumProfile=u[1]),w=new Ce({props:se}),L.push(()=>U(w,"curriculumProfile",ke)),k=new pe({props:{isDisabled:u[2],dataTest:"submit-button",isSubmit:!0,color:"primary",content:"Curriculum profiel aanmaken"}}),{c(){B(s.$$.fragment),c=N(),f=R("div"),a=R("p"),i=ae("Profiel aanmaken met"),o=N(),d=R("div"),b.c(),T=N(),h=R("form"),B(w.$$.fragment),p=N(),y=R("div"),B(k.$$.fragment),this.h()},l(l){S(s.$$.fragment,l),c=Y(l),f=v(l,"DIV",{class:!0});var _=E(f);a=v(_,"P",{class:!0});var W=E(a);i=oe(W,"Profiel aanmaken met"),W.forEach(g),o=Y(_),d=v(_,"DIV",{class:!0});var M=E(d);b.l(M),M.forEach(g),_.forEach(g),T=Y(l),h=v(l,"FORM",{class:!0});var D=E(h);S(w.$$.fragment,D),p=Y(D),y=v(D,"DIV",{class:!0});var q=E(y);S(k.$$.fragment,q),q.forEach(g),D.forEach(g),this.h()},h(){H(a,"class","text-sm font-medium text-gray-700"),H(d,"class","mt-1 sm:mt-0 sm:col-span-2"),H(f,"class","sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5"),H(y,"class","mt-4 flex justify-end"),H(h,"class","mt-8")},m(l,_){V(s,l,_),I(l,c,_),I(l,f,_),F(f,a),F(a,i),F(f,o),F(f,d),C[m].m(d,null),I(l,T,_),I(l,h,_),V(w,h,null),F(h,p),F(h,y),V(k,y,null),G=!0,z||(x=[ne(window,"scroll",()=>{r=!0,clearTimeout(t),t=de(e,100),u[8]()}),ne(h,"submit",we(u[5]))],z=!0)},p(l,[_]){_&8&&!r&&(r=!0,clearTimeout(t),scrollTo(window.pageXOffset,l[3]),t=de(e,100));const W={};!n&&_&16&&(n=!0,W.alert=l[4],X(()=>n=!1)),s.$set(W);let M=m;m=te(l),m===M?C[m].p(l,_):(ce(),j(C[M],1,1,()=>{C[M]=null}),fe(),b=C[m],b?b.p(l,_):(b=C[m]=re[m](l),b.c()),P(b,1),b.m(d,null));const D={};!O&&_&2&&(O=!0,D.curriculumProfile=l[1],X(()=>O=!1)),w.$set(D);const q={};_&4&&(q.isDisabled=l[2]),k.$set(q)},i(l){G||(P(s.$$.fragment,l),P(b),P(w.$$.fragment,l),P(k.$$.fragment,l),G=!0)},o(l){j(s.$$.fragment,l),j(b),j(w.$$.fragment,l),j(k.$$.fragment,l),G=!1},d(l){A(s,l),l&&g(c),l&&g(f),C[m].d(),l&&g(T),l&&g(h),A(w),A(k),z=!1,ye(x)}}}function _e(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function Se(u,r,e){let t,s;Z(u,J,p=>e(0,t=p)),Z(u,Ie,p=>e(12,s=p));let{firebase:n}=r,c={fullname:"",institution:"",institutionEmail:"",credentials:""},f,a,i,o=_e(),d=s.query.get("redirect");async function m(){d?d==="/leerdoel/maken"?await K("/leerdoel/maken"):d.startsWith("/leerdoel")?await K(d):d.startsWith("/overleg")?await K(d):await K("/curriculum-profiel/mijn-profiel"):await K("/curriculum-profiel/mijn-profiel")}async function b(){e(2,f=!0);let p=c;delete p.id,e(4,o=_e());try{if(t.player.curriculumProfileId){let k=await i.collection("curriculumProfile").doc(t.player.curriculumProfileId).update(p);e(4,o.success=!0,o),e(4,o.successTitle="Curriculum profiel gemaakt",o)}else{let k=await i.collection("curriculumProfile").add(p);Q(J,t.player.curriculumProfileId=k.id,t),await i.collection("players").doc(t.user.uid).update({curriculumProfileId:k.id}),e(4,o.success=!0,o),e(4,o.successTitle="Curriculum profiel gemaakt",o),e(4,o.successMessage="id: "+k.id,o)}await m()}catch(y){e(4,o.error=!0,o),e(4,o.errorCode=y.code,o),e(4,o.errorMessage=y.message,o)}e(3,a=0),setTimeout(()=>{e(2,f=!1)},5e3)}Pe(async()=>{i=await n.firestore()});async function T(){let p=await Re(n);p!==null&&(Q(J,t.user=p.user,t),Q(J,t.player=p.player,t))}function h(){e(3,a=window.pageYOffset)}function w(p){o=p,e(4,o)}function O(p){c=p,e(1,c),e(0,t)}return u.$$set=p=>{"firebase"in p&&e(7,n=p.firebase)},u.$$.update=()=>{u.$$.dirty&1&&t.user&&e(1,c.uid=t.user.uid,c),u.$$.dirty&1&&(!t.user||t.user.isAnonymous?e(2,f=!0):e(2,f=!1))},[t,c,f,a,o,b,T,n,h,w,O]}class Ve extends ue{constructor(r){super();le(this,r,Se,Be,ie,{firebase:7})}}function be(u){let r,e,t;function s(c){u[6](c)}let n={};return u[0]!==void 0&&(n.firebase=u[0]),r=new Ve({props:n}),L.push(()=>U(r,"firebase",s)),{c(){B(r.$$.fragment)},l(c){S(r.$$.fragment,c)},m(c,f){V(r,c,f),t=!0},p(c,f){const a={};!e&&f&1&&(e=!0,a.firebase=c[0],X(()=>e=!1)),r.$set(a)},i(c){t||(P(r.$$.fragment,c),t=!0)},o(c){j(r.$$.fragment,c),t=!1},d(c){A(r,c)}}}function Ae(u){let r,e,t,s,n;function c(i){u[5](i)}let f={title:"Curriculum profiel maken"};u[3]!==void 0&&(f.breadcrumbs=u[3]),r=new Ee({props:f}),L.push(()=>U(r,"breadcrumbs",c));let a=u[2]&&!u[1]&&be(u);return{c(){B(r.$$.fragment),t=N(),a&&a.c(),s=me()},l(i){S(r.$$.fragment,i),t=Y(i),a&&a.l(i),s=me()},m(i,o){V(r,i,o),I(i,t,o),a&&a.m(i,o),I(i,s,o),n=!0},p(i,[o]){const d={};!e&&o&8&&(e=!0,d.breadcrumbs=i[3],X(()=>e=!1)),r.$set(d),i[2]&&!i[1]?a?(a.p(i,o),o&6&&P(a,1)):(a=be(i),a.c(),P(a,1),a.m(s.parentNode,s)):a&&(ce(),j(a,1,1,()=>{a=null}),fe())},i(i){n||(P(r.$$.fragment,i),P(a),n=!0)},o(i){j(r.$$.fragment,i),j(a),n=!1},d(i){A(r,i),i&&g(t),a&&a.d(i),i&&g(s)}}}function Oe(u,r,e){let t,s;Z(u,J,m=>e(7,t=m)),Z(u,ve,m=>e(4,s=m));let n,c,f=!1;async function a(){let m=await n.firestore();if(t.user){let b=m.collection("curriculumProfile").doc(t.player.curriculumProfileId),T=await b.get();T.exists&&(e(1,c=T.data()),e(1,c.id=b.id,c))}}let i=[{url:"/curriculum",value:"Curriculum"},{url:"/curriculum-profiel/maken",value:"Curriculum profiel maken"}];function o(m){i=m,e(3,i)}function d(m){n=m,e(0,n),e(4,s)}return u.$$.update=()=>{u.$$.dirty&16&&(async()=>{s&&(e(0,n=s),await a(),e(2,f=!0))})()},[n,c,f,i,s,o,d]}class Qe extends ue{constructor(r){super();le(this,r,Oe,Ae,ie,{})}}export{Qe as default};
