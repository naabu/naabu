import{S as ne,i as re,s as oe,a3 as je,e as b,j as M,k as H,c as y,a as A,m as F,n as Y,d as v,b as g,f as I,o as P,F as k,G as le,H as Ie,_ as V,x as E,u as D,v as G,l as fe,X as Ee,r as ce,w as ue,K as $,A as Re,Y as B,Z as C,t as L,g as q,aa as de,ab as Te,h as me}from"../../../../chunks/vendor-05d04a9e.js";import{s as De,p as Se}from"../../../../chunks/stores-e07732fe.js";import{F as ze}from"../../../../chunks/form-7d69dc68.js";import{R as Ve}from"../../../../chunks/resultFeedback-d6392221.js";import{d as Be,b as ve}from"../../../../chunks/helper-cf411eac.js";import{g as _e}from"../../../../chunks/navigation-51f4a605.js";import{a as pe,f as ge}from"../../../../chunks/helper-a37f5850.js";import{g as Ce,c as Me}from"../../../../chunks/helper-249596aa.js";import{B as Fe}from"../../../../chunks/Button-e99ba711.js";import{f as Pe}from"../../../../chunks/store-fa4e989c.js";import{S as Ge,g as Le}from"../../../../chunks/helper-eccdbb77.js";import{G as qe}from"../../../../chunks/getActivityData-bc74ca08.js";/* empty css                                   */import"../../../../chunks/quizzesForm-3f7b1543.js";import"../../../../chunks/dialog-24821939.js";import"../../../../chunks/singletons-12a22614.js";/* empty css                                                              */function he(s){let t,e,i,a,f,o,u,d,l,r,c,m,S,R,n,h,_,w,T,W,Q;function Ae(p){s[8](p)}let U={};s[2]!==void 0&&(U.alert=s[2]),e=new Ve({props:U}),B.push(()=>C(e,"alert",Ae));function X(p,j){return p[0].status==="draft"?Ze:Ne}let K=X(s),z=K(s);function we(p){s[9](p)}let J={};return s[0]!==void 0&&(J.activity=s[0]),m=new ze({props:J}),B.push(()=>C(m,"activity",we)),m.$on("toLearningGoals",s[3]),w=new Fe({props:{color:"primary",isSubmit:!0,dataTest:"edit-activity-submit-button",content:"Concept opslaan en bekijken"}}),{c(){t=b("div"),M(e.$$.fragment),a=H(),f=b("div"),o=b("div"),u=b("div"),d=b("div"),l=b("p"),z.c(),r=H(),c=b("form"),M(m.$$.fragment),R=H(),n=b("div"),h=b("div"),_=b("div"),M(w.$$.fragment),this.h()},l(p){t=y(p,"DIV",{});var j=A(t);F(e.$$.fragment,j),a=Y(j),f=y(j,"DIV",{});var N=A(f);o=y(N,"DIV",{class:!0});var Z=A(o);u=y(Z,"DIV",{class:!0});var x=A(u);d=y(x,"DIV",{});var ee=A(d);l=y(ee,"P",{class:!0});var te=A(l);z.l(te),te.forEach(v),ee.forEach(v),x.forEach(v),Z.forEach(v),N.forEach(v),r=Y(j),c=y(j,"FORM",{class:!0});var O=A(c);F(m.$$.fragment,O),R=Y(O),n=y(O,"DIV",{class:!0});var ie=A(n);h=y(ie,"DIV",{class:!0});var se=A(h);_=y(se,"DIV",{class:!0});var ae=A(_);F(w.$$.fragment,ae),ae.forEach(v),se.forEach(v),ie.forEach(v),O.forEach(v),j.forEach(v),this.h()},h(){g(l,"class","max-w-2xl text-sm text-gray-500"),g(u,"class","flex-1 min-w-0"),g(o,"class","md:flex md:items-center md:justify-between"),g(_,"class","flex justify-end"),g(h,"class","pt-5"),g(n,"class",""),g(c,"class","space-y-8 divide-y divide-gray-200")},m(p,j){I(p,t,j),P(e,t,null),k(t,a),k(t,f),k(f,o),k(o,u),k(u,d),k(d,l),z.m(l,null),k(t,r),k(t,c),P(m,c,null),k(c,R),k(c,n),k(n,h),k(h,_),P(w,_,null),T=!0,W||(Q=le(c,"submit",Ie(s[4])),W=!0)},p(p,j){const N={};!i&&j&4&&(i=!0,N.alert=p[2],V(()=>i=!1)),e.$set(N),K!==(K=X(p))&&(z.d(1),z=K(p),z&&(z.c(),z.m(l,null)));const Z={};!S&&j&1&&(S=!0,Z.activity=p[0],V(()=>S=!1)),m.$set(Z)},i(p){T||(E(e.$$.fragment,p),E(m.$$.fragment,p),E(w.$$.fragment,p),T=!0)},o(p){D(e.$$.fragment,p),D(m.$$.fragment,p),D(w.$$.fragment,p),T=!1},d(p){p&&v(t),G(e),z.d(),G(m),G(w),W=!1,Q()}}}function Ne(s){let t;return{c(){t=L("Wijzig hier je activiteit")},l(e){t=q(e,"Wijzig hier je activiteit")},m(e,i){I(e,t,i)},d(e){e&&v(t)}}}function Ze(s){let t;return{c(){t=L(`Maak hier elke soort activiteit, bijvoorbeeld een uitleg video
                of quiz.`)},l(e){t=q(e,`Maak hier elke soort activiteit, bijvoorbeeld een uitleg video
                of quiz.`)},m(e,i){I(e,t,i)},d(e){e&&v(t)}}}function He(s){let t=!1,e=()=>{t=!1},i,a,f,o,u,d,l;je(s[7]);let r=s[0]&&he(s);return{c(){a=b("link"),f=H(),r&&r.c(),o=fe(),this.h()},l(c){const m=Ee('[data-svelte="svelte-18eex2"]',document.head);a=y(m,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),m.forEach(v),f=Y(c),r&&r.l(c),o=fe(),this.h()},h(){g(a,"rel","stylesheet"),g(a,"href","https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css"),g(a,"integrity","sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc"),g(a,"crossorigin","anonymous")},m(c,m){k(document.head,a),I(c,f,m),r&&r.m(c,m),I(c,o,m),u=!0,d||(l=le(window,"scroll",()=>{t=!0,clearTimeout(i),i=setTimeout(e,100),s[7]()}),d=!0)},p(c,[m]){m&2&&!t&&(t=!0,clearTimeout(i),scrollTo(window.pageXOffset,c[1]),i=setTimeout(e,100)),c[0]?r?(r.p(c,m),m&1&&E(r,1)):(r=he(c),r.c(),E(r,1),r.m(o.parentNode,o)):r&&(ce(),D(r,1,1,()=>{r=null}),ue())},i(c){u||(E(r),u=!0)},o(c){D(r),u=!1},d(c){v(a),c&&v(f),r&&r.d(c),c&&v(o),d=!1,l()}}}function Ye(s,t,e){let i;$(s,De,n=>e(11,i=n));let a,{previousActivity:f}=t,{activity:o}=t,{firebase:u}=t;Re(async()=>{await u.firestore()});async function d(){o.id&&(await r(),_e("/lerarenkamer/activiteit/maken-leerdoel-zoeken?activityId="+o.id))}let l=pe();async function r(){if(i.user){let n=Be(o);if(Ce(f,n).length>0){let T=await Me(u,o,n,i.user.uid);n.latestRevisionId=T.id,n.latestRevisionCreatedAt=u.firestore.Timestamp.now().seconds,o.latestRevisionId&&(n.previousRevisionId=o.latestRevisionId)}n.authorId=i.user.uid,e(2,l=pe());let w=u.firestore().collection("activities").doc(o.id);try{await w.update(n),e(2,l.success=!0,l),e(2,l.successTitle="Activiteit gewijzigd",l),e(2,l.successMessage="id: "+w.id,l)}catch(T){console.error("Error adding documfent: ",T),e(2,l.error=!0,l),e(2,l.errorCode=T.code,l),e(2,l.errorMessage=T.message,l)}e(1,a=0)}}async function c(n){await r(),_e("/lerarenkamer/activiteit/"+o.id+"/preview")}function m(){e(1,a=window.pageYOffset)}function S(n){l=n,e(2,l)}function R(n){o=n,e(0,o)}return s.$$set=n=>{"previousActivity"in n&&e(5,f=n.previousActivity),"activity"in n&&e(0,o=n.activity),"firebase"in n&&e(6,u=n.firebase)},[o,a,l,d,c,f,u,m,S,R]}class Ke extends ne{constructor(t){super();re(this,t,Ye,He,oe,{previousActivity:5,activity:0,firebase:6})}}function be(s){let t,e,i,a,f=ge(s[0].latestRevisionCreatedAt,s[2],s[4])+"",o,u;return{c(){t=b("p"),e=b("a"),i=b("time"),a=L(`Laatste wijziging was
            `),o=L(f),this.h()},l(d){t=y(d,"P",{class:!0});var l=A(t);e=y(l,"A",{"data-test":!0,href:!0,class:!0});var r=A(e);i=y(r,"TIME",{datetime:!0});var c=A(i);a=q(c,`Laatste wijziging was
            `),o=q(c,f),c.forEach(v),r.forEach(v),l.forEach(v),this.h()},h(){g(i,"datetime","2020-12-09T11:43:00"),g(e,"data-test","last-change-link"),g(e,"href",u="/revisie/"+s[0].latestRevisionId+"/diff/"+s[0].previousRevisionId),g(e,"class","hover:underline"),g(t,"class","pt-2 text-sm text-gray-500")},m(d,l){I(d,t,l),k(t,e),k(e,i),k(i,a),k(i,o)},p(d,l){l&5&&f!==(f=ge(d[0].latestRevisionCreatedAt,d[2],d[4])+"")&&me(o,f),l&1&&u!==(u="/revisie/"+d[0].latestRevisionId+"/diff/"+d[0].previousRevisionId)&&g(e,"href",u)},d(d){d&&v(t)}}}function Oe(s){let t,e=s[0]&&s[0].latestRevisionCreatedAt&&s[0].previousRevisionId&&be(s);return{c(){t=b("div"),e&&e.c(),this.h()},l(i){t=y(i,"DIV",{slot:!0,class:!0});var a=A(t);e&&e.l(a),a.forEach(v),this.h()},h(){g(t,"slot","abovetitle"),g(t,"class","ml-auto w-max")},m(i,a){I(i,t,a),e&&e.m(t,null)},p(i,a){i[0]&&i[0].latestRevisionCreatedAt&&i[0].previousRevisionId?e?e.p(i,a):(e=be(i),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},d(i){i&&v(t),e&&e.d()}}}function We(s){let t,e;return{c(){t=b("span"),e=L("Activiteit maken"),this.h()},l(i){t=y(i,"SPAN",{slot:!0});var a=A(t);e=q(a,"Activiteit maken"),a.forEach(v),this.h()},h(){g(t,"slot","title")},m(i,a){I(i,t,a),k(t,e)},d(i){i&&v(t)}}}function ye(s){let t=ve(s[0].status)+"",e;return{c(){e=L(t)},l(i){e=q(i,t)},m(i,a){I(i,e,a)},p(i,a){a&1&&t!==(t=ve(i[0].status)+"")&&me(e,t)},d(i){i&&v(e)}}}function $e(s){let t,e=s[2]&&s[0]&&ye(s);return{c(){t=b("span"),e&&e.c(),this.h()},l(i){t=y(i,"SPAN",{slot:!0,"data-test":!0,class:!0});var a=A(t);e&&e.l(a),a.forEach(v),this.h()},h(){g(t,"slot","status"),g(t,"data-test","concept-status"),g(t,"class","inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800")},m(i,a){I(i,t,a),e&&e.m(t,null)},p(i,a){i[2]&&i[0]?e?e.p(i,a):(e=ye(i),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},d(i){i&&v(t),e&&e.d()}}}function ke(s){let t,e,i,a,f;function o(r){s[10](r)}function u(r){s[11](r)}function d(r){s[12](r)}let l={};return s[2]!==void 0&&(l.firebase=s[2]),s[0]!==void 0&&(l.activity=s[0]),s[3]!==void 0&&(l.previousActivity=s[3]),t=new Ke({props:l}),B.push(()=>C(t,"firebase",o)),B.push(()=>C(t,"activity",u)),B.push(()=>C(t,"previousActivity",d)),{c(){M(t.$$.fragment)},l(r){F(t.$$.fragment,r)},m(r,c){P(t,r,c),f=!0},p(r,c){const m={};!e&&c&4&&(e=!0,m.firebase=r[2],V(()=>e=!1)),!i&&c&1&&(i=!0,m.activity=r[0],V(()=>i=!1)),!a&&c&8&&(a=!0,m.previousActivity=r[3],V(()=>a=!1)),t.$set(m)},i(r){f||(E(t.$$.fragment,r),f=!0)},o(r){D(t.$$.fragment,r),f=!1},d(r){G(t,r)}}}function Qe(s){let t,e,i=s[2]&&s[0]&&ke(s);return{c(){t=b("span"),i&&i.c(),this.h()},l(a){t=y(a,"SPAN",{slot:!0});var f=A(t);i&&i.l(f),f.forEach(v),this.h()},h(){g(t,"slot","content")},m(a,f){I(a,t,f),i&&i.m(t,null),e=!0},p(a,f){a[2]&&a[0]?i?(i.p(a,f),f&5&&E(i,1)):(i=ke(a),i.c(),E(i,1),i.m(t,null)):i&&(ce(),D(i,1,1,()=>{i=null}),ue())},i(a){e||(E(i),e=!0)},o(a){D(i),e=!1},d(a){a&&v(t),i&&i.d()}}}function Ue(s){let t,e,i,a,f,o,u,d;function l(n){s[7](n)}function r(n){s[8](n)}function c(n){s[9](n)}let m={};s[2]!==void 0&&(m.firebase=s[2]),s[0]!==void 0&&(m.activity=s[0]),s[3]!==void 0&&(m.cloneActivity=s[3]),t=new qe({props:m}),B.push(()=>C(t,"firebase",l)),B.push(()=>C(t,"activity",r)),B.push(()=>C(t,"cloneActivity",c));function S(n){s[13](n)}let R={$$slots:{content:[Qe],status:[$e],title:[We],abovetitle:[Oe]},$$scope:{ctx:s}};return s[1]!==void 0&&(R.menuitems=s[1]),o=new Ge({props:R}),B.push(()=>C(o,"menuitems",S)),{c(){M(t.$$.fragment),f=H(),M(o.$$.fragment)},l(n){F(t.$$.fragment,n),f=Y(n),F(o.$$.fragment,n)},m(n,h){P(t,n,h),I(n,f,h),P(o,n,h),d=!0},p(n,[h]){const _={};!e&&h&4&&(e=!0,_.firebase=n[2],V(()=>e=!1)),!i&&h&1&&(i=!0,_.activity=n[0],V(()=>i=!1)),!a&&h&8&&(a=!0,_.cloneActivity=n[3],V(()=>a=!1)),t.$set(_);const w={};h&16397&&(w.$$scope={dirty:h,ctx:n}),!u&&h&2&&(u=!0,w.menuitems=n[1],V(()=>u=!1)),o.$set(w)},i(n){d||(E(t.$$.fragment,n),E(o.$$.fragment,n),d=!0)},o(n){D(t.$$.fragment,n),D(o.$$.fragment,n),d=!1},d(n){G(t,n),n&&v(f),G(o,n)}}}function Xe(s,t,e){let i,a;$(s,Pe,_=>e(5,i=_)),$(s,Se,_=>e(6,a=_));let f,o,u,d;de.addLocale(Te);const l=new de("nl");function r(_){o=_,e(2,o)}function c(_){u=_,e(0,u)}function m(_){d=_,e(3,d)}function S(_){o=_,e(2,o)}function R(_){u=_,e(0,u)}function n(_){d=_,e(3,d)}function h(_){f=_,e(1,f),e(0,u),e(6,a)}return s.$$.update=()=>{s.$$.dirty&65&&u&&e(1,f=Le(a.path,u.status)),s.$$.dirty&32&&(async()=>{})()},[u,f,o,d,l,i,a,r,c,m,S,R,n,h]}class _t extends ne{constructor(t){super();re(this,t,Xe,Ue,oe,{})}}export{_t as default};
