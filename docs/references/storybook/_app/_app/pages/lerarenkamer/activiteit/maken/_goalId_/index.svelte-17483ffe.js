import{S as de,i as me,s as ge,a3 as Ie,Y as V,Z as C,e as I,k as L,j as B,t as $,X as je,c as j,d as p,n as U,a as S,m as N,g as x,b as y,F as w,f as P,o as O,G as pe,H as De,_ as M,x as q,u as F,v as Y,J as Se,K as ee,A as Ee,a6 as Re,r as Ae,w as Te}from"../../../../../chunks/vendor-05d04a9e.js";import{s as ze,p as _e}from"../../../../../chunks/stores-e07732fe.js";import{F as Ve}from"../../../../../chunks/form-7d69dc68.js";import{R as Ce}from"../../../../../chunks/resultFeedback-d6392221.js";import{c as Me,d as qe}from"../../../../../chunks/helper-cf411eac.js";import{g as te}from"../../../../../chunks/navigation-51f4a605.js";import{c as Fe}from"../../../../../chunks/helper-249596aa.js";import{B as Ge}from"../../../../../chunks/Button-e99ba711.js";import{f as Be}from"../../../../../chunks/store-fa4e989c.js";import{S as Ne,g as Pe}from"../../../../../chunks/helper-eccdbb77.js";import{G as Oe}from"../../../../../chunks/getGoalData-3fdf99e2.js";/* empty css                                      */import"../../../../../chunks/helper-a37f5850.js";import"../../../../../chunks/quizzesForm-3f7b1543.js";import"../../../../../chunks/dialog-24821939.js";import"../../../../../chunks/singletons-12a22614.js";/* empty css                                                                 */const{setTimeout:be}=Re;function Ye(a){let e=!1,s=()=>{e=!1},t,i,l,o,g,u,b,n,D,_,d,f,r,h,v,k,H,m,E,R,G,T,W,Z,Q,se;Ie(a[8]);function ke(c){a[9](c)}let ae={};a[3]!==void 0&&(ae.alert=a[3]),g=new Ce({props:ae}),V.push(()=>C(g,"alert",ke));function ye(c){a[10](c)}let ie={};a[1]!==void 0&&(ie.activity=a[1]),k=new Ve({props:ie}),V.push(()=>C(k,"activity",ye)),k.$on("toLearningGoals",a[4]);function we(c){a[11](c)}let re={color:"primary",isSubmit:!0,dataTest:"submit-activity-create-button",content:"Concept opslaan en bekijken"};return a[2]!==void 0&&(re.isDisabled=a[2]),T=new Ge({props:re}),V.push(()=>C(T,"isDisabled",we)),{c(){i=I("link"),l=L(),o=I("div"),B(g.$$.fragment),b=L(),n=I("div"),D=I("div"),_=I("div"),d=I("div"),f=I("p"),r=$(`Maak hier elke soort activiteit, bijvoorbeeld een uitleg video of
            quiz.`),h=L(),v=I("form"),B(k.$$.fragment),m=L(),E=I("div"),R=I("div"),G=I("div"),B(T.$$.fragment),this.h()},l(c){const A=je('[data-svelte="svelte-wfrnnw"]',document.head);i=j(A,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),A.forEach(p),l=U(c),o=j(c,"DIV",{});var z=S(o);N(g.$$.fragment,z),b=U(z),n=j(z,"DIV",{});var J=S(n);D=j(J,"DIV",{class:!0});var K=S(D);_=j(K,"DIV",{class:!0});var ne=S(_);d=j(ne,"DIV",{});var oe=S(d);f=j(oe,"P",{class:!0});var le=S(f);r=x(le,`Maak hier elke soort activiteit, bijvoorbeeld een uitleg video of
            quiz.`),le.forEach(p),oe.forEach(p),ne.forEach(p),K.forEach(p),J.forEach(p),h=U(z),v=j(z,"FORM",{class:!0});var X=S(v);N(k.$$.fragment,X),m=U(X),E=j(X,"DIV",{class:!0});var ue=S(E);R=j(ue,"DIV",{class:!0});var fe=S(R);G=j(fe,"DIV",{class:!0});var ce=S(G);N(T.$$.fragment,ce),ce.forEach(p),fe.forEach(p),ue.forEach(p),X.forEach(p),z.forEach(p),this.h()},h(){y(i,"rel","stylesheet"),y(i,"href","https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"),y(i,"integrity","sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs"),y(i,"crossorigin","anonymous"),y(f,"class","max-w-2xl text-sm text-gray-500"),y(_,"class","flex-1 min-w-0"),y(D,"class","md:flex md:items-center md:justify-between"),y(G,"class","flex justify-end"),y(R,"class","pt-5"),y(E,"class",""),y(v,"class","space-y-8 divide-y divide-gray-200")},m(c,A){w(document.head,i),P(c,l,A),P(c,o,A),O(g,o,null),w(o,b),w(o,n),w(n,D),w(D,_),w(_,d),w(d,f),w(f,r),w(o,h),w(o,v),O(k,v,null),w(v,m),w(v,E),w(E,R),w(R,G),O(T,G,null),Z=!0,Q||(se=[pe(window,"scroll",()=>{e=!0,clearTimeout(t),t=be(s,100),a[8]()}),pe(v,"submit",De(a[5]))],Q=!0)},p(c,[A]){A&1&&!e&&(e=!0,clearTimeout(t),scrollTo(window.pageXOffset,c[0]),t=be(s,100));const z={};!u&&A&8&&(u=!0,z.alert=c[3],M(()=>u=!1)),g.$set(z);const J={};!H&&A&2&&(H=!0,J.activity=c[1],M(()=>H=!1)),k.$set(J);const K={};!W&&A&4&&(W=!0,K.isDisabled=c[2],M(()=>W=!1)),T.$set(K)},i(c){Z||(q(g.$$.fragment,c),q(k.$$.fragment,c),q(T.$$.fragment,c),Z=!0)},o(c){F(g.$$.fragment,c),F(k.$$.fragment,c),F(T.$$.fragment,c),Z=!1},d(c){p(i),c&&p(l),c&&p(o),Y(g),Y(k),Y(T),Q=!1,Se(se)}}}function he(){return{success:!1,successMessage:"",error:!1,errorCode:"",errorMessage:""}}function He(a,e,s){let t;ee(a,ze,m=>s(14,t=m));let{firebase:i}=e,{goal:l}=e,o;async function g(){let m=u();m&&await f(),m&&o?te("/lerarenkamer/activiteit/maken-leerdoel-zoeken?activityId="+o):te("/lerarenkamer/activiteit/maken-leerdoel-zoeken")}function u(){return n.title!==""||n.descriptionRaw!==""||n.description!==""||n.type!==""||n.difficulty!==1||n.svg!==""||n.video.vimeoId!==null||n.quizzes.length!==0}let b,n=Me(),D,_=!1,d=he();Ee(async()=>{D=await i.firestore()});async function f(){if(t.user){let m=qe(n);m.authorId=t.user.uid,s(3,d=he());try{let E=D.collection("activities"),R=await E.add(m);s(1,n.id=R.id,n),m={latestRevisionId:(await Fe(i,n,m,t.user.uid)).id,latestRevisionCreatedAt:i.firestore.Timestamp.now().seconds},await E.doc(n.id).update(m),te("/lerarenkamer/activiteit/"+n.id+"/preview"),s(3,d.success=!0,d),s(3,d.successTitle="Activiteit gemaakt",d),s(3,d.successMessage="id: "+R.id,d),o=R.id}catch(E){s(3,d.error=!0,d),s(3,d.errorCode=E.code,d),s(3,d.errorMessage=E.message,d)}s(0,b=0)}}async function r(m){s(2,_=!0),await f(),setTimeout(()=>{s(2,_=!1)},5e3)}function h(){s(0,b=window.pageYOffset)}function v(m){d=m,s(3,d)}function k(m){n=m,s(1,n),s(7,l)}function H(m){_=m,s(2,_)}return a.$$set=m=>{"firebase"in m&&s(6,i=m.firebase),"goal"in m&&s(7,l=m.goal)},a.$$.update=()=>{a.$$.dirty&128&&l&&(s(1,n.goalId=l.id,n),s(1,n.goalTitle=l.title,n))},[b,n,_,d,g,r,i,l,h,v,k,H]}class Je extends de{constructor(e){super();me(this,e,He,Ye,ge,{firebase:6,goal:7})}}function Ke(a){let e,s;return{c(){e=I("span"),s=$("Activiteit maken"),this.h()},l(t){e=j(t,"SPAN",{slot:!0});var i=S(e);s=x(i,"Activiteit maken"),i.forEach(p),this.h()},h(){y(e,"slot","title")},m(t,i){P(t,e,i),w(e,s)},d(t){t&&p(e)}}}function Le(a){let e,s;return{c(){e=I("span"),s=$("Concept"),this.h()},l(t){e=j(t,"SPAN",{"data-test":!0,slot:!0,class:!0});var i=S(e);s=x(i,"Concept"),i.forEach(p),this.h()},h(){y(e,"data-test","concept-status"),y(e,"slot","status"),y(e,"class","inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-green-100 text-green-800")},m(t,i){P(t,e,i),w(e,s)},d(t){t&&p(e)}}}function ve(a){let e,s,t,i;function l(u){a[8](u)}function o(u){a[9](u)}let g={};return a[1]!==void 0&&(g.firebase=a[1]),a[2]!==void 0&&(g.goal=a[2]),e=new Je({props:g}),V.push(()=>C(e,"firebase",l)),V.push(()=>C(e,"goal",o)),{c(){B(e.$$.fragment)},l(u){N(e.$$.fragment,u)},m(u,b){O(e,u,b),i=!0},p(u,b){const n={};!s&&b&2&&(s=!0,n.firebase=u[1],M(()=>s=!1)),!t&&b&4&&(t=!0,n.goal=u[2],M(()=>t=!1)),e.$set(n)},i(u){i||(q(e.$$.fragment,u),i=!0)},o(u){F(e.$$.fragment,u),i=!1},d(u){Y(e,u)}}}function Ue(a){let e,s,t=a[1]&&a[2]&&ve(a);return{c(){e=I("span"),t&&t.c(),this.h()},l(i){e=j(i,"SPAN",{slot:!0});var l=S(e);t&&t.l(l),l.forEach(p),this.h()},h(){y(e,"slot","content")},m(i,l){P(i,e,l),t&&t.m(e,null),s=!0},p(i,l){i[1]&&i[2]?t?(t.p(i,l),l&6&&q(t,1)):(t=ve(i),t.c(),q(t,1),t.m(e,null)):t&&(Ae(),F(t,1,1,()=>{t=null}),Te())},i(i){s||(q(t),s=!0)},o(i){F(t),s=!1},d(i){i&&p(e),t&&t.d()}}}function Ze(a){let e,s,t,i,l,o,g,u;function b(r){a[5](r)}function n(r){a[6](r)}function D(r){a[7](r)}let _={};a[1]!==void 0&&(_.firebase=a[1]),a[2]!==void 0&&(_.goal=a[2]),a[3].params.goalId!==void 0&&(_.goalId=a[3].params.goalId),e=new Oe({props:_}),V.push(()=>C(e,"firebase",b)),V.push(()=>C(e,"goal",n)),V.push(()=>C(e,"goalId",D));function d(r){a[10](r)}let f={$$slots:{content:[Ue],status:[Le],title:[Ke]},$$scope:{ctx:a}};return a[0]!==void 0&&(f.menuitems=a[0]),o=new Ne({props:f}),V.push(()=>C(o,"menuitems",d)),{c(){B(e.$$.fragment),l=L(),B(o.$$.fragment)},l(r){N(e.$$.fragment,r),l=U(r),N(o.$$.fragment,r)},m(r,h){O(e,r,h),P(r,l,h),O(o,r,h),u=!0},p(r,[h]){const v={};!s&&h&2&&(s=!0,v.firebase=r[1],M(()=>s=!1)),!t&&h&4&&(t=!0,v.goal=r[2],M(()=>t=!1)),!i&&h&8&&(i=!0,v.goalId=r[3].params.goalId,M(()=>i=!1)),e.$set(v);const k={};h&2054&&(k.$$scope={dirty:h,ctx:r}),!g&&h&1&&(g=!0,k.menuitems=r[0],M(()=>g=!1)),o.$set(k)},i(r){u||(q(e.$$.fragment,r),q(o.$$.fragment,r),u=!0)},o(r){F(e.$$.fragment,r),F(o.$$.fragment,r),u=!1},d(r){Y(e,r),r&&p(l),Y(o,r)}}}function Xe(a,e,s){let t,i;ee(a,Be,f=>s(4,t=f)),ee(a,_e,f=>s(3,i=f));let l=Pe(i.path,"draft"),o,g;function u(f){o=f,s(1,o),s(4,t)}function b(f){g=f,s(2,g)}function n(f){a.$$.not_equal(i.params.goalId,f)&&(i.params.goalId=f,_e.set(i))}function D(f){o=f,s(1,o),s(4,t)}function _(f){g=f,s(2,g)}function d(f){l=f,s(0,l)}return a.$$.update=()=>{a.$$.dirty&16&&(async()=>{t&&s(1,o=t)})()},[l,o,g,i,t,u,b,n,D,_,d]}class mt extends de{constructor(e){super();me(this,e,Xe,Ze,ge,{})}}export{mt as default};
