import{S as E,i as J,s as L,j as P,k as R,m as B,n as A,o as S,f as G,_ as h,x as m,u as _,v as C,w as H,d as q,l as K,K as O,Y as I,Z as j,r as V}from"../../../../../../chunks/vendor-05d04a9e.js";import{C as M}from"../../../../../../chunks/createPost-3beca549.js";import{p as Y}from"../../../../../../chunks/stores-e07732fe.js";import{f as Q}from"../../../../../../chunks/store-fa4e989c.js";import{T as U}from"../../../../../../chunks/talk-abe3aff8.js";import{B as W}from"../../../../../../chunks/breadcrumbPageTitle-29d2ecc5.js";import{a as X}from"../../../../../../chunks/helper-d6a45b8d.js";import"../../../../../../chunks/checkPlayerHasProfile-2454222b.js";import"../../../../../../chunks/resultFeedback-d6392221.js";import"../../../../../../chunks/Button-e99ba711.js";/* empty css                                                                    */import"../../../../../../chunks/helper-a37f5850.js";import"../../../../../../chunks/navigation-51f4a605.js";import"../../../../../../chunks/singletons-12a22614.js";import"../../../../../../chunks/tabs-01b39912.js";import"../../../../../../chunks/show-2c607e3f.js";function Z(a){let t,r,s,i,o,n,p,l,d;function c(e){a[8](e)}let v={title:a[0].title};a[1]!==void 0&&(v.breadcrumbs=a[1]),t=new W({props:v}),I.push(()=>j(t,"breadcrumbs",c));let f=a[5].type==="goal"&&z(a);function w(e){a[10](e)}function T(e){a[11](e)}function y(e){a[12](e)}let g={goalId:a[2].params.goalId};return a[5]!==void 0&&(g.talk=a[5]),a[4]!==void 0&&(g.revision=a[4]),a[3]!==void 0&&(g.firebase=a[3]),o=new M({props:g}),I.push(()=>j(o,"talk",w)),I.push(()=>j(o,"revision",T)),I.push(()=>j(o,"firebase",y)),{c(){P(t.$$.fragment),s=R(),f&&f.c(),i=R(),P(o.$$.fragment)},l(e){B(t.$$.fragment,e),s=A(e),f&&f.l(e),i=A(e),B(o.$$.fragment,e)},m(e,u){S(t,e,u),G(e,s,u),f&&f.m(e,u),G(e,i,u),S(o,e,u),d=!0},p(e,u){const k={};u&1&&(k.title=e[0].title),!r&&u&2&&(r=!0,k.breadcrumbs=e[1],h(()=>r=!1)),t.$set(k),e[5].type==="goal"?f?(f.p(e,u),u&32&&m(f,1)):(f=z(e),f.c(),m(f,1),f.m(i.parentNode,i)):f&&(V(),_(f,1,1,()=>{f=null}),H());const b={};u&4&&(b.goalId=e[2].params.goalId),!n&&u&32&&(n=!0,b.talk=e[5],h(()=>n=!1)),!p&&u&16&&(p=!0,b.revision=e[4],h(()=>p=!1)),!l&&u&8&&(l=!0,b.firebase=e[3],h(()=>l=!1)),o.$set(b)},i(e){d||(m(t.$$.fragment,e),m(f),m(o.$$.fragment,e),d=!0)},o(e){_(t.$$.fragment,e),_(f),_(o.$$.fragment,e),d=!1},d(e){C(t,e),e&&q(s),f&&f.d(e),e&&q(i),C(o,e)}}}function z(a){let t,r,s;function i(n){a[9](n)}let o={talkType:a[5].type,talkId:a[5].id};return a[2].params.goalId!==void 0&&(o.objectId=a[2].params.goalId),t=new U({props:o}),I.push(()=>j(t,"objectId",i)),{c(){P(t.$$.fragment)},l(n){B(t.$$.fragment,n)},m(n,p){S(t,n,p),s=!0},p(n,p){const l={};p&32&&(l.talkType=n[5].type),p&32&&(l.talkId=n[5].id),!r&&p&4&&(r=!0,l.objectId=n[2].params.goalId,h(()=>r=!1)),t.$set(l)},i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){C(t,n)}}}function $(a){let t,r,s=a[6]&&a[0]&&Z(a);return{c(){s&&s.c(),t=K()},l(i){s&&s.l(i),t=K()},m(i,o){s&&s.m(i,o),G(i,t,o),r=!0},p(i,[o]){i[6]&&i[0]?s?(s.p(i,o),o&65&&m(s,1)):(s=Z(i),s.c(),m(s,1),s.m(t.parentNode,t)):s&&(V(),_(s,1,1,()=>{s=null}),H())},i(i){r||(m(s),r=!0)},o(i){_(s),r=!1},d(i){s&&s.d(i),i&&q(t)}}}function x(a,t,r){let s,i;O(a,Y,e=>r(2,s=e)),O(a,Q,e=>r(7,i=e));let o,n,p,l,d=!1,c;async function v(){let e=await o.firestore(),k=await e.collection("goals").doc(s.params.goalId).get();if(k.exists&&(r(0,l=k.data()),r(0,l.id=s.params.goalId,l),l.talkId)){let F=e.collection("talk").doc(l.talkId),N=await F.get();N.exists&&(r(5,p=N.data()),r(5,p.id=F.id,p))}let b=e.collection("revisions").doc(s.params.revisionId),D=await b.get();D.exists&&(r(4,n=D.data()),r(4,n.revisionId=b.id,n))}function f(e){c=e,r(1,c),r(0,l),r(2,s)}function w(e){a.$$.not_equal(s.params.goalId,e)&&(s.params.goalId=e,Y.set(s))}function T(e){p=e,r(5,p)}function y(e){n=e,r(4,n)}function g(e){o=e,r(3,o),r(7,i)}return a.$$.update=()=>{a.$$.dirty&7&&l&&(r(1,c=X(l)),r(1,c=[...c,{url:"/revisie/"+s.params.revisionId+"/diff/"+s.params.oldRevId,value:"Verschil versies"},{url:s.path,value:"Overleg verschillen revisies"}])),a.$$.dirty&128&&(async()=>{i&&(r(3,o=i),await v(),r(6,d=!0))})()},[l,c,s,o,n,p,d,i,f,w,T,y,g]}class _e extends E{constructor(t){super();J(this,t,x,$,L,{})}}export{_e as default};
