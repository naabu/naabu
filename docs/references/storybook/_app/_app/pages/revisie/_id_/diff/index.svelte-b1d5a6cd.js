import{S as ki,i as Ri,s as yi,l as O,f as A,u as B,w as J,x as j,d as N,K as oi,r as Q,Y as R,Z as y,j as D,k as M,m as P,n as Y,o as E,_ as I,v as G,e as V,t as ti,c as W,a as K,g as ri,b as q,F as z}from"../../../../chunks/vendor-05d04a9e.js";import{G as Ii,A as ji,S as Si}from"../../../../chunks/saveActivityRevision-a20187a8.js";import{p as Bi}from"../../../../chunks/stores-e07732fe.js";import{f as Ni}from"../../../../chunks/store-fa4e989c.js";import{e as Fi}from"../../../../chunks/helper-249596aa.js";import{B as Ti}from"../../../../chunks/breadcrumbPageTitle-29d2ecc5.js";import{a as Ai}from"../../../../chunks/helper-d6a45b8d.js";import{G as Di,H as Pi}from"../../../../chunks/getListData-fecee9ff.js";import{S as Ei,g as Gi}from"../../../../chunks/helper-eccdbb77.js";import{B as qi}from"../../../../chunks/Button-e99ba711.js";import"../../../../chunks/helper-a37f5850.js";import"../../../../chunks/navigation-51f4a605.js";import"../../../../chunks/singletons-12a22614.js";import"../../../../chunks/revision-7e827e10.js";import"../../../../chunks/tabs-01b39912.js";import"../../../../chunks/helper-cf411eac.js";import"../../../../chunks/show-2c607e3f.js";/* empty css                                                              */function ai(e){let s,i,n,o;const _=[Ci,zi],g=[];function v(t,d){return!t[3].revisionType||t[3].revisionType==="goal"?0:1}return s=v(e),i=g[s]=_[s](e),{c(){i.c(),n=O()},l(t){i.l(t),n=O()},m(t,d){g[s].m(t,d),A(t,n,d),o=!0},p(t,d){let r=s;s=v(t),s===r?g[s].p(t,d):(Q(),B(g[r],1,1,()=>{g[r]=null}),J(),i=g[s],i?i.p(t,d):(i=g[s]=_[s](t),i.c()),j(i,1),i.m(n.parentNode,n))},i(t){o||(j(i),o=!0)},o(t){B(i),o=!1},d(t){g[s].d(t),t&&N(n)}}}function zi(e){let s,i,n,o,_,g,v,t;function d(u){e[20](u)}function r(u){e[21](u)}function p(u){e[22](u)}let b={revisionType:"activity"};e[6]!==void 0&&(b.firebase=e[6]),e[2]!==void 0&&(b.revisions=e[2]),e[3].revisionSourceId!==void 0&&(b.sourceId=e[3].revisionSourceId),s=new Di({props:b}),R.push(()=>y(s,"firebase",d)),R.push(()=>y(s,"revisions",r)),R.push(()=>y(s,"sourceId",p));function l(u){e[35](u)}let k={$$slots:{content:[Oi],"cta-button":[Li],title:[Hi]},$$scope:{ctx:e}};return e[5]!==void 0&&(k.menuitems=e[5]),g=new Ei({props:k}),R.push(()=>y(g,"menuitems",l)),{c(){D(s.$$.fragment),_=M(),D(g.$$.fragment)},l(u){P(s.$$.fragment,u),_=Y(u),P(g.$$.fragment,u)},m(u,m){E(s,u,m),A(u,_,m),E(g,u,m),t=!0},p(u,m){const a={};!i&&m[0]&64&&(i=!0,a.firebase=u[6],I(()=>i=!1)),!n&&m[0]&4&&(n=!0,a.revisions=u[2],I(()=>n=!1)),!o&&m[0]&8&&(o=!0,a.sourceId=u[3].revisionSourceId,I(()=>o=!1)),s.$set(a);const S={};m[0]&4044|m[1]&128&&(S.$$scope={dirty:m,ctx:u}),!v&&m[0]&32&&(v=!0,S.menuitems=u[5],I(()=>v=!1)),g.$set(S)},i(u){t||(j(s.$$.fragment,u),j(g.$$.fragment,u),t=!0)},o(u){B(s.$$.fragment,u),B(g.$$.fragment,u),t=!1},d(u){G(s,u),u&&N(_),G(g,u)}}}function Ci(e){let s,i,n=e[0]&&li(e);return{c(){n&&n.c(),s=O()},l(o){n&&n.l(o),s=O()},m(o,_){n&&n.m(o,_),A(o,s,_),i=!0},p(o,_){o[0]?n?(n.p(o,_),_[0]&1&&j(n,1)):(n=li(o),n.c(),j(n,1),n.m(s.parentNode,s)):n&&(Q(),B(n,1,1,()=>{n=null}),J())},i(o){i||(j(n),i=!0)},o(o){B(n),i=!1},d(o){n&&n.d(o),o&&N(s)}}}function Hi(e){let s,i;return{c(){s=V("span"),i=ti("Wijzigingen activiteit"),this.h()},l(n){s=W(n,"SPAN",{slot:!0});var o=K(s);i=ri(o,"Wijzigingen activiteit"),o.forEach(N),this.h()},h(){q(s,"slot","title")},m(n,o){A(n,s,o),z(s,i)},d(n){n&&N(s)}}}function Li(e){let s,i,n,o,_,g,v,t,d;return t=new qi({props:{dataTest:"show-all-activity-revisions-button",extraClasses:["z-10"],content:"Bekijk hele geschiedenis",size:"small"}}),t.$on("click",e[34]),{c(){s=V("span"),i=V("div"),n=V("p"),o=V("a"),_=ti("Terug naar activiteit"),v=M(),D(t.$$.fragment),this.h()},l(r){s=W(r,"SPAN",{slot:!0});var p=K(s);i=W(p,"DIV",{class:!0});var b=K(i);n=W(b,"P",{class:!0});var l=K(n);o=W(l,"A",{href:!0,class:!0});var k=K(o);_=ri(k,"Terug naar activiteit"),k.forEach(N),l.forEach(N),v=Y(b),P(t.$$.fragment,b),b.forEach(N),p.forEach(N),this.h()},h(){q(o,"href",g="/lerarenkamer/activiteit/"+e[3].revisionSourceId),q(o,"class","hover:underline"),q(n,"class","pt-2 text-sm text-gray-500"),q(i,"class","ml-4 mr-auto w-full flex justify-between"),q(s,"slot","cta-button")},m(r,p){A(r,s,p),z(s,i),z(i,n),z(n,o),z(o,_),z(i,v),E(t,i,null),d=!0},p(r,p){(!d||p[0]&8&&g!==(g="/lerarenkamer/activiteit/"+r[3].revisionSourceId))&&q(o,"href",g)},i(r){d||(j(t.$$.fragment,r),d=!0)},o(r){B(t.$$.fragment,r),d=!1},d(r){r&&N(s),G(t)}}}function fi(e){let s,i,n,o,_;function g(r){e[31](r)}function v(r){e[32](r)}function t(r){e[33](r)}let d={};return e[6]!==void 0&&(d.firebase=e[6]),e[8]!==void 0&&(d.latestRevisionId=e[8]),e[3]!==void 0&&(d.revision=e[3]),s=new Si({props:d}),R.push(()=>y(s,"firebase",g)),R.push(()=>y(s,"latestRevisionId",v)),R.push(()=>y(s,"revision",t)),{c(){D(s.$$.fragment)},l(r){P(s.$$.fragment,r)},m(r,p){E(s,r,p),_=!0},p(r,p){const b={};!i&&p[0]&64&&(i=!0,b.firebase=r[6],I(()=>i=!1)),!n&&p[0]&256&&(n=!0,b.latestRevisionId=r[8],I(()=>n=!1)),!o&&p[0]&8&&(o=!0,b.revision=r[3],I(()=>o=!1)),s.$set(b)},i(r){_||(j(s.$$.fragment,r),_=!0)},o(r){B(s.$$.fragment,r),_=!1},d(r){G(s,r)}}}function Oi(e){let s,i,n,o,_,g,v,t,d,r,p,b,l,k;function u(c){e[23](c)}function m(c){e[24](c)}function a(c){e[25](c)}function S(c){e[26](c)}let F={revisionOld:{}};e[3]!==void 0&&(F.revisionNew=e[3]),e[10]!==void 0&&(F.goForwardRevision=e[10]),e[9]!==void 0&&(F.goBackRevision=e[9]),e[11]!==void 0&&(F.loading=e[11]),i=new ji({props:F}),R.push(()=>y(i,"revisionNew",u)),R.push(()=>y(i,"goForwardRevision",m)),R.push(()=>y(i,"goBackRevision",a)),R.push(()=>y(i,"loading",S));function T(c){e[27](c)}function U(c){e[28](c)}function X(c){e[29](c)}function $(c){e[30](c)}let C={};e[6]!==void 0&&(C.firebase=e[6]),e[2]!==void 0&&(C.revisions=e[2]),e[7]!==void 0&&(C.toggle=e[7]),e[3].revisionId!==void 0&&(C.activeRevisionId=e[3].revisionId),t=new Pi({props:C}),R.push(()=>y(t,"firebase",T)),R.push(()=>y(t,"revisions",U)),R.push(()=>y(t,"toggle",X)),R.push(()=>y(t,"activeRevisionId",$));let h=e[8]&&e[3].revisionId!==e[8]&&fi(e);return{c(){s=V("span"),D(i.$$.fragment),v=M(),D(t.$$.fragment),l=M(),h&&h.c(),this.h()},l(c){s=W(c,"SPAN",{slot:!0});var w=K(s);P(i.$$.fragment,w),v=Y(w),P(t.$$.fragment,w),l=Y(w),h&&h.l(w),w.forEach(N),this.h()},h(){q(s,"slot","content")},m(c,w){A(c,s,w),E(i,s,null),z(s,v),E(t,s,null),z(s,l),h&&h.m(s,null),k=!0},p(c,w){const H={};!n&&w[0]&8&&(n=!0,H.revisionNew=c[3],I(()=>n=!1)),!o&&w[0]&1024&&(o=!0,H.goForwardRevision=c[10],I(()=>o=!1)),!_&&w[0]&512&&(_=!0,H.goBackRevision=c[9],I(()=>_=!1)),!g&&w[0]&2048&&(g=!0,H.loading=c[11],I(()=>g=!1)),i.$set(H);const L={};!d&&w[0]&64&&(d=!0,L.firebase=c[6],I(()=>d=!1)),!r&&w[0]&4&&(r=!0,L.revisions=c[2],I(()=>r=!1)),!p&&w[0]&128&&(p=!0,L.toggle=c[7],I(()=>p=!1)),!b&&w[0]&8&&(b=!0,L.activeRevisionId=c[3].revisionId,I(()=>b=!1)),t.$set(L),c[8]&&c[3].revisionId!==c[8]?h?(h.p(c,w),w[0]&264&&j(h,1)):(h=fi(c),h.c(),j(h,1),h.m(s,null)):h&&(Q(),B(h,1,1,()=>{h=null}),J())},i(c){k||(j(i.$$.fragment,c),j(t.$$.fragment,c),j(h),k=!0)},o(c){B(i.$$.fragment,c),B(t.$$.fragment,c),B(h),k=!1},d(c){c&&N(s),G(i),G(t),h&&h.d()}}}function li(e){let s,i,n,o,_,g,v,t,d;function r(a){e[15](a)}let p={title:e[0].title};e[1]!==void 0&&(p.breadcrumbs=e[1]),s=new Ti({props:p}),R.push(()=>y(s,"breadcrumbs",r));function b(a){e[16](a)}function l(a){e[17](a)}function k(a){e[18](a)}function u(a){e[19](a)}let m={revisionOld:{}};return e[3]!==void 0&&(m.revisionNew=e[3]),e[10]!==void 0&&(m.goForwardRevision=e[10]),e[9]!==void 0&&(m.goBackRevision=e[9]),e[11]!==void 0&&(m.loading=e[11]),o=new Ii({props:m}),R.push(()=>y(o,"revisionNew",b)),R.push(()=>y(o,"goForwardRevision",l)),R.push(()=>y(o,"goBackRevision",k)),R.push(()=>y(o,"loading",u)),{c(){D(s.$$.fragment),n=M(),D(o.$$.fragment)},l(a){P(s.$$.fragment,a),n=Y(a),P(o.$$.fragment,a)},m(a,S){E(s,a,S),A(a,n,S),E(o,a,S),d=!0},p(a,S){const F={};S[0]&1&&(F.title=a[0].title),!i&&S[0]&2&&(i=!0,F.breadcrumbs=a[1],I(()=>i=!1)),s.$set(F);const T={};!_&&S[0]&8&&(_=!0,T.revisionNew=a[3],I(()=>_=!1)),!g&&S[0]&1024&&(g=!0,T.goForwardRevision=a[10],I(()=>g=!1)),!v&&S[0]&512&&(v=!0,T.goBackRevision=a[9],I(()=>v=!1)),!t&&S[0]&2048&&(t=!0,T.loading=a[11],I(()=>t=!1)),o.$set(T)},i(a){d||(j(s.$$.fragment,a),j(o.$$.fragment,a),d=!0)},o(a){B(s.$$.fragment,a),B(o.$$.fragment,a),d=!1},d(a){G(s,a),a&&N(n),G(o,a)}}}function Vi(e){let s,i,n=e[4]&&e[3]&&ai(e);return{c(){n&&n.c(),s=O()},l(o){n&&n.l(o),s=O()},m(o,_){n&&n.m(o,_),A(o,s,_),i=!0},p(o,_){o[4]&&o[3]?n?(n.p(o,_),_[0]&24&&j(n,1)):(n=ai(o),n.c(),j(n,1),n.m(s.parentNode,s)):n&&(Q(),B(n,1,1,()=>{n=null}),J())},i(o){i||(j(n),i=!0)},o(o){B(n),i=!1},d(o){n&&n.d(o),o&&N(s)}}}function Wi(e,s,i){let n,o;oi(e,Bi,f=>i(13,n=f)),oi(e,Ni,f=>i(14,o=f));let _,g,v,t,d,r=!1,p,b,l,k,u,m=!1,a=!1;const S=async()=>{i(11,a=!0),i(9,k=null),i(10,u=null),await F(),i(11,a=!1)};async function F(){let f=await v.firestore(),ii=f.collection("revisions").doc(n.params.id),ei=await ii.get();if(ei.exists&&(i(3,l=ei.data()),i(3,l.revisionId=ii.id,l),!l.revisionType||l.revisionType==="goal")){const Z=await f.collection("revisions").doc(l.id).collection("battles").get();i(3,l.battles=[],l),Z.forEach(si=>{let ni=si.data();ni.name=si.id,i(3,l.battles=[...l.battles,ni],l)})}if(l&&(!l.revisionType||l.revisionType==="goal")){let x=await f.collection("goals").doc(l.goalId).get();if(x.exists){i(0,g=x.data()),i(0,g.id=l.goalId,g);let Z=Fi(g.revisionList,l.id);i(10,u=Z.nextRevision),i(9,k=Z.previousPreviousRevision)}}l&&l.revisionType==="activity"}function T(f){t=f,i(1,t),i(0,g),i(13,n)}function U(f){l=f,i(3,l)}function X(f){u=f,i(10,u)}function $(f){k=f,i(9,k)}function C(f){a=f,i(11,a)}function h(f){v=f,i(6,v),i(14,o)}function c(f){d=f,i(2,d)}function w(f){e.$$.not_equal(l.revisionSourceId,f)&&(l.revisionSourceId=f,i(3,l))}function H(f){l=f,i(3,l)}function L(f){u=f,i(10,u)}function ui(f){k=f,i(9,k)}function ci(f){a=f,i(11,a)}function gi(f){v=f,i(6,v),i(14,o)}function _i(f){d=f,i(2,d)}function di(f){r=f,i(7,r)}function vi(f){e.$$.not_equal(l.revisionId,f)&&(l.revisionId=f,i(3,l))}function pi(f){v=f,i(6,v),i(14,o)}function bi(f){p=f,i(8,p),i(2,d)}function mi(f){l=f,i(3,l)}const hi=()=>i(7,r=!r);function wi(f){_=f,i(5,_),i(3,l),i(13,n),i(12,b),i(2,d)}return e.$$.update=()=>{e.$$.dirty[0]&4&&d&&d.length>0&&(i(8,p=d[0].revisionId),i(12,b=d[0].status)),e.$$.dirty[0]&8195&&g&&(i(1,t=Ai(g)),i(1,t=[...t,{url:n.path,value:"Verschil versies"}])),e.$$.dirty[0]&16384&&(async()=>{o&&(i(6,v=o),await F(),i(4,m=!0))})(),e.$$.dirty[0]&8208&&n.params.id&&n.params.oldId&&m&&S(),e.$$.dirty[0]&12296&&l&&l.revisionType==="activity"&&i(5,_=Gi(n.path,b))},[g,t,d,l,m,_,v,r,p,k,u,a,b,n,o,T,U,X,$,C,h,c,w,H,L,ui,ci,gi,_i,di,vi,pi,bi,mi,hi,wi]}class fe extends ki{constructor(s){super();Ri(this,s,Wi,Vi,yi,{},null,[-1,-1])}}export{fe as default};
