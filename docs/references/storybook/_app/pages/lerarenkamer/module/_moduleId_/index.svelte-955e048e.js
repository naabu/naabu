import{S as se,i as te,s as oe,a3 as pe,Y as V,Z as z,j as G,k as H,e as M,t as re,m as N,n as K,c as v,a as D,g as ae,d as _,b as A,o as P,f as O,F as S,G as ne,H as _e,_ as F,x as y,u as B,v as q,J as ge,K as X,A as be,a6 as he,aa as le,ab as ke,r as we,w as je}from"../../../../chunks/vendor-05d04a9e.js";import{F as Me}from"../../../../chunks/form-5da0bda3.js";import{R as ve}from"../../../../chunks/resultFeedback-d6392221.js";import{a as ie}from"../../../../chunks/helper-a37f5850.js";import{f as De}from"../../../../chunks/helper-d2f31c51.js";import{s as Ee,p as Ie}from"../../../../chunks/stores-e07732fe.js";import{B as Se}from"../../../../chunks/Button-e99ba711.js";import{f as ye}from"../../../../chunks/store-fa4e989c.js";import{S as Te,g as Ve}from"../../../../chunks/helper-eccdbb77.js";import{G as ze}from"../../../../chunks/getModuleData-d7249d93.js";/* empty css                                   */import"../../../../chunks/algolia-8e16a6f1.js";import"../../../../chunks/dialog-24821939.js";import"../../../../chunks/helper-69e97bf9.js";/* empty css                                                              */const{setTimeout:ue}=he;function Ae(r){let s=!1,e=()=>{s=!1},t,a,n,p,f,u,i,m,h,w,o,d,g,E,c,k,j,I,T,W,L,Z;pe(r[7]);function me(l){r[8](l)}let Q={};r[3]!==void 0&&(Q.alert=r[3]),a=new ve({props:Q}),V.push(()=>z(a,"alert",me));function de(l){r[9](l)}function ce(l){r[10](l)}let U={};return r[0]!==void 0&&(U.module=r[0]),r[4]!==void 0&&(U.allMaps=r[4]),g=new Me({props:U}),V.push(()=>z(g,"module",de)),V.push(()=>z(g,"allMaps",ce)),T=new Se({props:{dataTest:"edit-module-button",isDiabled:r[2],isSubmit:!0,color:"primary",content:"Module wijzigen"}}),{c(){G(a.$$.fragment),p=H(),f=M("div"),u=M("div"),i=M("div"),m=M("div"),h=M("p"),w=re("Wijzig je module"),o=H(),d=M("form"),G(g.$$.fragment),k=H(),j=M("div"),I=M("div"),G(T.$$.fragment),this.h()},l(l){N(a.$$.fragment,l),p=K(l),f=v(l,"DIV",{});var b=D(f);u=v(b,"DIV",{class:!0});var C=D(u);i=v(C,"DIV",{class:!0});var R=D(i);m=v(R,"DIV",{});var J=D(m);h=v(J,"P",{class:!0});var $=D(h);w=ae($,"Wijzig je module"),$.forEach(_),J.forEach(_),R.forEach(_),C.forEach(_),b.forEach(_),o=K(l),d=v(l,"FORM",{class:!0});var Y=D(d);N(g.$$.fragment,Y),k=K(Y),j=v(Y,"DIV",{class:!0});var x=D(j);I=v(x,"DIV",{class:!0});var ee=D(I);N(T.$$.fragment,ee),ee.forEach(_),x.forEach(_),Y.forEach(_),this.h()},h(){A(h,"class","mt-1 max-w-2xl text-sm text-gray-500"),A(i,"class","flex-1 min-w-0"),A(u,"class","mt-2 md:flex md:items-center md:justify-between"),A(I,"class","flex justify-end"),A(j,"class","pt-5"),A(d,"class","space-y-8 divide-y divide-gray-200")},m(l,b){P(a,l,b),O(l,p,b),O(l,f,b),S(f,u),S(u,i),S(i,m),S(m,h),S(h,w),O(l,o,b),O(l,d,b),P(g,d,null),S(d,k),S(d,j),S(j,I),P(T,I,null),W=!0,L||(Z=[ne(window,"scroll",()=>{s=!0,clearTimeout(t),t=ue(e,100),r[7]()}),ne(d,"submit",_e(r[5]))],L=!0)},p(l,[b]){b&2&&!s&&(s=!0,clearTimeout(t),scrollTo(window.pageXOffset,l[1]),t=ue(e,100));const C={};!n&&b&8&&(n=!0,C.alert=l[3],F(()=>n=!1)),a.$set(C);const R={};!E&&b&1&&(E=!0,R.module=l[0],F(()=>E=!1)),!c&&b&16&&(c=!0,R.allMaps=l[4],F(()=>c=!1)),g.$set(R);const J={};b&4&&(J.isDiabled=l[2]),T.$set(J)},i(l){W||(y(a.$$.fragment,l),y(g.$$.fragment,l),y(T.$$.fragment,l),W=!0)},o(l){B(a.$$.fragment,l),B(g.$$.fragment,l),B(T.$$.fragment,l),W=!1},d(l){q(a,l),l&&_(p),l&&_(f),l&&_(o),l&&_(d),q(g),q(T),L=!1,ge(Z)}}}function Fe(r,s,e){let t;X(r,Ee,c=>e(12,t=c));let{firebase:a}=s,{module:n}=s,p,f,u=!1,i=ie(),m=[];be(async()=>{f=await a.firestore();let c=await f.collection("maps").get();e(4,m=[]),c.forEach(k=>{let j=k.data();j.paths.forEach(I=>{I.points=JSON.parse(I.points)}),j.mapId=k.id,m.push(j)}),n.mapId&&e(0,n.map=m.find(k=>k.mapId===n.mapId),n)});async function h(){let c=De(n,!1,!0,!1);e(3,i=ie()),c.authorId=t.user.uid,c.modifiedAt=a.firestore.Timestamp.now().seconds;try{await f.collection("modules").doc(n.id).set(c),e(3,i.success=!0,i),e(3,i.successTitle="Module gewijzigd",i),e(3,i.successMessage="id: "+n.id,i)}catch(k){e(3,i.error=!0,i),e(3,i.errorCode=k.code,i),e(3,i.errorMessage=k.message,i)}e(1,p=0)}async function w(){e(2,u=!0),await h(),setTimeout(()=>{e(2,u=!1)},5e3)}function o(){e(1,p=window.pageYOffset)}function d(c){i=c,e(3,i)}function g(c){n=c,e(0,n)}function E(c){m=c,e(4,m)}return r.$$set=c=>{"firebase"in c&&e(6,a=c.firebase),"module"in c&&e(0,n=c.module)},[n,p,u,i,m,w,a,o,d,g,E]}class Be extends se{constructor(s){super();te(this,s,Fe,Ae,oe,{firebase:6,module:0})}}function Oe(r){let s,e;return{c(){s=M("span"),e=re("Module wijzigen"),this.h()},l(t){s=v(t,"SPAN",{slot:!0});var a=D(s);e=ae(a,"Module wijzigen"),a.forEach(_),this.h()},h(){A(s,"slot","title")},m(t,a){O(t,s,a),S(s,e)},d(t){t&&_(s)}}}function fe(r){let s,e,t,a;function n(u){r[7](u)}function p(u){r[8](u)}let f={};return r[2]!==void 0&&(f.firebase=r[2]),r[0]!==void 0&&(f.module=r[0]),s=new Be({props:f}),V.push(()=>z(s,"firebase",n)),V.push(()=>z(s,"module",p)),{c(){G(s.$$.fragment)},l(u){N(s.$$.fragment,u)},m(u,i){P(s,u,i),a=!0},p(u,i){const m={};!e&&i&4&&(e=!0,m.firebase=u[2],F(()=>e=!1)),!t&&i&1&&(t=!0,m.module=u[0],F(()=>t=!1)),s.$set(m)},i(u){a||(y(s.$$.fragment,u),a=!0)},o(u){B(s.$$.fragment,u),a=!1},d(u){q(s,u)}}}function Re(r){let s,e,t=r[2]&&r[0]&&fe(r);return{c(){s=M("span"),t&&t.c(),this.h()},l(a){s=v(a,"SPAN",{slot:!0});var n=D(s);t&&t.l(n),n.forEach(_),this.h()},h(){A(s,"slot","content")},m(a,n){O(a,s,n),t&&t.m(s,null),e=!0},p(a,n){a[2]&&a[0]?t?(t.p(a,n),n&5&&y(t,1)):(t=fe(a),t.c(),y(t,1),t.m(s,null)):t&&(we(),B(t,1,1,()=>{t=null}),je())},i(a){e||(y(t),e=!0)},o(a){B(t),e=!1},d(a){a&&_(s),t&&t.d()}}}function Ge(r){let s,e,t,a,n,p,f;function u(o){r[5](o)}function i(o){r[6](o)}let m={};r[2]!==void 0&&(m.firebase=r[2]),r[0]!==void 0&&(m.module=r[0]),s=new ze({props:m}),V.push(()=>z(s,"firebase",u)),V.push(()=>z(s,"module",i));function h(o){r[9](o)}let w={$$slots:{content:[Re],title:[Oe]},$$scope:{ctx:r}};return r[1]!==void 0&&(w.menuitems=r[1]),n=new Te({props:w}),V.push(()=>z(n,"menuitems",h)),{c(){G(s.$$.fragment),a=H(),G(n.$$.fragment)},l(o){N(s.$$.fragment,o),a=K(o),N(n.$$.fragment,o)},m(o,d){P(s,o,d),O(o,a,d),P(n,o,d),f=!0},p(o,[d]){const g={};!e&&d&4&&(e=!0,g.firebase=o[2],F(()=>e=!1)),!t&&d&1&&(t=!0,g.module=o[0],F(()=>t=!1)),s.$set(g);const E={};d&2053&&(E.$$scope={dirty:d,ctx:o}),!p&&d&2&&(p=!0,E.menuitems=o[1],F(()=>p=!1)),n.$set(E)},i(o){f||(y(s.$$.fragment,o),y(n.$$.fragment,o),f=!0)},o(o){B(s.$$.fragment,o),B(n.$$.fragment,o),f=!1},d(o){q(s,o),o&&_(a),q(n,o)}}}function Ne(r,s,e){let t,a;X(r,ye,o=>e(3,t=o)),X(r,Ie,o=>e(4,a=o));let n,p,f;le.addLocale(ke),new le("nl");function u(o){p=o,e(2,p),e(3,t)}function i(o){f=o,e(0,f)}function m(o){p=o,e(2,p),e(3,t)}function h(o){f=o,e(0,f)}function w(o){n=o,e(1,n),e(0,f),e(4,a)}return r.$$.update=()=>{r.$$.dirty&17&&f&&e(1,n=Ve(a.path)),r.$$.dirty&8&&(async()=>{t&&e(2,p=t)})()},[f,n,p,t,a,u,i,m,h,w]}class es extends se{constructor(s){super();te(this,s,Ne,Ge,oe,{})}}export{es as default};
