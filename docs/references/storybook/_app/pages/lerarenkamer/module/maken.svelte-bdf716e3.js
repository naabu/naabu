import{S as se,i as te,s as ae,a3 as de,Y as B,Z as N,j as C,k as Z,e as k,t as re,m as P,n as z,c as w,a as v,g as ne,d as c,b as E,o as q,f as V,F as j,G as oe,H as pe,_ as J,x as $,u as D,v as Y,J as _e,K as L,A as be,a6 as he,r as ge,w as ke}from"../../../chunks/vendor-05d04a9e.js";import{F as we}from"../../../chunks/form-5da0bda3.js";import{R as ve}from"../../../chunks/resultFeedback-d6392221.js";import{a as le}from"../../../chunks/helper-a37f5850.js";import{f as Me}from"../../../chunks/helper-d2f31c51.js";import{s as je,p as ye}from"../../../chunks/stores-e07732fe.js";import{B as Se}from"../../../chunks/Button-e99ba711.js";import{f as Ee}from"../../../chunks/store-fa4e989c.js";import{S as $e,g as De}from"../../../chunks/helper-eccdbb77.js";/* empty css                                */import"../../../chunks/algolia-8e16a6f1.js";import"../../../chunks/dialog-24821939.js";import"../../../chunks/helper-69e97bf9.js";/* empty css                                                           */const{setTimeout:ie}=he;function Te(o){let s=!1,t=()=>{s=!1},e,r,i,a,u,l,m,h,y,A,T,p,_,F,f,g,b,M,S,G,K,Q;de(o[7]);function fe(n){o[8](n)}let U={};o[2]!==void 0&&(U.alert=o[2]),r=new ve({props:U}),B.push(()=>N(r,"alert",fe));function me(n){o[9](n)}function ce(n){o[10](n)}let X={};return o[3]!==void 0&&(X.module=o[3]),o[4]!==void 0&&(X.allMaps=o[4]),_=new we({props:X}),B.push(()=>N(_,"module",me)),B.push(()=>N(_,"allMaps",ce)),S=new Se({props:{dataTest:"create-module-submit-button",content:"Module aanmaken",isSubmit:!0,color:"primary",isDisabled:o[1]}}),{c(){C(r.$$.fragment),a=Z(),u=k("div"),l=k("div"),m=k("div"),h=k("div"),y=k("p"),A=re("Maak een nieuwe module aan met een kaart"),T=Z(),p=k("form"),C(_.$$.fragment),g=Z(),b=k("div"),M=k("div"),C(S.$$.fragment),this.h()},l(n){P(r.$$.fragment,n),a=z(n),u=w(n,"DIV",{});var d=v(u);l=w(d,"DIV",{class:!0});var O=v(l);m=w(O,"DIV",{class:!0});var I=v(m);h=w(I,"DIV",{});var R=v(h);y=w(R,"P",{class:!0});var W=v(y);A=ne(W,"Maak een nieuwe module aan met een kaart"),W.forEach(c),R.forEach(c),I.forEach(c),O.forEach(c),d.forEach(c),T=z(n),p=w(n,"FORM",{class:!0});var H=v(p);P(_.$$.fragment,H),g=z(H),b=w(H,"DIV",{class:!0});var x=v(b);M=w(x,"DIV",{class:!0});var ee=v(M);P(S.$$.fragment,ee),ee.forEach(c),x.forEach(c),H.forEach(c),this.h()},h(){E(y,"class","mt-1 max-w-2xl text-sm text-gray-500"),E(m,"class","flex-1 min-w-0"),E(l,"class","mt-2 md:flex md:items-center md:justify-between"),E(M,"class","flex justify-end"),E(b,"class","pt-5"),E(p,"class","space-y-8 divide-y divide-gray-200")},m(n,d){q(r,n,d),V(n,a,d),V(n,u,d),j(u,l),j(l,m),j(m,h),j(h,y),j(y,A),V(n,T,d),V(n,p,d),q(_,p,null),j(p,g),j(p,b),j(b,M),q(S,M,null),G=!0,K||(Q=[oe(window,"scroll",()=>{s=!0,clearTimeout(e),e=ie(t,100),o[7]()}),oe(p,"submit",pe(o[5]))],K=!0)},p(n,[d]){d&1&&!s&&(s=!0,clearTimeout(e),scrollTo(window.pageXOffset,n[0]),e=ie(t,100));const O={};!i&&d&4&&(i=!0,O.alert=n[2],J(()=>i=!1)),r.$set(O);const I={};!F&&d&8&&(F=!0,I.module=n[3],J(()=>F=!1)),!f&&d&16&&(f=!0,I.allMaps=n[4],J(()=>f=!1)),_.$set(I);const R={};d&2&&(R.isDisabled=n[1]),S.$set(R)},i(n){G||($(r.$$.fragment,n),$(_.$$.fragment,n),$(S.$$.fragment,n),G=!0)},o(n){D(r.$$.fragment,n),D(_.$$.fragment,n),D(S.$$.fragment,n),G=!1},d(n){Y(r,n),n&&c(a),n&&c(u),n&&c(T),n&&c(p),Y(_),Y(S),K=!1,_e(Q)}}}function Ie(o,s,t){let e;L(o,je,f=>t(12,e=f));let{firebase:r}=s,i,a,u=!1,l=le(),m={moduleName:"",moduleDescription:"",moduleSvg:""},h=[];be(async()=>{a=await r.firestore();let f=await a.collection("maps").get();t(4,h=[]),f.forEach(g=>{let b=g.data();b.paths.forEach(M=>{M.points=JSON.parse(M.points)}),b.mapId=g.id,h.push(b)})});async function y(){let f=Me(m,!1,!0,!1);t(2,l=le()),f.authorId=e.user.uid,f.createdAt=r.firestore.Timestamp.now().seconds,f.modifiedAt=r.firestore.Timestamp.now().seconds;try{let b=await a.collection("modules").add(f);t(2,l.success=!0,l),t(2,l.successTitle="Module succesvol aangemaakt",l),t(2,l.successMessage="id: "+b.id,l)}catch(g){t(2,l.error=!0,l),t(2,l.errorCode=g.code,l),t(2,l.errorMessage=g.message,l)}t(0,i=0)}async function A(){t(1,u=!0),await y(),setTimeout(()=>{t(1,u=!1)},5e3)}function T(){t(0,i=window.pageYOffset)}function p(f){l=f,t(2,l)}function _(f){m=f,t(3,m)}function F(f){h=f,t(4,h)}return o.$$set=f=>{"firebase"in f&&t(6,r=f.firebase)},[i,u,l,m,h,A,r,T,p,_,F]}class Ve extends se{constructor(s){super();te(this,s,Ie,Te,ae,{firebase:6})}}function Ae(o){let s,t;return{c(){s=k("span"),t=re("Module maken"),this.h()},l(e){s=w(e,"SPAN",{slot:!0});var r=v(s);t=ne(r,"Module maken"),r.forEach(c),this.h()},h(){E(s,"slot","title")},m(e,r){V(e,s,r),j(s,t)},d(e){e&&c(s)}}}function ue(o){let s,t,e;function r(a){o[3](a)}let i={};return o[1]!==void 0&&(i.firebase=o[1]),s=new Ve({props:i}),B.push(()=>N(s,"firebase",r)),{c(){C(s.$$.fragment)},l(a){P(s.$$.fragment,a)},m(a,u){q(s,a,u),e=!0},p(a,u){const l={};!t&&u&2&&(t=!0,l.firebase=a[1],J(()=>t=!1)),s.$set(l)},i(a){e||($(s.$$.fragment,a),e=!0)},o(a){D(s.$$.fragment,a),e=!1},d(a){Y(s,a)}}}function Fe(o){let s,t,e=o[1]&&ue(o);return{c(){s=k("span"),e&&e.c(),this.h()},l(r){s=w(r,"SPAN",{slot:!0});var i=v(s);e&&e.l(i),i.forEach(c),this.h()},h(){E(s,"slot","content")},m(r,i){V(r,s,i),e&&e.m(s,null),t=!0},p(r,i){r[1]?e?(e.p(r,i),i&2&&$(e,1)):(e=ue(r),e.c(),$(e,1),e.m(s,null)):e&&(ge(),D(e,1,1,()=>{e=null}),ke())},i(r){t||($(e),t=!0)},o(r){D(e),t=!1},d(r){r&&c(s),e&&e.d()}}}function Oe(o){let s,t,e;function r(a){o[4](a)}let i={$$slots:{content:[Fe],title:[Ae]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.menuitems=o[0]),s=new $e({props:i}),B.push(()=>N(s,"menuitems",r)),{c(){C(s.$$.fragment)},l(a){P(s.$$.fragment,a)},m(a,u){q(s,a,u),e=!0},p(a,[u]){const l={};u&66&&(l.$$scope={dirty:u,ctx:a}),!t&&u&1&&(t=!0,l.menuitems=a[0],J(()=>t=!1)),s.$set(l)},i(a){e||($(s.$$.fragment,a),e=!0)},o(a){D(s.$$.fragment,a),e=!1},d(a){Y(s,a)}}}function Re(o,s,t){let e,r;L(o,Ee,m=>t(2,e=m)),L(o,ye,m=>t(5,r=m));let i=De(r.path),a;function u(m){a=m,t(1,a),t(2,e)}function l(m){i=m,t(0,i)}return o.$$.update=()=>{o.$$.dirty&4&&(async()=>{e&&t(1,a=e)})()},[i,a,e,u,l]}class Qe extends se{constructor(s){super();te(this,s,Re,Oe,ae,{})}}export{Qe as default};
