import{S as Si,i as Bi,s as Ni,l as K,f as E,u as N,w as x,x as S,d as T,K as fi,r as ii,Y as y,Z as R,j as P,k as Q,m as C,n as X,o as q,_ as I,v as G,e as M,t as li,c as U,a as Y,g as ui,b as z,F as H}from"../../../../../chunks/vendor-05d04a9e.js";import{G as Ti,A as Fi,S as Oi}from"../../../../../chunks/saveActivityRevision-a20187a8.js";import{p as Ai}from"../../../../../chunks/stores-e07732fe.js";import{f as Di}from"../../../../../chunks/store-fa4e989c.js";import{e as Ei}from"../../../../../chunks/helper-249596aa.js";import{B as Pi}from"../../../../../chunks/breadcrumbPageTitle-29d2ecc5.js";import{a as Ci}from"../../../../../chunks/helper-d6a45b8d.js";import{G as qi,H as Gi}from"../../../../../chunks/getListData-fecee9ff.js";import{S as zi,g as Hi}from"../../../../../chunks/helper-eccdbb77.js";import{B as Li}from"../../../../../chunks/Button-e99ba711.js";import"../../../../../chunks/helper-a37f5850.js";import"../../../../../chunks/navigation-51f4a605.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/revision-7e827e10.js";import"../../../../../chunks/tabs-01b39912.js";import"../../../../../chunks/helper-cf411eac.js";import"../../../../../chunks/show-2c607e3f.js";/* empty css                                                                 */function di(e){let n,i,s,o;const c=[Wi,Vi],g=[];function v(a,f){return!a[3].revisionType||a[3].revisionType=="goal"?0:a[3].revisionType=="activity"?1:-1}return~(n=v(e))&&(i=g[n]=c[n](e)),{c(){i&&i.c(),s=K()},l(a){i&&i.l(a),s=K()},m(a,f){~n&&g[n].m(a,f),E(a,s,f),o=!0},p(a,f){let r=n;n=v(a),n===r?~n&&g[n].p(a,f):(i&&(ii(),N(g[r],1,1,()=>{g[r]=null}),x()),~n?(i=g[n],i?i.p(a,f):(i=g[n]=c[n](a),i.c()),S(i,1),i.m(s.parentNode,s)):i=null)},i(a){o||(S(i),o=!0)},o(a){N(i),o=!1},d(a){~n&&g[n].d(a),a&&T(s)}}}function Vi(e){let n,i,s,o,c,g,v,a;function f(u){e[22](u)}function r(u){e[23](u)}function m(u){e[24](u)}let b={revisionType:"activity"};e[6]!==void 0&&(b.firebase=e[6]),e[2]!==void 0&&(b.revisions=e[2]),e[3].revisionSourceId!==void 0&&(b.sourceId=e[3].revisionSourceId),n=new qi({props:b}),y.push(()=>R(n,"firebase",f)),y.push(()=>R(n,"revisions",r)),y.push(()=>R(n,"sourceId",m));function l(u){e[38](u)}let p={$$slots:{content:[Ui],"cta-button":[Mi],title:[Ki]},$$scope:{ctx:e}};return e[5]!==void 0&&(p.menuitems=e[5]),g=new zi({props:p}),y.push(()=>R(g,"menuitems",l)),{c(){P(n.$$.fragment),c=Q(),P(g.$$.fragment)},l(u){C(n.$$.fragment,u),c=X(u),C(g.$$.fragment,u)},m(u,h){q(n,u,h),E(u,c,h),q(g,u,h),a=!0},p(u,h){const F={};!i&&h[0]&64&&(i=!0,F.firebase=u[6],I(()=>i=!1)),!s&&h[0]&4&&(s=!0,F.revisions=u[2],I(()=>s=!1)),!o&&h[0]&8&&(o=!0,F.sourceId=u[3].revisionSourceId,I(()=>o=!1)),n.$set(F);const j={};h[0]&8140|h[1]&1024&&(j.$$scope={dirty:h,ctx:u}),!v&&h[0]&32&&(v=!0,j.menuitems=u[5],I(()=>v=!1)),g.$set(j)},i(u){a||(S(n.$$.fragment,u),S(g.$$.fragment,u),a=!0)},o(u){N(n.$$.fragment,u),N(g.$$.fragment,u),a=!1},d(u){G(n,u),u&&T(c),G(g,u)}}}function Wi(e){let n,i,s=e[0]&&ci(e);return{c(){s&&s.c(),n=K()},l(o){s&&s.l(o),n=K()},m(o,c){s&&s.m(o,c),E(o,n,c),i=!0},p(o,c){o[0]?s?(s.p(o,c),c[0]&1&&S(s,1)):(s=ci(o),s.c(),S(s,1),s.m(n.parentNode,n)):s&&(ii(),N(s,1,1,()=>{s=null}),x())},i(o){i||(S(s),i=!0)},o(o){N(s),i=!1},d(o){s&&s.d(o),o&&T(n)}}}function Ki(e){let n,i;return{c(){n=M("span"),i=li("Wijzigingen activiteit"),this.h()},l(s){n=U(s,"SPAN",{slot:!0});var o=Y(n);i=ui(o,"Wijzigingen activiteit"),o.forEach(T),this.h()},h(){z(n,"slot","title")},m(s,o){E(s,n,o),H(n,i)},d(s){s&&T(n)}}}function Mi(e){let n,i,s,o,c,g,v,a,f;return a=new Li({props:{dataTest:"show-all-activity-revisions-button",extraClasses:["z-10"],content:"Bekijk hele geschiedenis"}}),a.$on("click",e[37]),{c(){n=M("span"),i=M("div"),s=M("p"),o=M("a"),c=li("Terug naar activiteit"),v=Q(),P(a.$$.fragment),this.h()},l(r){n=U(r,"SPAN",{slot:!0});var m=Y(n);i=U(m,"DIV",{class:!0});var b=Y(i);s=U(b,"P",{class:!0});var l=Y(s);o=U(l,"A",{href:!0,class:!0});var p=Y(o);c=ui(p,"Terug naar activiteit"),p.forEach(T),l.forEach(T),v=X(b),C(a.$$.fragment,b),b.forEach(T),m.forEach(T),this.h()},h(){z(o,"href",g="/lerarenkamer/activiteit/"+e[3].revisionSourceId),z(o,"class","hover:underline"),z(s,"class","pt-2 text-sm text-gray-500"),z(i,"class","ml-4 mr-auto w-full flex justify-between"),z(n,"slot","cta-button")},m(r,m){E(r,n,m),H(n,i),H(i,s),H(s,o),H(o,c),H(i,v),q(a,i,null),f=!0},p(r,m){(!f||m[0]&8&&g!==(g="/lerarenkamer/activiteit/"+r[3].revisionSourceId))&&z(o,"href",g)},i(r){f||(S(a.$$.fragment,r),f=!0)},o(r){N(a.$$.fragment,r),f=!1},d(r){r&&T(n),G(a)}}}function gi(e){let n,i,s,o,c;function g(r){e[34](r)}function v(r){e[35](r)}function a(r){e[36](r)}let f={};return e[6]!==void 0&&(f.firebase=e[6]),e[8]!==void 0&&(f.latestRevisionId=e[8]),e[3]!==void 0&&(f.revision=e[3]),n=new Oi({props:f}),y.push(()=>R(n,"firebase",g)),y.push(()=>R(n,"latestRevisionId",v)),y.push(()=>R(n,"revision",a)),{c(){P(n.$$.fragment)},l(r){C(n.$$.fragment,r)},m(r,m){q(n,r,m),c=!0},p(r,m){const b={};!i&&m[0]&64&&(i=!0,b.firebase=r[6],I(()=>i=!1)),!s&&m[0]&256&&(s=!0,b.latestRevisionId=r[8],I(()=>s=!1)),!o&&m[0]&8&&(o=!0,b.revision=r[3],I(()=>o=!1)),n.$set(b)},i(r){c||(S(n.$$.fragment,r),c=!0)},o(r){N(n.$$.fragment,r),c=!1},d(r){G(n,r)}}}function Ui(e){let n,i,s,o,c,g,v,a,f,r,m,b,l,p,u;function h(d){e[25](d)}function F(d){e[26](d)}function j(d){e[27](d)}function _(d){e[28](d)}function B(d){e[29](d)}let O={};e[3]!==void 0&&(O.revisionNew=e[3]),e[9]!==void 0&&(O.revisionOld=e[9]),e[11]!==void 0&&(O.goForwardRevision=e[11]),e[10]!==void 0&&(O.goBackRevision=e[10]),e[12]!==void 0&&(O.loading=e[12]),i=new Fi({props:O}),y.push(()=>R(i,"revisionNew",h)),y.push(()=>R(i,"revisionOld",F)),y.push(()=>R(i,"goForwardRevision",j)),y.push(()=>R(i,"goBackRevision",_)),y.push(()=>R(i,"loading",B));function A(d){e[30](d)}function ei(d){e[31](d)}function ni(d){e[32](d)}function si(d){e[33](d)}let L={};e[6]!==void 0&&(L.firebase=e[6]),e[2]!==void 0&&(L.revisions=e[2]),e[7]!==void 0&&(L.toggle=e[7]),e[3].revisionId!==void 0&&(L.activeRevisionId=e[3].revisionId),f=new Gi({props:L}),y.push(()=>R(f,"firebase",A)),y.push(()=>R(f,"revisions",ei)),y.push(()=>R(f,"toggle",ni)),y.push(()=>R(f,"activeRevisionId",si));let w=e[8]&&e[3].revisionId!==e[8]&&gi(e);return{c(){n=M("span"),P(i.$$.fragment),a=Q(),P(f.$$.fragment),p=Q(),w&&w.c(),this.h()},l(d){n=U(d,"SPAN",{slot:!0});var k=Y(n);C(i.$$.fragment,k),a=X(k),C(f.$$.fragment,k),p=X(k),w&&w.l(k),k.forEach(T),this.h()},h(){z(n,"slot","content")},m(d,k){E(d,n,k),q(i,n,null),H(n,a),q(f,n,null),H(n,p),w&&w.m(n,null),u=!0},p(d,k){const D={};!s&&k[0]&8&&(s=!0,D.revisionNew=d[3],I(()=>s=!1)),!o&&k[0]&512&&(o=!0,D.revisionOld=d[9],I(()=>o=!1)),!c&&k[0]&2048&&(c=!0,D.goForwardRevision=d[11],I(()=>c=!1)),!g&&k[0]&1024&&(g=!0,D.goBackRevision=d[10],I(()=>g=!1)),!v&&k[0]&4096&&(v=!0,D.loading=d[12],I(()=>v=!1)),i.$set(D);const V={};!r&&k[0]&64&&(r=!0,V.firebase=d[6],I(()=>r=!1)),!m&&k[0]&4&&(m=!0,V.revisions=d[2],I(()=>m=!1)),!b&&k[0]&128&&(b=!0,V.toggle=d[7],I(()=>b=!1)),!l&&k[0]&8&&(l=!0,V.activeRevisionId=d[3].revisionId,I(()=>l=!1)),f.$set(V),d[8]&&d[3].revisionId!==d[8]?w?(w.p(d,k),k[0]&264&&S(w,1)):(w=gi(d),w.c(),S(w,1),w.m(n,null)):w&&(ii(),N(w,1,1,()=>{w=null}),x())},i(d){u||(S(i.$$.fragment,d),S(f.$$.fragment,d),S(w),u=!0)},o(d){N(i.$$.fragment,d),N(f.$$.fragment,d),N(w),u=!1},d(d){d&&T(n),G(i),G(f),w&&w.d()}}}function ci(e){let n,i,s,o,c,g,v,a,f,r;function m(_){e[16](_)}let b={title:e[0].title};e[1]!==void 0&&(b.breadcrumbs=e[1]),n=new Pi({props:b}),y.push(()=>R(n,"breadcrumbs",m));function l(_){e[17](_)}function p(_){e[18](_)}function u(_){e[19](_)}function h(_){e[20](_)}function F(_){e[21](_)}let j={};return e[3]!==void 0&&(j.revisionNew=e[3]),e[9]!==void 0&&(j.revisionOld=e[9]),e[11]!==void 0&&(j.goForwardRevision=e[11]),e[10]!==void 0&&(j.goBackRevision=e[10]),e[12]!==void 0&&(j.loading=e[12]),o=new Ti({props:j}),y.push(()=>R(o,"revisionNew",l)),y.push(()=>R(o,"revisionOld",p)),y.push(()=>R(o,"goForwardRevision",u)),y.push(()=>R(o,"goBackRevision",h)),y.push(()=>R(o,"loading",F)),{c(){P(n.$$.fragment),s=Q(),P(o.$$.fragment)},l(_){C(n.$$.fragment,_),s=X(_),C(o.$$.fragment,_)},m(_,B){q(n,_,B),E(_,s,B),q(o,_,B),r=!0},p(_,B){const O={};B[0]&1&&(O.title=_[0].title),!i&&B[0]&2&&(i=!0,O.breadcrumbs=_[1],I(()=>i=!1)),n.$set(O);const A={};!c&&B[0]&8&&(c=!0,A.revisionNew=_[3],I(()=>c=!1)),!g&&B[0]&512&&(g=!0,A.revisionOld=_[9],I(()=>g=!1)),!v&&B[0]&2048&&(v=!0,A.goForwardRevision=_[11],I(()=>v=!1)),!a&&B[0]&1024&&(a=!0,A.goBackRevision=_[10],I(()=>a=!1)),!f&&B[0]&4096&&(f=!0,A.loading=_[12],I(()=>f=!1)),o.$set(A)},i(_){r||(S(n.$$.fragment,_),S(o.$$.fragment,_),r=!0)},o(_){N(n.$$.fragment,_),N(o.$$.fragment,_),r=!1},d(_){G(n,_),_&&T(s),G(o,_)}}}function Yi(e){let n,i,s=e[4]&&e[3]&&e[9]&&di(e);return{c(){s&&s.c(),n=K()},l(o){s&&s.l(o),n=K()},m(o,c){s&&s.m(o,c),E(o,n,c),i=!0},p(o,c){o[4]&&o[3]&&o[9]?s?(s.p(o,c),c[0]&536&&S(s,1)):(s=di(o),s.c(),S(s,1),s.m(n.parentNode,n)):s&&(ii(),N(s,1,1,()=>{s=null}),x())},i(o){i||(S(s),i=!0)},o(o){N(s),i=!1},d(o){s&&s.d(o),o&&T(n)}}}function Zi(e,n,i){let s,o;fi(e,Ai,t=>i(14,s=t)),fi(e,Di,t=>i(15,o=t));let c,g,v,a,f,r=!1,m,b,l,p,u,h,F=!1,j=!1;const _=async()=>{i(12,j=!0),i(10,u=null),i(11,h=null),await B(),i(12,j=!1)};async function B(){let t=await v.firestore(),oi=t.collection("revisions").doc(s.params.id),ti=await oi.get();if(ti.exists&&(i(3,l=ti.data()),i(3,l.revisionId=oi.id,l),!l.revisionType||l.revisionType==="goal")){const W=await t.collection("revisions").doc(l.revisionId).collection("battles").get();i(3,l.battles=[],l),W.forEach(Z=>{let J=Z.data();J.name=Z.id,i(3,l.battles=[...l.battles,J],l)})}let ri=t.collection("revisions").doc(s.params.oldId),ai=await ri.get();if(ai.exists&&(i(9,p=ai.data()),i(9,p.revisionId=ri.id,p),!p.revisionType||l.revisionType==="goal")){const W=await t.collection("revisions").doc(p.revisionId).collection("battles").get();i(9,p.battles=[],p),W.forEach(Z=>{let J=Z.data();J.name=Z.id,i(9,p.battles=[...p.battles,J],p)})}if(l&&(!l.revisionType||l.revisionType==="goal")){let $=await t.collection("goals").doc(l.goalId).get();if($.exists){i(0,g=$.data()),i(0,g.id=l.goalId,g);let W=Ei(g.revisionList,l.revisionId);i(11,h=W.nextRevision),i(10,u=W.previousPreviousRevision)}}l&&l.revisionType==="activity"}function O(t){a=t,i(1,a),i(0,g),i(14,s)}function A(t){l=t,i(3,l)}function ei(t){p=t,i(9,p)}function ni(t){h=t,i(11,h)}function si(t){u=t,i(10,u)}function L(t){j=t,i(12,j)}function w(t){v=t,i(6,v),i(15,o)}function d(t){f=t,i(2,f)}function k(t){e.$$.not_equal(l.revisionSourceId,t)&&(l.revisionSourceId=t,i(3,l))}function D(t){l=t,i(3,l)}function V(t){p=t,i(9,p)}function _i(t){h=t,i(11,h)}function vi(t){u=t,i(10,u)}function pi(t){j=t,i(12,j)}function bi(t){v=t,i(6,v),i(15,o)}function mi(t){f=t,i(2,f)}function hi(t){r=t,i(7,r)}function wi(t){e.$$.not_equal(l.revisionId,t)&&(l.revisionId=t,i(3,l))}function ki(t){v=t,i(6,v),i(15,o)}function yi(t){m=t,i(8,m),i(2,f)}function Ri(t){l=t,i(3,l)}const Ii=()=>i(7,r=!r);function ji(t){c=t,i(5,c),i(3,l),i(14,s),i(13,b),i(2,f)}return e.$$.update=()=>{e.$$.dirty[0]&4&&f&&f.length>0&&(i(8,m=f[0].revisionId),i(13,b=f[0].status)),e.$$.dirty[0]&16387&&g&&(i(1,a=Ci(g)),i(1,a=[...a,{url:s.path,value:"Verschil versies"}])),e.$$.dirty[0]&32768&&(async()=>{o&&(i(6,v=o),await B(),i(4,F=!0))})(),e.$$.dirty[0]&16400&&s.params.id&&s.params.oldId&&F&&_(),e.$$.dirty[0]&24584&&l&&l.revisionType==="activity"&&i(5,c=Hi(s.path,b))},[g,a,f,l,F,c,v,r,m,p,u,h,j,b,s,o,O,A,ei,ni,si,L,w,d,k,D,V,_i,vi,pi,bi,mi,hi,wi,ki,yi,Ri,Ii,ji]}class ce extends Si{constructor(n){super();Bi(this,n,Zi,Yi,Ni,{},null,[-1,-1])}}export{ce as default};
