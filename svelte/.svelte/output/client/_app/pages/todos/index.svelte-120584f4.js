var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,s=(t,s)=>{for(var r in s||(s={}))e.call(s,r)&&a(t,r,s[r]);if(o)for(var r of o(s))n.call(s,r)&&a(t,r,s[r]);return t};import{Q as r,S as l,i as c,s as i,e as d,k as u,c as f,a as h,n as p,d as m,b as v,F as y,f as g,G as j,R as b,T as w,U as x,V as E,W as O,O as T,t as z,P as M,g as P,X as $,u as _,v as k,r as U,Y as F,B as I,Z as N,C as R}from"../../chunks/index-5ad3f4d4.js";function B(t){const e=t-1;return e*e*e+1}function D(t,{pending:e,error:o,result:n}){let a;async function s(s){const r=a={};s.preventDefault();const l=new FormData(t);e&&e(l,t);try{const e=await fetch(t.action,{method:t.method,headers:{accept:"application/json"},body:l});if(r!==a)return;e.ok?n(e,t):o?o(e,null,t):console.error(await e.text())}catch(c){if(!o)throw c;o(null,c,t)}}return t.addEventListener("submit",s),{destroy(){t.removeEventListener("submit",s)}}}function S(t,{delay:e=0,duration:o=400,easing:n=B,start:a=0,opacity:s=0}={}){const r=getComputedStyle(t),l=+r.opacity,c="none"===r.transform?"":r.transform,i=1-a,d=l*(1-s);return{delay:e,duration:o,easing:n,css:(t,e)=>`\n\t\t\ttransform: ${c} scale(${1-i*e});\n\t\t\topacity: ${l-d*e}\n\t\t`}}function C(t,e,o={}){const n=getComputedStyle(t),a="none"===n.transform?"":n.transform,s=e.from.width/t.clientWidth,l=e.from.height/t.clientHeight,c=(e.from.left-e.to.left)/s,i=(e.from.top-e.to.top)/l,d=Math.sqrt(c*c+i*i),{delay:u=0,duration:f=(t=>120*Math.sqrt(t)),easing:h=B}=o;return{delay:u,duration:r(f)?f(d):f,easing:h,css:(t,e)=>`transform: ${a} translate(${e*c}px, ${e*i}px);`}}function V(t,e,o){const n=t.slice();return n[6]=e[o],n}function q(t,e){let o,n,a,s,l,c,i,z,M,P,$,_,k,U,I,N,B,V,q,H,L,W,G,Q,X,Y,Z,A=R;function J(...t){return e[3](e[6],...t)}function K(){return e[4](e[6])}return{key:t,first:null,c(){o=d("div"),n=d("form"),a=d("input"),l=u(),c=d("button"),P=u(),$=d("form"),_=d("input"),U=u(),I=d("button"),B=u(),V=d("form"),q=d("button"),W=u(),this.h()},l(t){o=f(t,"DIV",{class:!0});var e=h(o);n=f(e,"FORM",{action:!0,method:!0});var s=h(n);a=f(s,"INPUT",{type:!0,name:!0,value:!0,class:!0}),l=p(s),c=f(s,"BUTTON",{class:!0,"aria-label":!0}),h(c).forEach(m),s.forEach(m),P=p(e),$=f(e,"FORM",{class:!0,action:!0,method:!0});var r=h($);_=f(r,"INPUT",{type:!0,name:!0,value:!0,class:!0}),U=p(r),I=f(r,"BUTTON",{class:!0,"aria-label":!0}),h(I).forEach(m),r.forEach(m),B=p(e),V=f(e,"FORM",{action:!0,method:!0});var i=h(V);q=f(i,"BUTTON",{class:!0,"aria-label":!0}),h(q).forEach(m),i.forEach(m),W=p(e),e.forEach(m),this.h()},h(){v(a,"type","hidden"),v(a,"name","done"),a.value=s=e[6].done?"":"true",v(a,"class","svelte-ztcljr"),v(c,"class","toggle svelte-ztcljr"),v(c,"aria-label",i="Mark todo as "+(e[6].done?"not done":"done")),v(n,"action",z="/todos/"+e[6].uid+".json?_method=patch"),v(n,"method","post"),v(_,"type","text"),v(_,"name","text"),_.value=k=e[6].text,v(_,"class","svelte-ztcljr"),v(I,"class","save svelte-ztcljr"),v(I,"aria-label","Save todo"),v($,"class","text svelte-ztcljr"),v($,"action",N="/todos/"+e[6].uid+".json?_method=patch"),v($,"method","post"),v(q,"class","delete svelte-ztcljr"),v(q,"aria-label","Delete todo"),v(V,"action",H="/todos/"+e[6].uid+".json?_method=delete"),v(V,"method","post"),v(o,"class","todo svelte-ztcljr"),y(o,"done",e[6].done),this.first=o},m(t,s){g(t,o,s),j(o,n),j(n,a),j(n,l),j(n,c),j(o,P),j(o,$),j($,_),j($,U),j($,I),j(o,B),j(o,V),j(V,q),j(o,W),X=!0,Y||(Z=[b(M=D.call(null,n,{pending:J,result:e[1]})),b(D.call(null,$,{result:e[1]})),b(L=D.call(null,V,{result:K}))],Y=!0)},p(t,l){e=t,(!X||1&l&&s!==(s=e[6].done?"":"true"))&&(a.value=s),(!X||1&l&&i!==(i="Mark todo as "+(e[6].done?"not done":"done")))&&v(c,"aria-label",i),(!X||1&l&&z!==(z="/todos/"+e[6].uid+".json?_method=patch"))&&v(n,"action",z),M&&r(M.update)&&1&l&&M.update.call(null,{pending:J,result:e[1]}),(!X||1&l&&k!==(k=e[6].text)&&_.value!==k)&&(_.value=k),(!X||1&l&&N!==(N="/todos/"+e[6].uid+".json?_method=patch"))&&v($,"action",N),(!X||1&l&&H!==(H="/todos/"+e[6].uid+".json?_method=delete"))&&v(V,"action",H),L&&r(L.update)&&1&l&&L.update.call(null,{result:K}),1&l&&y(o,"done",e[6].done)},r(){Q=o.getBoundingClientRect()},f(){w(o),A(),x(o,Q)},a(){A(),A=E(o,Q,C,{duration:200})},i(t){X||(t&&F((()=>{G||(G=O(o,S,{start:.7},!0)),G.run(1)})),X=!0)},o(t){t&&(G||(G=O(o,S,{start:.7},!1)),G.run(0)),X=!1},d(t){t&&m(o),t&&G&&G.end(),Y=!1,T(Z)}}}function H(t){let e,o,n,a,s,l,c,i,y,w,x,E,O=[],T=new Map,F=t[0];const R=t=>t[6].uid;for(let r=0;r<F.length;r+=1){let e=V(t,F,r),o=R(e);T.set(o,O[r]=q(o,e))}return{c(){e=u(),o=d("div"),n=d("h1"),a=z("Todos"),s=u(),l=d("form"),c=d("input"),y=u();for(let t=0;t<O.length;t+=1)O[t].c();this.h()},l(t){M('[data-svelte="svelte-181o7gf"]',document.head).forEach(m),e=p(t),o=f(t,"DIV",{class:!0});var r=h(o);n=f(r,"H1",{});var i=h(n);a=P(i,"Todos"),i.forEach(m),s=p(r),l=f(r,"FORM",{class:!0,action:!0,method:!0});var d=h(l);c=f(d,"INPUT",{name:!0,placeholder:!0,class:!0}),d.forEach(m),y=p(r);for(let e=0;e<O.length;e+=1)O[e].l(r);r.forEach(m),this.h()},h(){document.title="Todos",v(c,"name","text"),v(c,"placeholder","+ tap to add a todo"),v(c,"class","svelte-ztcljr"),v(l,"class","new svelte-ztcljr"),v(l,"action","/todos.json"),v(l,"method","post"),v(o,"class","todos svelte-ztcljr")},m(r,d){g(r,e,d),g(r,o,d),j(o,n),j(n,a),j(o,s),j(o,l),j(l,c),j(o,y);for(let t=0;t<O.length;t+=1)O[t].m(o,null);w=!0,x||(E=b(i=D.call(null,l,{result:t[2]})),x=!0)},p(t,[e]){if(i&&r(i.update)&&1&e&&i.update.call(null,{result:t[2]}),3&e){F=t[0],I();for(let t=0;t<O.length;t+=1)O[t].r();O=$(O,e,R,1,t,F,T,o,N,q,null,V);for(let t=0;t<O.length;t+=1)O[t].a();_()}},i(t){if(!w){for(let t=0;t<F.length;t+=1)k(O[t]);w=!0}},o(t){for(let e=0;e<O.length;e+=1)U(O[e]);w=!1},d(t){t&&m(e),t&&m(o);for(let e=0;e<O.length;e+=1)O[e].d();x=!1,E()}}}var L=function(t,e,o,n){return new(o||(o=Promise))((function(a,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function l(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}c((n=n.apply(t,e||[])).next())}))};const W=({fetch:t})=>L(void 0,void 0,void 0,(function*(){const e=yield t("/todos.json");if(e.ok){return{props:{todos:yield e.json()}}}const{message:o}=yield e.json();return{error:new Error(o)}}));function G(t,e,o){var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))((function(a,s){function r(t){try{c(n.next(t))}catch(e){s(e)}}function l(t){try{c(n.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(r,l)}c((n=n.apply(t,e||[])).next())}))};let{todos:a}=e;return t.$$set=t=>{"todos"in t&&o(0,a=t.todos)},[a,function(t){return n(this,void 0,void 0,(function*(){const e=yield t.json();o(0,a=a.map((t=>t.uid===e.uid?e:t)))}))},async(t,e)=>{const n=await t.json();o(0,a=[...a,n]),e.reset()},(t,e)=>{const n=!!e.get("done");o(0,a=a.map((e=>e===t?s(s({},e),{done:n}):e)))},t=>{o(0,a=a.filter((e=>e.uid!==t.uid)))}]}export default class extends l{constructor(t){super(),c(this,t,G,H,i,{todos:0})}}export{W as load};
